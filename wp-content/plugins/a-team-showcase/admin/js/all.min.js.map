{"version":3,"sources":["util.js","main.js","backbone.stickit.js","backbone.nested.js","core.js","touch.js","transition.js","dropdown.js","lightbox.js","bootstrap-colorpicker.min.js","selectize.js","panel.js","ajax.js","drag-n-drop.js","form.js","tooltip.js","animation.js","team-actions.js","employer-actions.js","teams.js","employers.js","team.js","preview.js","tooltip-photo.js","tooltip-font.js","tooltip-divider.js","tooltip-social.js","tooltip-skills.js","employer.js"],"names":["AwesomeUtil","detect_os","os_name","navigator","appVersion","indexOf","toObject","arr","rv","i","length","find_in_array_of_objects","array","key","value","result","jQuery","each","index","item","hasOwnProperty","hex_to_rgb","hex","parseInt","r","g","b","calc_size","raw","endsWith","replace","clean_number","get_keys","obj","_","list","find_key_by_value","needle","haystack","find","find_index_by_value","keys","removeClass","el","start_with","css","regex","RegExp","match","join","String","prototype","replace_all","this","capitalize","charAt","toUpperCase","slice","end","Array","last","$","fn","isVisible","parent","$parent","window","windowScrollTopView","scrollTop","elemTop","height","addClass","panel","a_ajax","AwesomeAjax","ats_ajax","ATS_Ajax","on","e","keyCode","$self","$spinner","parents","$form","model","attr","show","ajax","action","data","name","val","success_handler","setTimeout","location","reload","args","html","width","AwesomePanel","init","lightbox","minWidth","minHeight","labels","close","id","container","content","tooltip","AwesomeTooltip","get_templates","factory","define","amd","exports","require","Backbone","Stickit","_handlers","addHandler","handlers","map","flatten","handler","defaults","updateModel","updateView","updateMethod","concat","ViewMixin","_modelBindings","unstickit","bindingSelector","isObject","v","selector","models","destroyFns","reject","binding","config","off","event","push","_destroy","invoke","uniq","cid","call","$el","stickit","optionalModel","optionalBindingsConfig","bindings","addBinding","remove","stickitWrapped","ret","apply","arguments","namespace","isString","observe","isFunction","getConfiguration","modelAttr","view","bindId","uniqueId","options","extend","stickitChange","setOptions","applyViewFn","destroy","initializeAttributes","initializeVisible","initializeClasses","events","type","eventName","listener","getVal","currentVal","evaluateBoolean","setAttr","sel","bind","observeModelEvent","m","changeId","getAttr","updateViewBindEl","initialize","View","evaluatePath","path","parts","split","reduce","memo","reference","isBoolean","onSet","set","isArray","attribute","has","retrieveVal","field","escape","sanitizeVal","onGet","update","opts","filter","is","visible","props","attributes","attrConfig","clone","lastClass","observed","updateAttr","updateType","contains","classes","classConfig","updateClass","toggleClass","visibleCb","visibleFn","toggle","isInitializing","afterUpdate","prop","checkbox","checkboxVal","checked","some","boxval","optList","selectConfig","selectOptions","collection","undefined","isMultiple","getList","option","dataVal","label","text","get","opt_labels","valuePath","labelPath","disabledPath","addSelectOptions","fieldVal","disabled","optionVal","fillOption","isSelected","isEqual","append","context","Collection","refreshSelectOptions","removeCollectionListeners","removeAllListeners","trigger","once","viewCid","toJSON","defaultOption","$group","opt","sortBy","comparator","selected","root","module","nestedChanges","_delayedTriggers","NestedModel","Model","attrStrOrPath","walkThenGet","previous","_previousAttributes","isUndefined","attrPath","unsetObj","validated","newAttrs","deepClone","_setAttr","attrs","_attrStr","unset","__super__","changedAttributes","omit","_runDelayedTriggers","changed","clear","silent","validate","setChanged","prefix","changedPath","_delayedChange","_delayedTrigger","add","attrStr","current","Error","aryPath","initial","oldEl","splice","createAttrStr","aryCount","first","diff","backboneChanged","newVal","shift","newValue","fullPathLength","walkPath","next","isNewValue","parentPath","visited","checkChanges","nestedAttr","nestedVal","a","isNumber","rest","callback","scope","childAttr","Formstone","c","d","l","Plugins","initialized","methods","_setup","f","transition","MozTransition","OTransition","WebkitTransition","transform","MozTransform","OTransform","msTransform","webkitTransform","h","createElement","style","support","o","transitionEnd","windowWidth","$window","windowHeight","p","k","startTimer","q","ResizeHandlers","priority","j","Version","DontConflict","Conflicts","document","$document","$body","userAgent","vendor","opera","isFirefox","test","isChrome","isSafari","isMobile","isFirefoxMobile","file","File","FileList","FileReader","history","pushState","replaceState","matchMedia","msMatchMedia","raf","requestAnimationFrame","cancelAnimationFrame","touch","DocumentTouch","killEvent","preventDefault","stopPropagation","stopImmediatePropagation","clearTimer","setInterval","clearInterval","clearTimeout","sortAsc","sortDesc","Deferred","n","base","element","blur","change","click","dblClick","drag","dragEnd","dragEnter","dragLeave","dragOver","dragStart","drop","error","focus","focusIn","focusOut","input","keyDown","keyPress","keyUp","load","mouseDown","mouseEnter","mouseLeave","mouseMove","mouseOut","mouseOver","mouseUp","resize","scroll","select","touchCancel","touchEnd","touchLeave","touchMove","touchStart","NoConflict","Plugin","eq","guid","rawGuid","dotGuid","s","_construct","functions","iterate","_destruct","removeData","utilities","_initialize","getData","noop","_resize","_delegate","widget","namespaceClean","sort","then","resolve","clickTouchStart","touches","touching","tap","pan","scale","swipe","pointerDown","axis","axisX","axisY","preventManipulation","originalEvent","pointerId","pageX","clientX","pageY","clientY","startE","startX","startY","startT","Date","getTime","scaleD","passed","clicked","pointerMove","pointerUp","pointerCancel","$links","scaleStart","panStart","pinch","startD","t","Math","abs","u","endX","endY","endD","deltaX","deltaY","_data","unshift","pop","scaleEnd","panEnd","w","x","Event","bubbles","directionX","directionY","sqrt","-ms-touch-action","touch-action","PointerEvent","$target","target","$check","styles","timer","parseFloat","property","propertyName","always","getComputedStyle","getPropertyValue","currentStyle","setup","$Body","construct","multiple","links","external","$trueOriginal","not","$originalOption","originalLabel","originalIndex","prepend","RawClasses","item_placeholder","$allOptions","$options","tabIndex","wrapperClasses","customClass","mobile","cover","wrapperHtml","innerHtml","trimText","trim","wrap","after","$dropdown","Classes","$selected","$wrapper","$placeholder","placeholder","closed","focused","buildOptions","updateOption","fsTouch","Events","onClick","onSelect","onClose","onChange","onFocusIn","onFocusOut","destruct","hasClass","open","unwrap","disableDropdown","$items","item_disabled","enableDropdown","updateDropdown","count","$option","tagName","group","opVal","item_selected","Functions","openOptions","closeOptions","Document","createEvent","evt","initMouseEvent","Window","dispatchEvent","fireEvent","closeOthers","offset","bodyHeight","outerHeight","optionsHeight","position","left","top","bottom","closeOptionsHelper","scrollOptions","currentTarget","handleChange","internal","escapeText","onKeypress","metaKey","altKey","ctrlKey","shiftKey","total","inArray","letter","fromCharCode","$item","isDisabled","selectedIndex","selectedOffset","buffer","launchLink","url","href","substring","disable","enable","S","T","U","O","Q","$object","L","hash","toLowerCase","K","extensions","substr","I","P","gallery","active","isTouch","isAnimating","oldContentHeight","oldContentWidth","margin","M","overlay","loading","animating","fixed","iframed","inline","loading_icon","tools","controls","control","control_previous","control_next","caption_toggle","captionClosed","meta","position_current","position_total","caption","formatter","$overlay","$lightbox","$close","$container","$content","$tools","$meta","$position","$caption","$controlBox","$controls","paddingVertical","paddingHorizontal","mobilePaddingVertical","mobilePaddingHorizontal","contentHeight","contentWidth","outerWidth","controlHeight","z","R","A","y","fsTransition","C","B","D","targetHeight","targetWidth","E","N","lock","duration","marginTop","metaHeight","G","captionOpen","caption_open","$image","one","H","naturalHeight","naturalWidth","retina","hide","F","image","complete","readyState","viewportHeight","viewportWidth","imageMarginTop","imageMarginLeft","imageHeight","imageWidth","spacerHeight","ratioHorizontal","ratioVertical","isWide","targetImageHeight","targetImageWidth","marginLeft","$videoWrapper","videoWrapper","$video","video","prependTo","videoMarginTop","videoMarginLeft","targetVideoWidth","targetVideoHeight","videoRatio","videoWidth","control_disabled","infinite","requestKey","iframe","objectHeight","objectWidth","maxHeight","isIframe","objectMarginTop","objectMarginLeft","Image","src","J","colorpicker","Color","customColors","origFormat","colors","setColor","constructor","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","transparent","_sanitizeNumber","isNaN","isTransparent","strVal","rgbaIsTransparent","rgba","stringToHSB","alias","that","stringParsers","parser","re","exec","values","parse","format","RGBtoHSB","HSLtoRGB","setHue","setSaturation","setBrightness","setAlpha","toRGB","X","round","toHex","rgb","toString","toHSL","toAlias","V","max","min","HueToRGB","tr","tg","tb","execResult","colorNameToHex","horizontal","color","component","sliders","saturation","maxLeft","maxTop","callLeft","callTop","hue","alpha","slidersHorz","template","align","colorSelectors","Colorpicker","getValue","picker","$btn","setValue","proxy","mousedown","appendTo","keyup.colorpicker","keyup","change.colorpicker","focus.colorpicker","focusout.colorpicker","click.colorpicker","reposition","body","hasInput","mousedown.colorpicker","updateData","updateInput","updatePicker","sl","icns","updateComponent","icn","backgroundColor","force","defaultValue","currentSlider","mousePointer","zone","closest","guide","mousemove.colorpicker","mousemove","touchmove.colorpicker","mouseup.colorpicker","mouseup","touchend.colorpicker","pickerArgs","$returnValue","$this","inst","Sifter","items","settings","diacritics","tokenize","query","tokens","words","escape_regex","DIACRITICS","string","iterator","object","is_array","forEach","getScoreFunction","search","self","fields","token_count","prepareSearch","scoreValue","token","score","pos","scoreObject","field_count","sum","conjunction","getSortFunction","fields_count","multiplier","multipliers","get_field","implicit_score","sort_empty","direction","cmp","option_fields","option_sort","option_sort_empty","fn_sort","fn_score","limit","asciifold","str","Object","chunk","foreignletters","lookup","regexp","foreignletter","MicroPlugin","mixin","Interface","plugins","initializePlugins","queue","names","requested","loaded","utils","loadPlugin","plugin","vArg","Selectize","highlight","$element","pattern","node","skip","nodeType","spannode","className","middlebit","splitText","middleclone","cloneNode","appendChild","parentNode","replaceChild","childNodes","MicroEvent","fct","_events","destObject","IS_MAC","KEY_A","KEY_RETURN","KEY_ESC","KEY_LEFT","KEY_UP","KEY_P","KEY_RIGHT","KEY_DOWN","KEY_N","KEY_BACKSPACE","KEY_DELETE","KEY_SHIFT","KEY_CMD","KEY_CTRL","KEY_TAB","TAG_SELECT","TAG_INPUT","SUPPORTS_VALIDITY_API","validity","isset","hash_key","escape_html","escape_replace","hook","before","method","original","called","debounce","delay","timeout","debounce_events","types","event_args","watchChildEvent","child","getSelection","start","selectionStart","selectionEnd","selection","createRange","selLen","moveStart","transferStyles","$from","$to","properties","measureString","$test","padding","whiteSpace","autoGrow","$input","currentWidth","printable","character","triggerHandler","dir","selectize","computedStyle","order","tagType","rtl","eventNS","highlightedValue","isOpen","isRequired","isInvalid","isLocked","isFocused","isInputHidden","isSetup","isShiftDown","isCmdDown","isCtrlDown","ignoreFocus","ignoreBlur","ignoreHover","hasOptions","currentResults","lastValue","caretPos","loadedSearches","$activeOption","$activeItems","optgroups","userOptions","renderCache","onSearchChange","loadThrottle","sifter","registerOption","registerOptionGroup","mode","maxItems","hideSelected","setupCallbacks","setupTemplates","$control","$control_input","$dropdown_content","$dropdown_parent","inputMode","classes_plugins","wrapperClass","inputClass","dropdownParent","dropdownClass","dropdownContentClass","copyClassesToDropdown","splitOn","delimiter","delimiterEscaped","onOptionHover","onOptionSelect","onItemSelect","onMouseDown","keydown","onKeyDown","onKeyUp","keypress","onKeyPress","positionDropdown","onBlur","onFocus","paste","onPaste","revertSettings","$children","children","detach","tabindex","refreshState","updateOriginalInput","refreshItems","updatePlaceholder","preload","field_label","labelField","field_optgroup","optgroupLabelField","templates","optgroup","optgroup_header","option_create","render","callbacks","item_add","item_remove","option_add","option_remove","option_clear","optgroup_add","optgroup_remove","optgroup_clear","dropdown_open","dropdown_close","defaultPrevented","isDefaultPrevented","setActiveItem","isFull","splitInput","createItem","which","create","selectAll","$next","getAdjacentOption","setActiveOption","$prev","advanceSelection","selectOnTab","deleteSelection","refreshOptions","wasFocused","showInput","openOnFocus","dest","activeElement","deactivate","setTextboxValue","setCaret","createOnBlur","closeAfterSelect","lastQuery","addItem","getOption","loadingClass","results","addOption","addItems","idx","begin","swap","$last","hideInput","animate","height_menu","height_item","scroll_top","scroll_bottom","stop","scrollDuration","opacity","getSearchOptions","sortField","searchField","searchConjunction","calculateScore","triggerDropdown","groups","groups_order","option_html","html_children","has_create_option","$active","$active_before","$create","active_before","maxOptions","optgroupField","lockOptgroupOrder","a_order","$order","b_order","canCreate","addPrecedence","valueField","optgroupValueField","addOptionGroup","removeOptionGroup","clearOptionGroups","$item_new","value_new","index_item","cache_items","cache_options","order_old","getItem","replaceWith","removeOption","removeItem","clearOptions","getElementWithValue","$els","getAttribute","isPending","value_next","wasFull","insertAtCaret","persist","caret","unlock","output","invalid","refreshClasses","isEmptyObject","removeAttr","visibility","display","option_select","$option_select","$tail","onDelete","tail","valueLength","cursorAtEdge","advanceCaret","$adj","$child","templateName","cache","regex_tag","clearCache","createFilter","allowEmptyOption","dataAttr","settings_user","attr_data","field_value","field_optgroup_label","field_optgroup_value","init_textbox","settings_element","data_raw","JSON","init_select","optionsMap","readData","addGroup","$optgroup","instance","tag_name","sortable","forcePlaceholderSize","ui","helper","overflow","title","headerClass","titleRowClass","labelClass","closeClass","$dropdown_header","equalizeWidth","equalizeHeight","prev","getScrollbarWidth","div","doc","innerHTML","firstChild","offsetWidth","clientWidth","removeChild","equalizeSizes","height_max","width_last","width_parent","$optgroups","innerWidth","html_container","html_element","render_item","aliases","Modernizr","Boolean","_config","classPrefix","baseVal","enableJSClass","enableClasses","createElementNS","fake","styleSheet","cssText","createTextNode","background","offsetHeight","CSS","supports","modElem","_version","usePrefixes","_q","addTest","addAsyncTest","documentElement","nodeName","_cssomPrefixes","_domPrefixes","elem","testAllProps","eval","_T","rotate","deg","rad","PI","costheta","cos","sintheta","sin","$M","skew","dx","dy","radX","radY","translate","fromString","shiftFixed","scrollLeft","bh","wh","$offsetP","nu","oLeft","oTop","coords","newCSS","_b","transf","$t","isIE","transProp","translation","isFF","right","toChangeHor","toChangeVert","htmlMargins","$win","stringify","unshiftFixed","newCss","defTranslationStr","transitionProperty","getVendorPropertyName","vendorProp","prefixes","prop_","item_id","model_name","content_url","overlayvisible","$html","spinner","animation","animation_start","animation_end","hide_content","show_content","scroll_left","$fixed","cssanimations","callback_close","html_pool","appendHTML","showHTML","callback_open","bindActions","load_model","load_content","callback_success","callback_error","error_handler","publish_model","delete_model","security","success","responseArray","wpAjax","parseAjaxResponse","errors","responses","success_error_handler","AwesomeDrag","sortableEl","employers_panel","cloneEmployers","$clone","ats_employers_clone","ats_employers","fadeOut","all_employers","model_employers","findWhere","$push_all_btn","ats_panel","bind_clone","updateElements","reset","employers","employers_ids","initSortable","zIndex","connectWith","cursor","cursorAt","img","parentElement","$employers_field","foto","teams_count","ID","post_title","isNumeric","AwesomeModel","fill_team_layout_html","fill_blocks_order","fill_team_grid_blocks_order","fill_team_table_blocks_order","fill_team_employers","ids","fill_color","fill_team_button_color","fill_team_button_hover_color","fill_team_button_text_color","fill_team_button_text_hover_color","fill_team_base_color","fill_team_card_base_color","fill_team_card_border_color","fill_team_card_divider_color","fill_team_card_shadow_color","fill_team_card_even_row_color","fill_team_panel_color","fill_team_photo_shape","fill_team_photo_size","fill_visibility","fill_team_slider","fill_team_slider_autoplay","fill_team_slider_adaptive","fill_team_filter","fill_team_panel","fill_team_panel_contacts_visible","fill_team_panel_social_visible","fill_team_reveal","fill_team_body_visible","fill_team_photo_visible","fill_team_name_visible","fill_team_divider_visible","fill_team_position_visible","fill_team_short_bio_visible","fill_team_phone_visible","fill_team_email_visible","fill_team_skype_visible","fill_team_link_visible","fill_team_location_visible","fill_team_social_visible","fill_team_skills_visible","fill_employer_foto","fill_employer_panel_text","employer_panel_text_dfd","tinyMCE","tinymce","editors","tinyMCEPreInit","mceInit","editor","getContent","quicktags","qtInit","fill_checkbox","fill_team_filter_bold","fill_team_name_bold","fill_team_position_bold","fill_team_short_bio_bold","fill_team_contacts_bold","fill_team_filter_italic","fill_team_name_italic","fill_team_position_italic","fill_team_short_bio_italic","fill_team_contacts_italic","fill_select","dropdown","fill_team_layout","fill_team_order_by","fill_team_hover","fill_team_panel_theme","fill_team_template","layout","set_employer_photo","size","set_team_employers","init_departments","taxonomy","ats_employers_taxonomy_terms","get_employer_form","AwesomeForm","fill","dfd","rules","form_key","viewport","replace_tags","show_field","$tooltip","blocks","field_name","center","ATS_Animation","browser","msie","version","notice","bind_template_change","preview","bind_layout_change","add_team_open_callback","AwesomeTeam","done","edit_team_open_callback","show_shortcode_button","edit_team_close_callback","set_team_employers_callback","images","$employers","update_team_card","model_team","ats_animation","locked","form","$alert","team_model","message","$icon","confirm","mouseenter","mouseleave","colorpickers","random","update_colorpicker","target_id","employer_load_model","dfd1","selectize_instance","onInitialize","when","v1","v2","edit_employer_open_callback","AwesomeEmployer","edit_employer_close_callback","set_employer_photo_callback","update_employer_card","post_id","model_employer","gaps","members","limits","card_width","photo_shape","photo_size","photo_width","card_colors","text_colors","text_transforms","font_sizes","bolds","italics","top_margins","grid","exclude","table","AwesomeRandom","number","floor","percent","radio","shuffle","color_delta","range","invert_color","black_or_white","lightness","seed_color","arg","unset_array","make_seed","seed","seed_card_color","inner_value","inverted","random_values","Employer","Employers","tooltip_hint","tooltips","photo","hint","short_bio","divider","social","contacts","skills","card_divider_color","show_fields","insert_preview_html","bind_form","model_field","opened","team_form_view","TeamForm","setElement","bind_preview","preview_view","TeamPreview","init_sortable_fields","card","forceHelperSize","$wrap","block","set_rgba_color","model_base","init_colorpicker","bind_tooltips","option_name","$toolptip","view_name","init_tooltips","init_help","destroy_colorpickers","reinit","def2","def3","def4","def5","def6","def7","toggle_pair","select_radio","$counter","toggle_visibility","photo_settings","$custom_width","$top_margin","photo_sizes","a-full","$shape","$photo","font_settings","$elc","card_body_settings","border","shadow","bindAll","_this","before_render","after_render","icon_max_size","fill_max_width","icon_max_width","button","TeamTooltipPhoto","field_model","TeamTooltipFont","TeamTooltipDivider","TeamTooltipSocial","TeamTooltipSkills","file_frame","json","wp","media","frames","frame","state","sizes","$img","update_skill_order","make_skill","$name","skill","bind_skills","$skill","employer_form_view","edit_skill","$text","skills_order","new_order","containment","EmployerForm","star_options","buttons","edit","star","select_value","cf","skills_ordered","employer_view"],"mappings":"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","file":"all.min.js","sourcesContent":["/**\r\n * System functions\r\n */\r\nvar AwesomeUtil = {\r\n    // detect OS\r\n    detect_os: function () {\r\n        var os_name = \"Unknown OS\";\r\n        if (navigator.appVersion.indexOf(\"Win\") != -1) os_name = \"Windows\";\r\n        if (navigator.appVersion.indexOf(\"Mac\") != -1) os_name = \"MacOS\";\r\n        if (navigator.appVersion.indexOf(\"X11\") != -1) os_name = \"UNIX\";\r\n        if (navigator.appVersion.indexOf(\"Linux\") != -1) os_name = \"Linux\";\r\n        return os_name;\r\n    },\r\n\r\n    // convert array to object\r\n    toObject: function (arr) {\r\n        var rv = {};\r\n        for (var i = 0; i < arr.length; ++i) {\r\n            if (typeof arr[i] === 'object') {\r\n                rv[i] = AwesomeUtil.toObject(arr[i]);\r\n            } else {\r\n                rv[i] = arr[i];\r\n            }\r\n        }\r\n        return rv;\r\n    },\r\n\r\n    // helper function to find some value in array of objects\r\n    find_in_array_of_objects: function (array, key, value){\r\n        var result = false;\r\n        jQuery.each(array, function(index, item){\r\n            if(item.hasOwnProperty(key) && item[key] == value){\r\n                result = true;\r\n            }\r\n        });\r\n        return result;\r\n    },\r\n\r\n    // convert HEX color to RGB color\r\n    hex_to_rgb: function (hex){\r\n        hex = parseInt(hex, 16);\r\n        var r = hex >> 16;\r\n        var g = hex >> 8 & 0xFF;\r\n        var b = hex & 0xFF;\r\n        return [r,g,b];\r\n    },\r\n\r\n    // calculate size properly\r\n    calc_size: function (raw){\r\n        raw = ''+raw;\r\n        if(raw.endsWith('%') || raw.endsWith('px')){\r\n            return raw;\r\n        }\r\n        var result = raw.replace('/[^0-9]/', '');\r\n        return result + 'px';\r\n    },\r\n\r\n    // clean number from non-digit characters\r\n    clean_number: function (raw) {\r\n        return parseInt(raw.replace(/\\D+/g, ''));\r\n    },\r\n\r\n    get_keys: function (obj){\r\n        var result = {};\r\n        var i = 0;\r\n        _.each(obj, function (value, key, list) {\r\n            if(typeof value === 'object'){\r\n                result[i] = AwesomeUtil.get_keys(value);\r\n            }else{\r\n                result[i] = key;\r\n            }\r\n            i++;\r\n        });\r\n        return result;\r\n    },\r\n\r\n    find_key_by_value: function (needle, haystack) {\r\n        var result;\r\n        _.find(haystack, function(value, key){\r\n            if(typeof value === 'object'){\r\n                result = AwesomeUtil.find_key_by_value(needle, value);\r\n            }else{\r\n                if (value === needle) {\r\n                    result = key;\r\n                    return true;\r\n                }else{\r\n                    return false;\r\n                }\r\n            }\r\n        });\r\n        return result;\r\n    },\r\n\r\n    find_index_by_value: function (needle, haystack) {\r\n        var keys = AwesomeUtil.get_keys(haystack);\r\n        var key = AwesomeUtil.find_key_by_value(needle, haystack);\r\n        var result = AwesomeUtil.find_key_by_value(key, keys);\r\n\r\n        return result;\r\n    },\r\n\r\n    removeClass: function (el, start_with) {\r\n        jQuery(el).removeClass (function (index, css) {\r\n            var regex = new RegExp('(^|\\\\s)' + start_with + '\\\\S+', 'g');\r\n            return (css.match (regex) || []).join(' ');\r\n        });\r\n    }\r\n};\r\n\r\n// smart replace for templates\r\nString.prototype.replace_all = function(find, replace){\r\n    return this.replace(new RegExp(find, 'g'), replace);\r\n};\r\n\r\n// capitalize\r\nString.prototype.capitalize = function () {\r\n    return this.charAt(0).toUpperCase() + this.slice(1);\r\n};\r\n\r\n// check string ends with special characters\r\nString.prototype.endsWith = function(end){\r\n    return this.indexOf(end, this.length - end.length) !== -1;\r\n};\r\n\r\n// Array last item\r\nif (!Array.prototype.last){\r\n    Array.prototype.last = function(){\r\n        return this[this.length - 1];\r\n    };\r\n};\r\n\r\nvar $ = jQuery;\r\n// check if element visible on screen\r\n$.fn.isVisible = function (parent) {\r\n    var $parent = parent !== 'undefined' ? $(parent) : $(window);\r\n    var windowScrollTopView = $parent.scrollTop();\r\n    var elemTop = $(this).height();\r\n    return (\r\n        elemTop >= windowScrollTopView\r\n    );\r\n};","(function ($) {\r\n    'use strict';\r\n    var os_name = AwesomeUtil.detect_os(); // detect user OS\r\n\r\n    // if MAC => addClass to fix hidden scroll\r\n    // MUST ADDS before page load to prevent flickering content\r\n    if (os_name == 'MacOS') $('html').addClass('mac');\r\n\r\n    $(function () {\r\n        var panel;\r\n        var a_ajax = new AwesomeAjax('ats');\r\n        var ats_ajax = new ATS_Ajax();\r\n\r\n        // Prevent form submit on Enter hitting\r\n        $('[data-action=\"add-model\"]').on('keypress', function (e) {\r\n            return e.keyCode != 13;\r\n        });\r\n\r\n        // Add new Employer or Team from field\r\n        $('input[data-action=\"add-model\"]').on('keyup', function (e) {\r\n            var $self = $(this);\r\n            var $spinner = $(this).parents('.panel-footer').find('.a-spinner');\r\n            var $form = $(this).parent('form');\r\n            var model = $(this).attr('data-model');\r\n            // if Enter keyup\r\n            if (e.keyCode == 13) {\r\n                $spinner.show();\r\n                a_ajax.ajax({\r\n                    action: 'ats_update_or_new_' + model,\r\n                    data: {\r\n                        data: {\r\n                            'name': $form.find('input').val()\r\n                        },\r\n                        'model': model\r\n                    },\r\n                    success_handler: function (data) {\r\n                        $self.val('');\r\n                        setTimeout(function () {\r\n                            window.location.reload();\r\n                        }, 500);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n\r\n        // settings panel\r\n        $('#action-settings').on('click', function () {\r\n            var args = {\r\n                html: '#settings-wrap',\r\n                width: '100%'\r\n            };\r\n            panel = new AwesomePanel(args);\r\n            panel.init();\r\n        });\r\n\r\n        $('[data-action=\"modal\"]').lightbox({\r\n            minWidth: 50,\r\n            minHeight: 100,\r\n            labels: {\r\n                close: '<svg viewBox=\"0 0 56 56\"><use xlink:href=\"#icon-delete\"></use></svg>'\r\n            }\r\n        });\r\n\r\n        // Init tooltips\r\n        var args = {\r\n            id: 'ats',\r\n            container: '#action-add-buttons',\r\n            content: '#action-add-buttons-tooltip',\r\n            width: 180,\r\n            data: {}\r\n        };\r\n        var tooltip = new AwesomeTooltip(args);\r\n        tooltip.init();\r\n\r\n        ats_ajax.get_templates();\r\n    });\r\n})(jQuery);","// Backbone.Stickit v0.9.2, MIT Licensed\n// Copyright (c) 2012-2015 The New York Times, CMS Group, Matthew DeLambo <delambo@gmail.com>\n\n(function (factory) {\n\n  // Set up Stickit appropriately for the environment. Start with AMD.\n  if (typeof define === 'function' && define.amd)\n    define(['underscore', 'backbone', 'exports'], factory);\n\n  // Next for Node.js or CommonJS.\n  else if (typeof exports === 'object')\n    factory(require('underscore'), require('backbone'), exports);\n\n  // Finally, as a browser global.\n  else\n    factory(_, Backbone, {});\n\n}(function (_, Backbone, Stickit) {\n\n  // Stickit Namespace\n  // --------------------------\n\n  // Export onto Backbone object\n  Backbone.Stickit = Stickit;\n\n  Stickit._handlers = [];\n\n  Stickit.addHandler = function(handlers) {\n    // Fill-in default values.\n    handlers = _.map(_.flatten([handlers]), function(handler) {\n      return _.defaults({}, handler, {\n        updateModel: true,\n        updateView: true,\n        updateMethod: 'text'\n      });\n    });\n    this._handlers = this._handlers.concat(handlers);\n  };\n\n  // Backbone.View Mixins\n  // --------------------\n\n  Stickit.ViewMixin = {\n\n    // Collection of model event bindings.\n    //   [{model,event,fn,config}, ...]\n    _modelBindings: null,\n\n    // Unbind the model and event bindings from `this._modelBindings` and\n    // `this.$el`. If the optional `model` parameter is defined, then only\n    // delete bindings for the given `model` and its corresponding view events.\n    unstickit: function(model, bindingSelector) {\n\n      // Support passing a bindings hash in place of bindingSelector.\n      if (_.isObject(bindingSelector)) {\n        _.each(bindingSelector, function(v, selector) {\n          this.unstickit(model, selector);\n        }, this);\n        return;\n      }\n\n      var models = [], destroyFns = [];\n      this._modelBindings = _.reject(this._modelBindings, function(binding) {\n        if (model && binding.model !== model) return;\n        if (bindingSelector && binding.config.selector != bindingSelector) return;\n\n        binding.model.off(binding.event, binding.fn);\n        destroyFns.push(binding.config._destroy);\n        models.push(binding.model);\n        return true;\n      });\n\n      // Trigger an event for each model that was unbound.\n      _.invoke(_.uniq(models), 'trigger', 'stickit:unstuck', this.cid);\n\n      // Call `_destroy` on a unique list of the binding callbacks.\n      _.each(_.uniq(destroyFns), function(fn) { fn.call(this); }, this);\n\n      this.$el.off('.stickit' + (model ? '.' + model.cid : ''), bindingSelector);\n    },\n\n    // Initilize Stickit bindings for the view. Subsequent binding additions\n    // can either call `stickit` with the new bindings, or add them directly\n    // with `addBinding`. Both arguments to `stickit` are optional.\n    stickit: function(optionalModel, optionalBindingsConfig) {\n      var model = optionalModel || this.model,\n          bindings = optionalBindingsConfig || _.result(this, \"bindings\") || {};\n\n      this._modelBindings || (this._modelBindings = []);\n\n      // Add bindings in bulk using `addBinding`.\n      this.addBinding(model, bindings);\n\n      // Wrap `view.remove` to unbind stickit model and dom events.\n      var remove = this.remove;\n      if (!remove.stickitWrapped) {\n        this.remove = function() {\n          var ret = this;\n          this.unstickit();\n          if (remove) ret = remove.apply(this, arguments);\n          return ret;\n        };\n      }\n      this.remove.stickitWrapped = true;\n      return this;\n    },\n\n    // Add a single Stickit binding or a hash of bindings to the model. If\n    // `optionalModel` is ommitted, will default to the view's `model` property.\n    addBinding: function(optionalModel, selector, binding) {\n      var model = optionalModel || this.model,\n          namespace = '.stickit.' + model.cid;\n\n      binding = binding || {};\n\n      // Support jQuery-style {key: val} event maps.\n      if (_.isObject(selector)) {\n        var bindings = selector;\n        _.each(bindings, function(val, key) {\n          this.addBinding(model, key, val);\n        }, this);\n        return;\n      }\n\n      // Special case the ':el' selector to use the view's this.$el.\n      var $el = selector === ':el' ? this.$el : this.$(selector);\n\n      // Clear any previous matching bindings.\n      this.unstickit(model, selector);\n\n      // Fail fast if the selector didn't match an element.\n      if (!$el.length) return;\n\n      // Allow shorthand setting of model attributes - `'selector':'observe'`.\n      if (_.isString(binding)) binding = {observe: binding};\n\n      // Handle case where `observe` is in the form of a function.\n      if (_.isFunction(binding.observe)) binding.observe = binding.observe.call(this);\n\n      // Find all matching Stickit handlers that could apply to this element\n      // and store in a config object.\n      var config = getConfiguration($el, binding);\n\n      // The attribute we're observing in our config.\n      var modelAttr = config.observe;\n\n      // Store needed properties for later.\n      config.selector = selector;\n      config.view = this;\n\n      // Create the model set options with a unique `bindId` so that we\n      // can avoid double-binding in the `change:attribute` event handler.\n      var bindId = config.bindId = _.uniqueId();\n\n      // Add a reference to the view for handlers of stickitChange events\n      var options = _.extend({stickitChange: config}, config.setOptions);\n\n      // Add a `_destroy` callback to the configuration, in case `destroy`\n      // is a named function and we need a unique function when unsticking.\n      config._destroy = function() {\n        applyViewFn.call(this, config.destroy, $el, model, config);\n      };\n\n      initializeAttributes($el, config, model, modelAttr);\n      initializeVisible($el, config, model, modelAttr);\n      initializeClasses($el, config, model, modelAttr);\n\n      if (modelAttr) {\n        // Setup one-way (input element -> model) bindings.\n        _.each(config.events, function(type) {\n          var eventName = type + namespace;\n          var listener = function(event) {\n            var val = applyViewFn.call(this, config.getVal, $el, event, config, slice.call(arguments, 1));\n\n            // Don't update the model if false is returned from the `updateModel` configuration.\n            var currentVal = evaluateBoolean(config.updateModel, val, event, config);\n            if (currentVal) setAttr(model, modelAttr, val, options, config);\n          };\n          var sel = selector === ':el'? '' : selector;\n          this.$el.on(eventName, sel, _.bind(listener, this));\n        }, this);\n\n        // Setup a `change:modelAttr` observer to keep the view element in sync.\n        // `modelAttr` may be an array of attributes or a single string value.\n        _.each(_.flatten([modelAttr]), function(attr) {\n          observeModelEvent(model, 'change:' + attr, config, function(m, val, options) {\n            var changeId = options && options.stickitChange && options.stickitChange.bindId;\n            if (changeId !== bindId) {\n              var currentVal = getAttr(model, modelAttr, config);\n              updateViewBindEl($el, config, currentVal, model);\n            }\n          });\n        });\n\n        var currentVal = getAttr(model, modelAttr, config);\n        updateViewBindEl($el, config, currentVal, model, true);\n      }\n\n      // After each binding is setup, call the `initialize` callback.\n      applyViewFn.call(this, config.initialize, $el, model, config);\n    }\n  };\n\n  _.extend(Backbone.View.prototype, Stickit.ViewMixin);\n\n  // Helpers\n  // -------\n\n  var slice = [].slice;\n\n  // Evaluates the given `path` (in object/dot-notation) relative to the given\n  // `obj`. If the path is null/undefined, then the given `obj` is returned.\n  var evaluatePath = function(obj, path) {\n    var parts = (path || '').split('.');\n    var result = _.reduce(parts, function(memo, i) { return memo[i]; }, obj);\n    return result == null ? obj : result;\n  };\n\n  // If the given `fn` is a string, then view[fn] is called, otherwise it is\n  // a function that should be executed.\n  var applyViewFn = function(fn) {\n    fn = _.isString(fn) ? evaluatePath(this, fn) : fn;\n    if (fn) return (fn).apply(this, slice.call(arguments, 1));\n  };\n\n  // Given a function, string (view function reference), or a boolean\n  // value, returns the truthy result. Any other types evaluate as false.\n  // The first argument must be `reference` and the last must be `config`, but\n  // middle arguments can be variadic.\n  var evaluateBoolean = function(reference, val, config) {\n    if (_.isBoolean(reference)) {\n      return reference;\n    } else if (_.isFunction(reference) || _.isString(reference)) {\n      var view = _.last(arguments).view;\n      return applyViewFn.apply(view, arguments);\n    }\n    return false;\n  };\n\n  // Setup a model event binding with the given function, and track the event\n  // in the view's _modelBindings.\n  var observeModelEvent = function(model, event, config, fn) {\n    var view = config.view;\n    model.on(event, fn, view);\n    view._modelBindings.push({model:model, event:event, fn:fn, config:config});\n  };\n\n  // Prepares the given `val`ue and sets it into the `model`.\n  var setAttr = function(model, attr, val, options, config) {\n    var value = {}, view = config.view;\n    if (config.onSet) {\n      val = applyViewFn.call(view, config.onSet, val, config);\n    }\n\n    if (config.set) {\n      applyViewFn.call(view, config.set, attr, val, options, config);\n    } else {\n      value[attr] = val;\n      // If `observe` is defined as an array and `onSet` returned\n      // an array, then map attributes to their values.\n      if (_.isArray(attr) && _.isArray(val)) {\n        value = _.reduce(attr, function(memo, attribute, index) {\n          memo[attribute] = _.has(val, index) ? val[index] : null;\n          return memo;\n        }, {});\n      }\n      model.set(value, options);\n    }\n  };\n\n  // Returns the given `attr`'s value from the `model`, escaping and\n  // formatting if necessary. If `attr` is an array, then an array of\n  // respective values will be returned.\n  var getAttr = function(model, attr, config) {\n    var view = config.view;\n    var retrieveVal = function(field) {\n      return model[config.escape ? 'escape' : 'get'](field);\n    };\n    var sanitizeVal = function(val) {\n      return val == null ? '' : val;\n    };\n    var val = _.isArray(attr) ? _.map(attr, retrieveVal) : retrieveVal(attr);\n    if (config.onGet) val = applyViewFn.call(view, config.onGet, val, config);\n    return _.isArray(val) ? _.map(val, sanitizeVal) : sanitizeVal(val);\n  };\n\n  // Find handlers in `Backbone.Stickit._handlers` with selectors that match\n  // `$el` and generate a configuration by mixing them in the order that they\n  // were found with the given `binding`.\n  var getConfiguration = Stickit.getConfiguration = function($el, binding) {\n    var handlers = [{\n      updateModel: false,\n      updateMethod: 'text',\n      update: function($el, val, m, opts) { if ($el[opts.updateMethod]) $el[opts.updateMethod](val); },\n      getVal: function($el, e, opts) { return $el[opts.updateMethod](); }\n    }];\n    handlers = handlers.concat(_.filter(Stickit._handlers, function(handler) {\n      return $el.is(handler.selector);\n    }));\n    handlers.push(binding);\n\n    // Merge handlers into a single config object. Last props in wins.\n    var config = _.extend.apply(_, handlers);\n\n    // `updateView` is defaulted to false for configutrations with\n    // `visible`; otherwise, `updateView` is defaulted to true.\n    if (!_.has(config, 'updateView')) config.updateView = !config.visible;\n    return config;\n  };\n\n  // Setup the attributes configuration - a list that maps an attribute or\n  // property `name`, to an `observe`d model attribute, using an optional\n  // `onGet` formatter.\n  //\n  //     attributes: [{\n  //       name: 'attributeOrPropertyName',\n  //       observe: 'modelAttrName'\n  //       onGet: function(modelAttrVal, modelAttrName) { ... }\n  //     }, ...]\n  //\n  var initializeAttributes = function($el, config, model, modelAttr) {\n    var props = ['autofocus', 'autoplay', 'async', 'checked', 'controls',\n      'defer', 'disabled', 'hidden', 'indeterminate', 'loop', 'multiple',\n      'open', 'readonly', 'required', 'scoped', 'selected'];\n\n    var view = config.view;\n\n    _.each(config.attributes || [], function(attrConfig) {\n      attrConfig = _.clone(attrConfig);\n      attrConfig.view = view;\n\n      var lastClass = '';\n      var observed = attrConfig.observe || (attrConfig.observe = modelAttr);\n      var updateAttr = function() {\n        var updateType = _.contains(props, attrConfig.name) ? 'prop' : 'attr',\n            val = getAttr(model, observed, attrConfig);\n\n        // If it is a class then we need to remove the last value and add the new.\n        if (attrConfig.name === 'class') {\n          $el.removeClass(lastClass).addClass(val);\n          lastClass = val;\n        } else {\n          $el[updateType](attrConfig.name, val);\n        }\n      };\n\n      _.each(_.flatten([observed]), function(attr) {\n        observeModelEvent(model, 'change:' + attr, config, updateAttr);\n      });\n\n      // Initialize the matched element's state.\n      updateAttr();\n    });\n  };\n\n  var initializeClasses = function($el, config, model, modelAttr) {\n    _.each(config.classes || [], function(classConfig, name) {\n      if (_.isString(classConfig)) classConfig = {observe: classConfig};\n      classConfig.view = config.view;\n\n      var observed = classConfig.observe;\n      var updateClass = function() {\n        var val = getAttr(model, observed, classConfig);\n        $el.toggleClass(name, !!val);\n      };\n\n      _.each(_.flatten([observed]), function(attr) {\n        observeModelEvent(model, 'change:' + attr, config, updateClass);\n      });\n      updateClass();\n    });\n  };\n\n  // If `visible` is configured, then the view element will be shown/hidden\n  // based on the truthiness of the modelattr's value or the result of the\n  // given callback. If a `visibleFn` is also supplied, then that callback\n  // will be executed to manually handle showing/hiding the view element.\n  //\n  //     observe: 'isRight',\n  //     visible: true, // or function(val, options) {}\n  //     visibleFn: function($el, isVisible, options) {} // optional handler\n  //\n  var initializeVisible = function($el, config, model, modelAttr) {\n    if (config.visible == null) return;\n    var view = config.view;\n\n    var visibleCb = function() {\n      var visible = config.visible,\n          visibleFn = config.visibleFn,\n          val = getAttr(model, modelAttr, config),\n          isVisible = !!val;\n\n      // If `visible` is a function then it should return a boolean result to show/hide.\n      if (_.isFunction(visible) || _.isString(visible)) {\n        isVisible = !!applyViewFn.call(view, visible, val, config);\n      }\n\n      // Either use the custom `visibleFn`, if provided, or execute the standard show/hide.\n      if (visibleFn) {\n        applyViewFn.call(view, visibleFn, $el, isVisible, config);\n      } else {\n        $el.toggle(isVisible);\n      }\n    };\n\n    _.each(_.flatten([modelAttr]), function(attr) {\n      observeModelEvent(model, 'change:' + attr, config, visibleCb);\n    });\n\n    visibleCb();\n  };\n\n  // Update the value of `$el` using the given configuration and trigger the\n  // `afterUpdate` callback. This action may be blocked by `config.updateView`.\n  //\n  //     update: function($el, val, model, options) {},  // handler for updating\n  //     updateView: true, // defaults to true\n  //     afterUpdate: function($el, val, options) {} // optional callback\n  //\n  var updateViewBindEl = function($el, config, val, model, isInitializing) {\n    var view = config.view;\n    if (!evaluateBoolean(config.updateView, val, config)) return;\n    applyViewFn.call(view, config.update, $el, val, model, config);\n    if (!isInitializing) applyViewFn.call(view, config.afterUpdate, $el, val, config);\n  };\n\n  // Default Handlers\n  // ----------------\n\n  Stickit.addHandler([{\n    selector: '[contenteditable]',\n    updateMethod: 'html',\n    events: ['input', 'change']\n  }, {\n    selector: 'input',\n    events: ['propertychange', 'input', 'change'],\n    update: function($el, val) { $el.val(val); },\n    getVal: function($el) {\n      return $el.val();\n    }\n  }, {\n    selector: 'textarea',\n    events: ['propertychange', 'input', 'change'],\n    update: function($el, val) { $el.val(val); },\n    getVal: function($el) { return $el.val(); }\n  }, {\n    selector: 'input[type=\"radio\"]',\n    events: ['change'],\n    update: function($el, val) {\n      $el.filter('[value=\"'+val+'\"]').prop('checked', true);\n    },\n    getVal: function($el) {\n      return $el.filter(':checked').val();\n    }\n  }, {\n    selector: 'input[type=\"checkbox\"]',\n    events: ['change'],\n    update: function($el, val, model, options) {\n      if ($el.length > 1) {\n        // There are multiple checkboxes so we need to go through them and check\n        // any that have value attributes that match what's in the array of `val`s.\n        val || (val = []);\n        $el.each(function(i, el) {\n          var checkbox = Backbone.$(el);\n          var checkboxVal = checkbox.val();\n          var checked = _.some(val, function(item) { return ''+item === checkboxVal; });\n          checkbox.prop('checked', checked);\n        });\n      } else {\n        var checked = _.isBoolean(val) ? val : ''+val === $el.val();\n        $el.prop('checked', checked);\n      }\n    },\n    getVal: function($el) {\n      var val;\n      if ($el.length > 1) {\n        val = _.reduce($el, function(memo, el) {\n          var checkbox = Backbone.$(el);\n          if (checkbox.prop('checked')) memo.push(checkbox.val());\n          return memo;\n        }, []);\n      } else {\n        val = $el.prop('checked');\n        // If the checkbox has a value attribute defined, then\n        // use that value. Most browsers use \"on\" as a default.\n        var boxval = $el.val();\n        if (boxval !== 'on' && boxval != null) {\n          val = val ? $el.val() : null;\n        }\n      }\n      return val;\n    }\n  }, {\n    selector: 'select',\n    events: ['change'],\n    update: function($el, val, model, options) {\n      var optList,\n        selectConfig = options.selectOptions,\n        list = selectConfig && selectConfig.collection || undefined,\n        isMultiple = $el.prop('multiple');\n\n      // If there are no `selectOptions` then we assume that the `<select>`\n      // is pre-rendered and that we need to generate the collection.\n      if (!selectConfig) {\n        selectConfig = {};\n        var getList = function($el) {\n          return $el.map(function(index, option) {\n            // Retrieve the text and value of the option, preferring \"stickit-bind-val\"\n            // data attribute over value property.\n            var dataVal = Backbone.$(option).data('stickit-bind-val');\n            return {\n              value: dataVal !== undefined ? dataVal : option.value,\n              label: option.text\n            };\n          }).get();\n        };\n        if ($el.find('optgroup').length) {\n          list = {opt_labels:[]};\n          // Search for options without optgroup\n          if ($el.find('> option').length) {\n            list.opt_labels.push(undefined);\n            _.each($el.find('> option'), function(el) {\n              list[undefined] = getList(Backbone.$(el));\n            });\n          }\n          _.each($el.find('optgroup'), function(el) {\n            var label = Backbone.$(el).attr('label');\n            list.opt_labels.push(label);\n            list[label] = getList(Backbone.$(el).find('option'));\n          });\n        } else {\n          list = getList($el.find('option'));\n        }\n      }\n\n      // Fill in default label and path values.\n      selectConfig.valuePath = selectConfig.valuePath || 'value';\n      selectConfig.labelPath = selectConfig.labelPath || 'label';\n      selectConfig.disabledPath = selectConfig.disabledPath || 'disabled';\n\n      var addSelectOptions = function(optList, $el, fieldVal) {\n        _.each(optList, function(obj) {\n          var option = Backbone.$('<option/>'), optionVal = obj;\n\n          var fillOption = function(text, val, disabled) {\n            option.text(text);\n            optionVal = val;\n            // Save the option value as data so that we can reference it later.\n            option.data('stickit-bind-val', optionVal);\n            if (!_.isArray(optionVal) && !_.isObject(optionVal)) option.val(optionVal);\n\n            if (disabled === true) option.prop('disabled', 'disabled');\n          };\n\n          var text, val, disabled;\n          if (obj === '__default__') {\n            text = fieldVal.label,\n            val = fieldVal.value,\n            disabled = fieldVal.disabled;\n          } else {\n            text = evaluatePath(obj, selectConfig.labelPath),\n            val = evaluatePath(obj, selectConfig.valuePath),\n            disabled = evaluatePath(obj, selectConfig.disabledPath);\n          }\n          fillOption(text, val, disabled);\n\n          // Determine if this option is selected.\n          var isSelected = function() {\n            if (!isMultiple && optionVal != null && fieldVal != null && optionVal === fieldVal) {\n              return true;\n            } else if (_.isObject(fieldVal) && _.isEqual(optionVal, fieldVal)) {\n              return true;\n            }\n            return false;\n          };\n\n          if (isSelected()) {\n            option.prop('selected', true);\n          } else if (isMultiple && _.isArray(fieldVal)) {\n            _.each(fieldVal, function(val) {\n              if (_.isObject(val)) val = evaluatePath(val, selectConfig.valuePath);\n              if (val === optionVal || (_.isObject(val) && _.isEqual(optionVal, val)))\n                option.prop('selected', true);\n            });\n          }\n\n          $el.append(option);\n        });\n      };\n\n      $el.find('*').remove();\n\n      // The `list` configuration is a function that returns the options list or a string\n      // which represents the path to the list relative to `window` or the view/`this`.\n      if (_.isString(list)) {\n        var context = window;\n        if (list.indexOf('this.') === 0) context = this;\n        list = list.replace(/^[a-z]*\\.(.+)$/, '$1');\n        optList = evaluatePath(context, list);\n      } else if (_.isFunction(list)) {\n        optList = applyViewFn.call(this, list, $el, options);\n      } else {\n        optList = list;\n      }\n\n      // Support Backbone.Collection and deserialize.\n      if (optList instanceof Backbone.Collection) {\n        var collection = optList;\n        var refreshSelectOptions = function() {\n          var currentVal = getAttr(model, options.observe, options);\n          applyViewFn.call(this, options.update, $el, currentVal, model, options);\n        };\n        // We need to call this function after unstickit and after an update so we don't end up\n        // with multiple listeners doing the same thing\n        var removeCollectionListeners = function() {\n          collection.off('add remove reset sort', refreshSelectOptions);\n        };\n        var removeAllListeners = function() {\n          removeCollectionListeners();\n          collection.off('stickit:selectRefresh');\n          collection.off('stickit:selectRefreshForView');\n          model.off('stickit:selectRefresh');\n        };\n        collection.trigger('stickit:selectRefreshForView', this.cid);\n        // Compare the view cid on the event to this.cid to ensure we don't\n        // remove events from the collection that are tied to other views.\n        collection.once('stickit:selectRefreshForView', function(viewCid) {\n          if(this.cid == viewCid){\n            // Remove previously set event listeners by triggering a custom event\n            collection.trigger('stickit:selectRefresh');\n          }\n        }, this);\n        collection.once('stickit:selectRefresh', removeCollectionListeners, this);\n\n        // Listen to the collection and trigger an update of the select options\n        collection.on('add remove reset sort', refreshSelectOptions, this);\n\n        // Remove the previous model event listener\n        model.trigger('stickit:selectRefresh');\n        model.once('stickit:selectRefresh', function() {\n          model.off('stickit:unstuck', removeAllListeners);\n        });\n        // Remove collection event listeners once this binding is unstuck\n        model.once('stickit:unstuck', removeAllListeners, this);\n        optList = optList.toJSON();\n      }\n\n      if (selectConfig.defaultOption) {\n        var option = _.isFunction(selectConfig.defaultOption) ?\n          selectConfig.defaultOption.call(this, $el, options) :\n          selectConfig.defaultOption;\n        addSelectOptions([\"__default__\"], $el, option);\n      }\n\n      if (_.isArray(optList)) {\n        addSelectOptions(optList, $el, val);\n      } else if (optList.opt_labels) {\n        // To define a select with optgroups, format selectOptions.collection as an object\n        // with an 'opt_labels' property, as in the following:\n        //\n        //     {\n        //       'opt_labels': ['Looney Tunes', 'Three Stooges'],\n        //       'Looney Tunes': [{id: 1, name: 'Bugs Bunny'}, {id: 2, name: 'Donald Duck'}],\n        //       'Three Stooges': [{id: 3, name : 'moe'}, {id: 4, name : 'larry'}, {id: 5, name : 'curly'}]\n        //     }\n        //\n        _.each(optList.opt_labels, function(label) {\n          var $group = Backbone.$('<optgroup/>').attr('label', label);\n          addSelectOptions(optList[label], $group, val);\n          $el.append($group);\n        });\n        // With no 'opt_labels' parameter, the object is assumed to be a simple value-label map.\n        // Pass a selectOptions.comparator to override the default order of alphabetical by label.\n      } else {\n        var opts = [], opt;\n        for (var i in optList) {\n          opt = {};\n          opt[selectConfig.valuePath] = i;\n          opt[selectConfig.labelPath] = optList[i];\n          opts.push(opt);\n        }\n        opts = _.sortBy(opts, selectConfig.comparator || selectConfig.labelPath);\n        addSelectOptions(opts, $el, val);\n      }\n    },\n    getVal: function($el) {\n      var selected = $el.find('option:selected');\n\n      if ($el.prop('multiple')) {\n        return _.map(selected, function(el) {\n          return Backbone.$(el).data('stickit-bind-val');\n        });\n      } else {\n        return selected.data('stickit-bind-val');\n      }\n    }\n  }]);\n\n  return Stickit;\n\n}));\n","/**\n * Backbone-Nested 2.0.3 - An extension of Backbone.js that keeps track of nested attributes\n *\n * http://afeld.github.com/backbone-nested/\n *\n * Copyright (c) 2011-2012 Aidan Feldman\n * MIT Licensed (LICENSE)\n */\n/*global define, require, module */\n(function(root, factory){\n  if (typeof exports !== 'undefined') {\n      // Define as CommonJS export:\n      module.exports = factory(require(\"jquery\"), require(\"underscore\"), require(\"backbone\"));\n  } else if (typeof define === 'function' && define.amd) {\n      // Define as AMD:\n      define([\"jquery\", \"underscore\", \"backbone\"], factory);\n  } else {\n      // Just run it:\n      factory(root.$, root._, root.Backbone);\n  }\n}(this, function($, _, Backbone) {\n  'use strict';\n\n  var _delayedTriggers = [],\n    nestedChanges;\n\n  Backbone.NestedModel = Backbone.Model.extend({\n\n    get: function(attrStrOrPath){\n      return Backbone.NestedModel.walkThenGet(this.attributes, attrStrOrPath);\n    },\n\n    previous: function(attrStrOrPath){\n      return Backbone.NestedModel.walkThenGet(this._previousAttributes, attrStrOrPath);\n    },\n\n    has: function(attr){\n      // for some reason this is not how Backbone.Model is implemented - it accesses the attributes object directly\n      var result = this.get(attr);\n      return !(result === null || _.isUndefined(result));\n    },\n\n    set: function(key, value, opts){\n      var newAttrs = Backbone.NestedModel.deepClone(this.attributes),\n        attrPath,\n        unsetObj,\n        validated;\n\n      if (_.isString(key)){\n        // Backbone 0.9.0+ syntax: `model.set(key, val)` - convert the key to an attribute path\n        attrPath = Backbone.NestedModel.attrPath(key);\n      } else if (_.isArray(key)){\n        // attribute path\n        attrPath = key;\n      }\n\n      if (attrPath){\n        opts = opts || {};\n        this._setAttr(newAttrs, attrPath, value, opts);\n      } else { // it's an Object\n        opts = value || {};\n        var attrs = key;\n        for (var _attrStr in attrs) {\n          if (attrs.hasOwnProperty(_attrStr)) {\n            this._setAttr(newAttrs,\n                          Backbone.NestedModel.attrPath(_attrStr),\n                          opts.unset ? void 0 : attrs[_attrStr],\n                          opts);\n          }\n        }\n      }\n\n      nestedChanges = Backbone.NestedModel.__super__.changedAttributes.call(this);\n\n      if (opts.unset && attrPath && attrPath.length === 1){ // assume it is a singular attribute being unset\n        // unsetting top-level attribute\n        unsetObj = {};\n        unsetObj[key] = void 0;\n        nestedChanges = _.omit(nestedChanges, _.keys(unsetObj));\n        validated = Backbone.NestedModel.__super__.set.call(this, unsetObj, opts);\n      } else {\n        unsetObj = newAttrs;\n\n        // normal set(), or an unset of nested attribute\n        if (opts.unset && attrPath){\n          // make sure Backbone.Model won't unset the top-level attribute\n          opts = _.extend({}, opts);\n          delete opts.unset;\n        } else if (opts.unset && _.isObject(key)) {\n          unsetObj = key;\n        }\n        nestedChanges = _.omit(nestedChanges, _.keys(unsetObj));\n        validated = Backbone.NestedModel.__super__.set.call(this, unsetObj, opts);\n      }\n\n\n      if (!validated){\n        // reset changed attributes\n        this.changed = {};\n        nestedChanges = {};\n        return false;\n      }\n\n\n      this._runDelayedTriggers();\n      return this;\n    },\n\n    unset: function(attr, options) {\n      return this.set(attr, void 0, _.extend({}, options, {unset: true}));\n    },\n\n    clear: function(options) {\n      nestedChanges = {};\n\n      // Mostly taken from Backbone.Model.set, modified to work for NestedModel.\n      options = options || {};\n      // clone attributes so validate method can't mutate it from underneath us.\n      var attrs = _.clone(this.attributes);\n      if (!options.silent && this.validate && !this.validate(attrs, options)) {\n        return false; // Should maybe return this instead?\n      }\n\n      var changed = this.changed = {};\n      var model = this;\n\n      var setChanged = function(obj, prefix, options) {\n        // obj will be an Array or an Object\n        _.each(obj, function(val, attr){\n          var changedPath = prefix;\n          if (_.isArray(obj)){\n            // assume there is a prefix\n            changedPath += '[' + attr + ']';\n          } else if (prefix){\n            changedPath += '.' + attr;\n          } else {\n            changedPath = attr;\n          }\n\n          val = obj[attr];\n          if (_.isObject(val)) { // clear child attrs\n            setChanged(val, changedPath, options);\n          }\n          if (!options.silent) model._delayedChange(changedPath, null, options);\n          changed[changedPath] = null;\n        });\n      };\n      setChanged(this.attributes, '', options);\n\n      this.attributes = {};\n\n      // Fire the `\"change\"` events.\n      if (!options.silent) this._delayedTrigger('change');\n\n      this._runDelayedTriggers();\n      return this;\n    },\n\n    add: function(attrStr, value, opts){\n      var current = this.get(attrStr);\n      if (!_.isArray(current)) throw new Error('current value is not an array');\n      return this.set(attrStr + '[' + current.length + ']', value, opts);\n    },\n\n    remove: function(attrStr, opts){\n      opts = opts || {};\n\n      var attrPath = Backbone.NestedModel.attrPath(attrStr),\n        aryPath = _.initial(attrPath),\n        val = this.get(aryPath),\n        i = _.last(attrPath);\n\n      if (!_.isArray(val)){\n        throw new Error(\"remove() must be called on a nested array\");\n      }\n\n      // only trigger if an element is actually being removed\n      var trigger = !opts.silent && (val.length >= i + 1),\n        oldEl = val[i];\n\n      // remove the element from the array\n      val.splice(i, 1);\n      opts.silent = true; // Triggers should only be fired in trigger section below\n      this.set(aryPath, val, opts);\n\n      if (trigger){\n        attrStr = Backbone.NestedModel.createAttrStr(aryPath);\n        this.trigger('remove:' + attrStr, this, oldEl);\n        for (var aryCount = aryPath.length; aryCount >= 1; aryCount--) {\n          attrStr = Backbone.NestedModel.createAttrStr(_.first(aryPath, aryCount));\n          this.trigger('change:' + attrStr, this, oldEl);\n        }\n        this.trigger('change', this, oldEl);\n      }\n\n      return this;\n    },\n\n    changedAttributes: function(diff) {\n      var backboneChanged = Backbone.NestedModel.__super__.changedAttributes.call(this, diff);\n      if (_.isObject(backboneChanged)) {\n        return _.extend({}, nestedChanges, backboneChanged);\n      }\n      return false;\n    },\n\n    toJSON: function(){\n      return Backbone.NestedModel.deepClone(this.attributes);\n    },\n\n\n    // private\n    _delayedTrigger: function(/* the trigger args */){\n      _delayedTriggers.push(arguments);\n    },\n\n    _delayedChange: function(attrStr, newVal, options){\n      this._delayedTrigger('change:' + attrStr, this, newVal, options);\n\n      // Check if `change` even *exists*, as it won't when the model is\n      // freshly created.\n      if (!this.changed) {\n        this.changed = {};\n      }\n\n      this.changed[attrStr] = newVal;\n    },\n\n    _runDelayedTriggers: function(){\n      while (_delayedTriggers.length > 0){\n        this.trigger.apply(this, _delayedTriggers.shift());\n      }\n    },\n\n    // note: modifies `newAttrs`\n    _setAttr: function(newAttrs, attrPath, newValue, opts){\n      opts = opts || {};\n\n      var fullPathLength = attrPath.length;\n      var model = this;\n\n      Backbone.NestedModel.walkPath(newAttrs, attrPath, function(val, path, next){\n        var attr = _.last(path);\n        var attrStr = Backbone.NestedModel.createAttrStr(path);\n\n        // See if this is a new value being set\n        var isNewValue = !_.isEqual(val[attr], newValue);\n\n        if (path.length === fullPathLength){\n          // reached the attribute to be set\n\n          if (opts.unset){\n            // unset the value\n            delete val[attr];\n\n            // Trigger Remove Event if array being set to null\n            if (_.isArray(val)){\n              var parentPath = Backbone.NestedModel.createAttrStr(_.initial(attrPath));\n              model._delayedTrigger('remove:' + parentPath, model, val[attr]);\n            }\n          } else {\n            // Set the new value\n            val[attr] = newValue;\n          }\n\n          // Trigger Change Event if new values are being set\n          if (!opts.silent && _.isObject(newValue) && isNewValue){\n            var visited = [];\n            var checkChanges = function(obj, prefix) {\n              // Don't choke on circular references\n              if(_.indexOf(visited, obj) > -1) {\n                return;\n              } else {\n                visited.push(obj);\n              }\n\n              var nestedAttr, nestedVal;\n              for (var a in obj){\n                if (obj.hasOwnProperty(a)) {\n                  nestedAttr = prefix + '.' + a;\n                  nestedVal = obj[a];\n                  if (!_.isEqual(model.get(nestedAttr), nestedVal)) {\n                    model._delayedChange(nestedAttr, nestedVal, opts);\n                  }\n                  if (_.isObject(nestedVal)) {\n                    checkChanges(nestedVal, nestedAttr);\n                  }\n                }\n              }\n            };\n            checkChanges(newValue, attrStr);\n\n          }\n\n\n        } else if (!val[attr]){\n          if (_.isNumber(next)){\n            val[attr] = [];\n          } else {\n            val[attr] = {};\n          }\n        }\n\n        if (!opts.silent){\n          // let the superclass handle change events for top-level attributes\n          if (path.length > 1 && isNewValue){\n            model._delayedChange(attrStr, val[attr], opts);\n          }\n\n          if (_.isArray(val[attr])){\n            model._delayedTrigger('add:' + attrStr, model, val[attr]);\n          }\n        }\n      });\n    }\n\n  }, {\n    // class methods\n\n    attrPath: function(attrStrOrPath){\n      var path;\n\n      if (_.isString(attrStrOrPath)){\n        // TODO this parsing can probably be more efficient\n        path = (attrStrOrPath === '') ? [''] : attrStrOrPath.match(/[^\\.\\[\\]]+/g);\n        path = _.map(path, function(val){\n          // convert array accessors to numbers\n          return val.match(/^\\d+$/) ? parseInt(val, 10) : val;\n        });\n      } else {\n        path = attrStrOrPath;\n      }\n\n      return path;\n    },\n\n    createAttrStr: function(attrPath){\n      var attrStr = attrPath[0];\n      _.each(_.rest(attrPath), function(attr){\n        attrStr += _.isNumber(attr) ? ('[' + attr + ']') : ('.' + attr);\n      });\n\n      return attrStr;\n    },\n\n    deepClone: function(obj){\n      return $.extend(true, {}, obj);\n    },\n\n    walkPath: function(obj, attrPath, callback, scope){\n      var val = obj,\n        childAttr;\n\n      // walk through the child attributes\n      for (var i = 0; i < attrPath.length; i++){\n        callback.call(scope || this, val, attrPath.slice(0, i + 1), attrPath[i + 1]);\n\n        childAttr = attrPath[i];\n        val = val[childAttr];\n        if (!val) break; // at the leaf\n      }\n    },\n\n    walkThenGet: function(attributes, attrStrOrPath){\n      var attrPath = Backbone.NestedModel.attrPath(attrStrOrPath),\n        result;\n\n      Backbone.NestedModel.walkPath(attributes, attrPath, function(val, path){\n        var attr = _.last(path);\n        if (path.length === attrPath.length){\n          // attribute found\n          result = val[attr];\n        }\n      });\n\n      return result;\n    }\n\n  });\n\n  return Backbone;\n}));\n","/*! formstone v0.7.0 [core.js] 2015-07-04 | MIT License | formstone.it */\nvar Formstone=this.Formstone=function(a,b,c){\"use strict\";function d(a){l.Plugins[a].initialized||(l.Plugins[a].methods._setup.call(c),l.Plugins[a].initialized=!0)}function e(a,b,c,d){var e,f={raw:{}};d=d||{};for(e in d)d.hasOwnProperty(e)&&(\"classes\"===a?(f.raw[d[e]]=b+\"-\"+d[e],f[d[e]]=\".\"+b+\"-\"+d[e]):(f.raw[e]=d[e],f[e]=d[e]+\".\"+b));for(e in c)c.hasOwnProperty(e)&&(\"classes\"===a?(f.raw[e]=c[e].replace(/{ns}/g,b),f[e]=c[e].replace(/{ns}/g,\".\"+b)):(f.raw[e]=c[e].replace(/.{ns}/g,\"\"),f[e]=c[e].replace(/{ns}/g,b)));return f}function f(){var a,b={transition:\"transitionend\",MozTransition:\"transitionend\",OTransition:\"otransitionend\",WebkitTransition:\"webkitTransitionEnd\"},d=[\"transition\",\"-webkit-transition\"],e={transform:\"transform\",MozTransform:\"-moz-transform\",OTransform:\"-o-transform\",msTransform:\"-ms-transform\",webkitTransform:\"-webkit-transform\"},f=\"transitionend\",g=\"\",h=\"\",i=c.createElement(\"div\");for(a in b)if(b.hasOwnProperty(a)&&a in i.style){f=b[a],l.support.transition=!0;break}o.transitionEnd=f+\".{ns}\";for(a in d)if(d.hasOwnProperty(a)&&d[a]in i.style){g=d[a];break}l.transition=g;for(a in e)if(e.hasOwnProperty(a)&&e[a]in i.style){l.support.transform=!0,h=e[a];break}l.transform=h}function g(){l.windowWidth=l.$window.width(),l.windowHeight=l.$window.height(),p=k.startTimer(p,q,h)}function h(){for(var a in l.ResizeHandlers)l.ResizeHandlers.hasOwnProperty(a)&&l.ResizeHandlers[a].callback.call(b,l.windowWidth,l.windowHeight)}function i(a,b){return parseInt(a.priority)-parseInt(b.priority)}var j=function(){this.Version=\"0.7.0\",this.Plugins={},this.DontConflict=!1,this.Conflicts={fn:{}},this.ResizeHandlers=[],this.window=b,this.$window=a(b),this.document=c,this.$document=a(c),this.$body=null,this.windowWidth=0,this.windowHeight=0,this.userAgent=b.navigator.userAgent||b.navigator.vendor||b.opera,this.isFirefox=/Firefox/i.test(this.userAgent),this.isChrome=/Chrome/i.test(this.userAgent),this.isSafari=/Safari/i.test(this.userAgent)&&!this.isChrome,this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(this.userAgent),this.isFirefoxMobile=this.isFirefox&&this.isMobile,this.transform=null,this.transition=null,this.support={file:!!(b.File&&b.FileList&&b.FileReader),history:!!(b.history&&b.history.pushState&&b.history.replaceState),matchMedia:!(!b.matchMedia&&!b.msMatchMedia),raf:!(!b.requestAnimationFrame||!b.cancelAnimationFrame),touch:!!(\"ontouchstart\"in b||b.DocumentTouch&&c instanceof b.DocumentTouch),transition:!1,transform:!1}},k={killEvent:function(a,b){try{a.preventDefault(),a.stopPropagation(),b&&a.stopImmediatePropagation()}catch(c){}},startTimer:function(a,b,c,d){return k.clearTimer(a),d?setInterval(c,b):setTimeout(c,b)},clearTimer:function(a,b){a&&(b?clearInterval(a):clearTimeout(a),a=null)},sortAsc:function(a,b){return parseInt(b)-parseInt(a)},sortDesc:function(a,b){return parseInt(b)-parseInt(a)}},l=new j,m=a.Deferred(),n={base:\"{ns}\",element:\"{ns}-element\"},o={namespace:\".{ns}\",blur:\"blur.{ns}\",change:\"change.{ns}\",click:\"click.{ns}\",dblClick:\"dblclick.{ns}\",drag:\"drag.{ns}\",dragEnd:\"dragend.{ns}\",dragEnter:\"dragenter.{ns}\",dragLeave:\"dragleave.{ns}\",dragOver:\"dragover.{ns}\",dragStart:\"dragstart.{ns}\",drop:\"drop.{ns}\",error:\"error.{ns}\",focus:\"focus.{ns}\",focusIn:\"focusin.{ns}\",focusOut:\"focusout.{ns}\",input:\"input.{ns}\",keyDown:\"keydown.{ns}\",keyPress:\"keypress.{ns}\",keyUp:\"keyup.{ns}\",load:\"load.{ns}\",mouseDown:\"mousedown.{ns}\",mouseEnter:\"mouseenter.{ns}\",mouseLeave:\"mouseleave.{ns}\",mouseMove:\"mousemove.{ns}\",mouseOut:\"mouseout.{ns}\",mouseOver:\"mouseover.{ns}\",mouseUp:\"mouseup.{ns}\",resize:\"resize.{ns}\",scroll:\"scroll.{ns}\",select:\"select.{ns}\",touchCancel:\"touchcancel.{ns}\",touchEnd:\"touchend.{ns}\",touchLeave:\"touchleave.{ns}\",touchMove:\"touchmove.{ns}\",touchStart:\"touchstart.{ns}\"};j.prototype.NoConflict=function(){l.DontConflict=!0;for(var b in l.Plugins)l.Plugins.hasOwnProperty(b)&&(a[b]=l.Conflicts[b],a.fn[b]=l.Conflicts.fn[b])},j.prototype.Plugin=function(c,f){return l.Plugins[c]=function(c,d){function f(b){var e=\"object\"===a.type(b);b=a.extend(!0,{},d.defaults||{},e?b:{});for(var f=this,g=0,i=f.length;i>g;g++){var j=f.eq(g);if(!h(j)){var k=\"__\"+d.guid++,l=d.classes.raw.base+k,m=j.data(c+\"-options\"),n=a.extend(!0,{$el:j,guid:k,rawGuid:l,dotGuid:\".\"+l},b,\"object\"===a.type(m)?m:{});j.addClass(d.classes.raw.element).data(s,n),d.methods._construct.apply(j,[n].concat(Array.prototype.slice.call(arguments,e?1:0)))}}return f}function g(){d.functions.iterate.apply(this,[d.methods._destruct].concat(Array.prototype.slice.call(arguments,1))),this.removeClass(d.classes.raw.element).removeData(s)}function h(a){return a.data(s)}function j(b){if(this instanceof a){var c=d.methods[b];return\"object\"!==a.type(b)&&b?c&&0!==b.indexOf(\"_\")?d.functions.iterate.apply(this,[c].concat(Array.prototype.slice.call(arguments,1))):this:f.apply(this,arguments)}}function m(c){var e=d.utilities[c]||d.utilities._initialize||!1;return e?e.apply(b,Array.prototype.slice.call(arguments,\"object\"===a.type(c)?0:1)):void 0}function p(b){d.defaults=a.extend(!0,d.defaults,b||{})}function q(b){for(var c=this,d=0,e=c.length;e>d;d++){var f=c.eq(d),g=h(f)||{};\"undefined\"!==a.type(g.$el)&&b.apply(f,[g].concat(Array.prototype.slice.call(arguments,1)))}return c}var r=\"fs-\"+c,s=\"fs\"+c.replace(/(^|\\s)([a-z])/g,function(a,b,c){return b+c.toUpperCase()});return d.initialized=!1,d.priority=d.priority||10,d.classes=e(\"classes\",r,n,d.classes),d.events=e(\"events\",c,o,d.events),d.functions=a.extend({getData:h,iterate:q},k,d.functions),d.methods=a.extend(!0,{_setup:a.noop,_construct:a.noop,_destruct:a.noop,_resize:!1,destroy:g},d.methods),d.utilities=a.extend(!0,{_initialize:!1,_delegate:!1,defaults:p},d.utilities),d.widget&&(l.Conflicts.fn[c]=a.fn[c],a.fn[s]=j,l.DontConflict||(a.fn[c]=a.fn[s])),l.Conflicts[c]=a[c],a[s]=d.utilities._delegate||m,l.DontConflict||(a[c]=a[s]),d.namespace=c,d.namespaceClean=s,d.guid=0,d.methods._resize&&(l.ResizeHandlers.push({namespace:c,priority:d.priority,callback:d.methods._resize}),l.ResizeHandlers.sort(i)),d}(c,f),m.then(function(){d(c)}),l.Plugins[c]};var p=null,q=20;return l.$window.on(\"resize.fs\",g),g(),a(function(){l.$body=a(\"body\"),m.resolve()}),o.clickTouchStart=o.click+\" \"+o.touchStart,f(),l}(jQuery,this,document);","/*! formstone v0.7.0 [touch.js] 2015-07-04 | MIT License | formstone.it */\n!function(a,b){\"use strict\";function c(a){a.touches=[],a.touching=!1,this.on(r.dragStart,s.killEvent),a.tap?(a.pan=!1,a.scale=!1,a.swipe=!1,b.support.touch?this.on([r.touchStart,r.pointerDown].join(\" \"),a,f):this.on(r.click,a,k)):(a.pan||a.swipe||a.scale)&&(a.tap=!1,a.swipe&&(a.pan=!0),a.scale&&(a.axis=!1),a.axis?(a.axisX=\"x\"===a.axis,a.axisY=\"y\"===a.axis):o(this,\"none\"),this.on([r.touchStart,r.pointerDown].join(\" \"),a,e),a.pan&&!b.support.touch&&this.on(r.mouseDown,a,f))}function d(){this.off(r.namespace),o(this,\"\")}function e(a){a.preventManipulation&&a.preventManipulation();var b=a.data,c=a.originalEvent;if(c.type.match(/(up|end)$/i))return void j(a);if(c.pointerId){var d=!1;for(var e in b.touches)b.touches[e].id===c.pointerId&&(d=!0,b.touches[e].pageX=c.clientX,b.touches[e].pageY=c.clientY);d||b.touches.push({id:c.pointerId,pageX:c.clientX,pageY:c.clientY})}else b.touches=c.touches;c.type.match(/(down|start)$/i)?f(a):c.type.match(/move$/i)&&g(a)}function f(b){var c=b.data,d=\"undefined\"!==a.type(c.touches)?c.touches[0]:null;if(c.touching||(c.startE=b.originalEvent,c.startX=d?d.pageX:b.pageX,c.startY=d?d.pageY:b.pageY,c.startT=(new Date).getTime(),c.scaleD=1,c.passed=!1),c.tap)c.clicked=!1,c.$el.on([r.touchMove,r.pointerMove].join(\" \"),c,e).on([r.touchEnd,r.touchCancel,r.pointerUp,r.pointerCancel].join(\" \"),c,e);else if(c.pan||c.scale){c.$links&&c.$links.off(r.click);var f=l(c.scale?r.scaleStart:r.panStart,b,c.startX,c.startY,c.scaleD,0,0,\"\",\"\");if(c.scale&&c.touches&&c.touches.length>=2){var h=c.touches;c.pinch={startX:m(h[0].pageX,h[1].pageX),startY:m(h[0].pageY,h[1].pageY),startD:n(h[1].pageX-h[0].pageX,h[1].pageY-h[0].pageY)},f.pageX=c.startX=c.pinch.startX,f.pageY=c.startY=c.pinch.startY}c.touching||(c.touching=!0,c.pan&&t.on(r.mouseMove,c,g).on(r.mouseUp,c,j),t.on([r.touchMove,r.touchEnd,r.touchCancel,r.pointerMove,r.pointerUp,r.pointerCancel].join(\" \"),c,e),c.$el.trigger(f))}}function g(b){var c=b.data,d=\"undefined\"!==a.type(c.touches)?c.touches[0]:null,e=d?d.pageX:b.pageX,f=d?d.pageY:b.pageY,g=e-c.startX,h=f-c.startY,i=g>0?\"right\":\"left\",k=h>0?\"down\":\"up\",o=Math.abs(g)>u,p=Math.abs(h)>u;if(c.tap)(o||p)&&c.$el.off([r.touchMove,r.touchEnd,r.touchCancel,r.pointerMove,r.pointerUp,r.pointerCancel].join(\" \"));else if(c.pan||c.scale)if(!c.passed&&c.axis&&(c.axisX&&p||c.axisY&&o))j(b);else{!c.passed&&(!c.axis||c.axis&&c.axisX&&o||c.axisY&&p)&&(c.passed=!0),c.passed&&(s.killEvent(b),s.killEvent(c.startE));var q=!0,t=l(c.scale?r.scale:r.pan,b,e,f,c.scaleD,g,h,i,k);if(c.scale)if(c.touches&&c.touches.length>=2){var v=c.touches;c.pinch.endX=m(v[0].pageX,v[1].pageX),c.pinch.endY=m(v[0].pageY,v[1].pageY),c.pinch.endD=n(v[1].pageX-v[0].pageX,v[1].pageY-v[0].pageY),c.scaleD=c.pinch.endD/c.pinch.startD,t.pageX=c.pinch.endX,t.pageY=c.pinch.endY,t.scale=c.scaleD,t.deltaX=c.pinch.endX-c.pinch.startX,t.deltaY=c.pinch.endY-c.pinch.startY}else c.pan||(q=!1);q&&c.$el.trigger(t)}}function h(b,c){b.on(r.click,c,i);var d=a._data(b[0],\"events\").click;d.unshift(d.pop())}function i(a){s.killEvent(a,!0),a.data.$links.off(r.click)}function j(b){var c=b.data;if(c.tap)c.$el.off([r.touchMove,r.touchEnd,r.touchCancel,r.pointerMove,r.pointerUp,r.pointerCancel,r.mouseMove,r.mouseUp].join(\" \")),c.startE.preventDefault(),k(b);else if(c.pan||c.scale){var d=\"undefined\"!==a.type(c.touches)?c.touches[0]:null,e=d?d.pageX:b.pageX,f=d?d.pageY:b.pageY,g=e-c.startX,i=f-c.startY,j=(new Date).getTime(),m=c.scale?r.scaleEnd:r.panEnd,n=g>0?\"right\":\"left\",o=i>0?\"down\":\"up\",p=Math.abs(g)>1,q=Math.abs(i)>1;if(c.swipe&&Math.abs(g)>u&&j-c.startT<v&&(m=r.swipe),c.axis&&(c.axisX&&q||c.axisY&&p)||p||q){c.$links=c.$el.find(\"a\");for(var s=0,w=c.$links.length;w>s;s++)h(c.$links.eq(s),c)}var x=l(m,b,e,f,c.scaleD,g,i,n,o);t.off([r.touchMove,r.touchEnd,r.touchCancel,r.mouseMove,r.mouseUp,r.pointerMove,r.pointerUp,r.pointerCancel].join(\" \")),c.$el.trigger(x),c.touches=[],c.scale}c.touching=!1}function k(a){s.killEvent(a);var b=a.data;if(!b.clicked){\"click\"!==a.type&&(b.clicked=!0);var c=b.startE?b.startX:a.pageX,d=b.startE?b.startY:a.pageY,e=l(r.tap,a.originalEvent,c,d,1,0,0);b.$el.trigger(e)}}function l(b,c,d,e,f,g,h,i,j){return a.Event(b,{originalEvent:c,bubbles:!0,pageX:d,pageY:e,scale:f,deltaX:g,deltaY:h,directionX:i,directionY:j})}function m(a,b){return(a+b)/2}function n(a,b){return Math.sqrt(a*a+b*b)}function o(a,b){a.css({\"-ms-touch-action\":b,\"touch-action\":b})}var p=!b.window.PointerEvent,q=b.Plugin(\"touch\",{widget:!0,defaults:{axis:!1,pan:!1,scale:!1,swipe:!1,tap:!1},methods:{_construct:c,_destruct:d},events:{pointerDown:p?\"MSPointerDown\":\"pointerdown\",pointerUp:p?\"MSPointerUp\":\"pointerup\",pointerMove:p?\"MSPointerMove\":\"pointermove\",pointerCancel:p?\"MSPointerCancel\":\"pointercancel\"}}),r=q.events,s=q.functions,t=b.$window,u=10,v=50;r.tap=\"tap\",r.pan=\"pan\",r.panStart=\"panstart\",r.panEnd=\"panend\",r.scale=\"scale\",r.scaleStart=\"scalestart\",r.scaleEnd=\"scaleend\",r.swipe=\"swipe\"}(jQuery,Formstone);","/*! formstone v0.7.0 [transition.js] 2015-07-04 | MIT License | formstone.it */\n\n!function(a,b){\"use strict\";function c(a,c){if(c){a.$target=this.find(a.target),a.$check=a.target?a.$target:this,a.callback=c,a.styles=h(a.$check),a.timer=null;var d=a.$check.css(b.transition+\"-duration\"),f=parseFloat(d);b.support.transition&&d&&f?this.on(k.transitionEnd,a,e):a.timer=l.startTimer(a.timer,50,function(){g(a)},!0)}}function d(a){l.clearTimer(a.timer,!0),this.off(k.namespace)}function e(b){b.stopPropagation(),b.preventDefault();var c=b.data,d=b.originalEvent,e=c.target?c.$target:c.$el;c.property&&d.propertyName!==c.property||!a(d.target).is(e)||f(c)}function f(a){a.always||a.$el[j.namespaceClean](\"destroy\"),a.callback.apply(a.$el)}function g(a){var b=h(a.$check);i(a.styles,b)||f(a),a.styles=b}function h(b){var c,d,e,f={};if(b instanceof a&&(b=b[0]),m.getComputedStyle){c=m.getComputedStyle(b,null);for(var g=0,h=c.length;h>g;g++)d=c[g],e=c.getPropertyValue(d),f[d]=e}else if(b.currentStyle){c=b.currentStyle;for(d in c)c[d]&&(f[d]=c[d])}return f}function i(b,c){if(a.type(b)!==a.type(c))return!1;for(var d in b)if(!b.hasOwnProperty(d)||!c.hasOwnProperty(d)||b[d]!==c[d])return!1;return!0}var j=b.Plugin(\"transition\",{widget:!0,defaults:{always:!1,property:null,target:null},methods:{_construct:c,_destruct:d,resolve:f}}),k=j.events,l=j.functions,m=b.window}(jQuery,Formstone);",";(function ($, Formstone, undefined) {\r\n\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @method private\r\n     * @name setup\r\n     * @description Setup plugin.\r\n     */\r\n\r\n    function setup() {\r\n        $Body = Formstone.$body;\r\n    }\r\n\r\n    /**\r\n     * @method private\r\n     * @name construct\r\n     * @description Builds instance.\r\n     * @param data [object] \"Instance data\"\r\n     */\r\n\r\n    function construct(data) {\r\n        data.multiple = this.prop(\"multiple\");\r\n        data.disabled = this.is(\":disabled\");\r\n\r\n        if (data.multiple) {\r\n            data.links = false;\r\n        } else if (data.external) {\r\n            data.links = true;\r\n        }\r\n\r\n        // Grab true original index, only if selected attribute exits\r\n        var $trueOriginal   = this.find(\"[selected]\").not(\":disabled\"),\r\n            $originalOption = this.find(\":selected\").not(\":disabled\"),\r\n            originalLabel = $originalOption.text(),\r\n            originalIndex = this.find(\"option\").index($originalOption);\r\n\r\n        if (!data.multiple && data.label !== \"\" && !$trueOriginal.length) {\r\n            $originalOption = this.prepend('<option value=\"\" class=\"' + RawClasses.item_placeholder + '\" selected>' + data.label + '</option>');\r\n            originalLabel = data.label;\r\n            originalIndex = 0;\r\n        } else {\r\n            data.label = \"\";\r\n        }\r\n\r\n        // Build options array\r\n        var $allOptions = this.find(\"option, optgroup\"),\r\n            $options = $allOptions.filter(\"option\");\r\n\r\n        // Swap tab index, no more interacting with the actual select!\r\n        data.tabIndex = this[0].tabIndex;\r\n        this[0].tabIndex = -1;\r\n\r\n        // Build wrapper\r\n        var wrapperClasses = [\r\n            RawClasses.base,\r\n            data.customClass\r\n        ];\r\n\r\n        if (data.mobile || Formstone.isMobile) {\r\n            wrapperClasses.push(RawClasses.mobile);\r\n        } else if (data.cover) {\r\n            wrapperClasses.push(RawClasses.cover);\r\n        }\r\n        if (data.multiple) {\r\n            wrapperClasses.push(RawClasses.multiple);\r\n        }\r\n        if (data.disabled) {\r\n            wrapperClasses.push(RawClasses.disabled);\r\n        }\r\n\r\n        // Build html\r\n        var wrapperHtml = '<div class=\"' + wrapperClasses.join(\" \") + '\" tabindex=\"' + data.tabIndex + '\"></div>',\r\n            innerHtml = \"\";\r\n\r\n        // Build inner\r\n        if (!data.multiple) {\r\n            innerHtml += '<button type=\"button\" class=\"' + RawClasses.selected + '\">';\r\n            innerHtml += $('<span></span>').text( trimText(originalLabel, data.trim) ).html();\r\n            innerHtml += '</button>';\r\n        }\r\n        innerHtml += '<div class=\"' + RawClasses.options + '\">';\r\n        innerHtml += '</div>';\r\n\r\n        // Modify DOM\r\n        this.wrap(wrapperHtml)\r\n            .after(innerHtml);\r\n\r\n        // Store plugin data\r\n        data.$dropdown        = this.parent(Classes.base);\r\n        data.$allOptions      = $allOptions;\r\n        data.$options         = $options;\r\n        data.$selected        = data.$dropdown.find(Classes.selected);\r\n        data.$wrapper         = data.$dropdown.find(Classes.options);\r\n        data.$placeholder     = data.$dropdown.find(Classes.placeholder);\r\n        data.index            = -1;\r\n        data.closed           = true;\r\n        data.focused          = false;\r\n\r\n        buildOptions(data);\r\n\r\n        if (!data.multiple) {\r\n            updateOption(originalIndex, data);\r\n        }\r\n\r\n        /*\r\n         // Scroller support\r\n         if ($.fn.scroller !== undefined) {\r\n         data.$wrapper.scroller();\r\n         }\r\n         */\r\n\r\n        // Bind events\r\n        data.$selected.fsTouch({\r\n            tap: true\r\n        }).on(Events.tap, data, onClick);\r\n\r\n        data.$dropdown.on(Events.click, Classes.item, data, onSelect)\r\n            .on(Events.close, data, onClose);\r\n\r\n        // Change events\r\n        this.on(Events.change, data, onChange);\r\n\r\n        // Focus/Blur events\r\n        if (!Formstone.isMobile) {\r\n            data.$dropdown.on(Events.focusIn, data, onFocusIn)\r\n                .on(Events.focusOut, data, onFocusOut);\r\n\r\n            // Handle clicks to associated labels\r\n            this.on(Events.focusIn, data, function(e) {\r\n                e.data.$dropdown.trigger(Events.raw.focusIn);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @method private\r\n     * @name destruct\r\n     * @description Tears down instance.\r\n     * @param data [object] \"Instance data\"\r\n     */\r\n\r\n    function destruct(data) {\r\n        if (data.$dropdown.hasClass(RawClasses.open)) {\r\n            data.$selected.trigger(Events.click);\r\n        }\r\n\r\n        // Scrollbar support\r\n        /*\r\n         if ($.fn.scroller !== undefined) {\r\n         data.$dropdown.find(\".selecter-options\").scroller(\"destroy\");\r\n         }\r\n         */\r\n\r\n        data.$el[0].tabIndex = data.tabIndex;\r\n\r\n        data.$dropdown.off(Events.namespace);\r\n        data.$options.off(Events.namespace);\r\n\r\n        data.$placeholder.remove();\r\n        data.$selected.fsTouch(\"destroy\")\r\n            .remove();\r\n        data.$wrapper.remove();\r\n\r\n        data.$el.off(Events.namespace)\r\n            .show()\r\n            .unwrap();\r\n    }\r\n\r\n    /**\r\n     * @method\r\n     * @name disable\r\n     * @description Disables target instance or option.\r\n     * @param option [string] <null> \"Target option value\"\r\n     * @example $(\".target\").dropdown(\"disable\", \"1\");\r\n     */\r\n\r\n    function disableDropdown(data, option) {\r\n        if (typeof option !== \"undefined\") {\r\n            var index = data.$items.index( data.$items.filter(\"[data-value=\" + option + \"]\") );\r\n\r\n            data.$items.eq(index).addClass(RawClasses.item_disabled);\r\n            data.$options.eq(index).prop(\"disabled\", true);\r\n        } else {\r\n            if (data.$dropdown.hasClass(RawClasses.open)) {\r\n                data.$selected.trigger(Events.click);\r\n            }\r\n\r\n            data.$dropdown.addClass(RawClasses.disabled);\r\n            data.$el.prop(\"disabled\", true);\r\n\r\n            data.disabled = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @method\r\n     * @name enable\r\n     * @description Enables target instance or option.\r\n     * @param option [string] <null> \"Target option value\"\r\n     * @example $(\".target\").dropdown(\"enable\", \"1\");\r\n     */\r\n\r\n    function enableDropdown(data, option) {\r\n        if (typeof option !== \"undefined\") {\r\n            var index = data.$items.index( data.$items.filter(\"[data-value=\" + option + \"]\") );\r\n            data.$items.eq(index).removeClass(RawClasses.item_disabled);\r\n            data.$options.eq(index).prop(\"disabled\", false);\r\n        } else {\r\n            data.$dropdown.removeClass(RawClasses.disabled);\r\n            data.$el.prop(\"disabled\", false);\r\n\r\n            data.disabled = false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @method\r\n     * @name update\r\n     * @description Updates instance.\r\n     * @example $(\".target\").dropdown(\"update\");\r\n     */\r\n\r\n    function updateDropdown(data) {\r\n        var index = data.index;\r\n\r\n        data.$allOptions = data.$el.find(\"option, optgroup\");\r\n        data.$options = data.$allOptions.filter(\"option\");\r\n        data.index = -1;\r\n\r\n        index = data.$options.index(data.$options.filter(\":selected\"));\r\n\r\n        buildOptions(data);\r\n\r\n        if (!data.multiple) {\r\n            updateOption(index, data);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @method private\r\n     * @name buildOptions\r\n     * @description Builds instance's option set.\r\n     * @param data [object] \"Instance data\"\r\n     */\r\n\r\n    function buildOptions(data) {\r\n        var html = '',\r\n            j = 0;\r\n\r\n        for (var i = 0, count = data.$allOptions.length; i < count; i++) {\r\n            var $option = data.$allOptions.eq(i),\r\n                classes = [];\r\n\r\n            // Option group\r\n            if ($option[0].tagName === \"OPTGROUP\") {\r\n                classes.push(RawClasses.group);\r\n\r\n                // Disabled groups\r\n                if ($option.is(\":disabled\")) {\r\n                    classes.push(RawClasses.disabled);\r\n                }\r\n\r\n                html += '<span class=\"' + classes.join(\" \") + '\">' + $option.attr(\"label\") + '</span>';\r\n            } else {\r\n                var opVal = $option.val();\r\n\r\n                if (!$option.attr(\"value\")) {\r\n                    $option.attr(\"value\", opVal);\r\n                }\r\n\r\n                classes.push(RawClasses.item);\r\n\r\n                if ($option.hasClass(RawClasses.item_placeholder)) {\r\n                    classes.push(RawClasses.item_placeholder);\r\n                }\r\n                if ($option.is(\":selected\")) {\r\n                    classes.push(RawClasses.item_selected);\r\n                }\r\n                if ($option.is(\":disabled\")) {\r\n                    classes.push(RawClasses.item_disabled);\r\n                }\r\n\r\n                html += '<button type=\"button\" class=\"' + classes.join(\" \") + '\" ';\r\n                html += 'data-value=\"' + opVal + '\">';\r\n                html += $(\"<span></span>\").text( trimText($option.text(), data.trim) ).html();\r\n                html += '</button>';\r\n\r\n                j++;\r\n            }\r\n        }\r\n\r\n        data.$items = data.$wrapper.html(html)\r\n            .find(Classes.item);\r\n    }\r\n\r\n    /**\r\n     * @method private\r\n     * @name onClick\r\n     * @description Handles click to selected item.\r\n     * @param e [object] \"Event data\"\r\n     */\r\n\r\n    function onClick(e) {\r\n        Functions.killEvent(e);\r\n\r\n        var data = e.data;\r\n\r\n        if (!data.disabled) {\r\n            // Handle mobile, but not Firefox, unless desktop forced\r\n            if (!data.mobile && Formstone.isMobile && !Formstone.isFirefoxMobile) {\r\n                var el = data.$el[0];\r\n\r\n                if (Document.createEvent) { // All\r\n                    var evt = Document.createEvent(\"MouseEvents\");\r\n                    evt.initMouseEvent(\"mousedown\", false, true, Window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\r\n                    el.dispatchEvent(evt);\r\n                } else if (el.fireEvent) { // IE\r\n                    el.fireEvent(\"onmousedown\");\r\n                }\r\n            } else {\r\n                // Delegate intent\r\n                if (data.closed) {\r\n                    openOptions(data);\r\n                } else {\r\n                    closeOptions(data);\r\n                }\r\n            }\r\n        }\r\n\r\n        closeOthers(data);\r\n    }\r\n\r\n    function closeOthers(data) {\r\n        $(Classes.base).not(data.$dropdown).trigger(Events.close, [ data ]);\r\n    }\r\n\r\n    /**\r\n     * @method private\r\n     * @name openOptions\r\n     * @description Opens option set.\r\n     * @param data [object] \"Instance data\"\r\n     */\r\n\r\n    /**\r\n     * @method\r\n     * @name open\r\n     * @description Opens target instance.\r\n     * @example $(\".target\").dropdown(\"open\");\r\n     */\r\n\r\n    function openOptions(data) {\r\n        // Make sure it's not already open\r\n        if (data.closed) {\r\n            // $(Classes.base).not(data.$dropdown).trigger(Events.close, [ data ]);\r\n\r\n            var offset = data.$dropdown.offset(),\r\n                bodyHeight = $Body.outerHeight(),\r\n                optionsHeight = data.$wrapper.outerHeight(true),\r\n                selectedOffset = (data.index >= 0) ? data.$items.eq(data.index).position() : { left: 0, top: 0 };\r\n\r\n            // Calculate bottom of document\r\n            if (offset.top + optionsHeight > bodyHeight) {\r\n                data.$dropdown.addClass(RawClasses.bottom);\r\n            }\r\n\r\n            // Bind Events\r\n            $Body.on(Events.click + data.dotGuid, \":not(\" + Classes.options + \")\", data, closeOptionsHelper);\r\n\r\n            data.$dropdown.trigger(Events.focusIn);\r\n\r\n            data.$dropdown.addClass(RawClasses.open);\r\n            scrollOptions(data);\r\n\r\n            data.closed = false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @method private\r\n     * @name closeOptions\r\n     * @description Closes option set.\r\n     * @param data [object] \"Instance data\"\r\n     */\r\n\r\n    /**\r\n     * @method\r\n     * @name close\r\n     * @description Closes target instance.\r\n     * @example $(\".target\").dropdown(\"close\");\r\n     */\r\n\r\n    function closeOptions(data) {\r\n        // Make sure it's actually open\r\n        if (data && !data.closed) {\r\n            $Body.off(Events.click + data.dotGuid);\r\n\r\n            data.$dropdown.removeClass( [RawClasses.open, RawClasses.bottom].join(\" \") );\r\n\r\n            data.closed = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @method private\r\n     * @name closeOptionsHelper\r\n     * @description Determines if event target is outside instance before closing\r\n     * @param e [object] \"Event data\"\r\n     */\r\n\r\n    function closeOptionsHelper(e) {\r\n        Functions.killEvent(e);\r\n\r\n        var data = e.data;\r\n\r\n        if (data && $(e.currentTarget).parents(Classes.base).length === 0) {\r\n            closeOptions(data);\r\n\r\n            data.$dropdown.trigger(Events.focusOut);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @method private\r\n     * @name onClose\r\n     * @description Handles close event.\r\n     * @param e [object] \"Event data\"\r\n     */\r\n\r\n    function onClose(e) {\r\n        var data = e.data;\r\n\r\n        if (data) {\r\n            closeOptions(data);\r\n\r\n            data.$dropdown.trigger(Events.focusOut);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @method private\r\n     * @name onSelect\r\n     * @description Handles option select.\r\n     * @param e [object] \"Event data\"\r\n     */\r\n\r\n    function onSelect(e) {\r\n        Functions.killEvent(e);\r\n\r\n        var $target = $(this),\r\n            data = e.data;\r\n\r\n        if (!data.disabled) {\r\n            if (data.$wrapper.is(\":visible\")) {\r\n                // Update\r\n                var index = data.$items.index($target);\r\n\r\n                if (index !== data.index) {\r\n                    updateOption(index, data);\r\n                    handleChange(data);\r\n                }\r\n            }\r\n\r\n            if (!data.multiple) {\r\n                // Clean up\r\n                closeOptions(data);\r\n            }\r\n\r\n            data.$dropdown.trigger(Events.focusIn);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @method private\r\n     * @name onChange\r\n     * @description Handles external changes.\r\n     * @param e [object] \"Event data\"\r\n     */\r\n\r\n    function onChange(e, internal) {\r\n        var $target = $(this),\r\n            data = e.data;\r\n\r\n        if (!internal && !data.multiple) {\r\n            var index = data.$options.index( data.$options.filter(\"[value='\" + escapeText($target.val()) + \"']\") );\r\n\r\n            updateOption(index, data);\r\n            handleChange(data);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @method private\r\n     * @name onFocusIn\r\n     * @description Handles instance focusIn.\r\n     * @param e [object] \"Event data\"\r\n     */\r\n\r\n    function onFocusIn(e) {\r\n        Functions.killEvent(e);\r\n\r\n        var $target = $(e.currentTarget),\r\n            data    = e.data;\r\n\r\n        if (!data.disabled && !data.multiple && !data.focused) {\r\n            closeOthers(data);\r\n\r\n            data.focused = true;\r\n\r\n            data.$dropdown.addClass(RawClasses.focus)\r\n                .on(Events.keyDown + data.dotGuid, data, onKeypress);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @method private\r\n     * @name onFocusOut\r\n     * @description Handles instance focusOut.\r\n     * @param e [object] \"Event data\"\r\n     */\r\n\r\n    function onFocusOut(e, internal) {\r\n        Functions.killEvent(e);\r\n\r\n        var $target = $(e.currentTarget),\r\n            data    = e.data;\r\n\r\n        if (data.focused && data.closed) {\r\n            data.focused = false;\r\n\r\n            data.$dropdown.removeClass(RawClasses.focus)\r\n                .off(Events.keyDown + data.dotGuid);\r\n\r\n            if (!data.multiple) {\r\n                // Clean up\r\n                closeOptions(data);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @method private\r\n     * @name onKeypress\r\n     * @description Handles instance keypress, once focused.\r\n     * @param e [object] \"Event data\"\r\n     */\r\n\r\n    function onKeypress(e) {\r\n        var data = e.data;\r\n\r\n        if (e.keyCode === 13) {\r\n            if (!data.closed) {\r\n                closeOptions(data);\r\n                updateOption(data.index, data);\r\n            }\r\n            handleChange(data);\r\n        } else if (e.keyCode !== 9 && (!e.metaKey && !e.altKey && !e.ctrlKey && !e.shiftKey)) {\r\n            // Ignore modifiers & tabs\r\n            Functions.killEvent(e);\r\n\r\n            var total = data.$items.length - 1,\r\n                index = (data.index < 0) ? 0 : data.index;\r\n\r\n            // Firefox left/right support thanks to Kylemade\r\n            if ($.inArray(e.keyCode, (Formstone.isFirefox) ? [38, 40, 37, 39] : [38, 40]) > -1) {\r\n                // Increment / decrement using the arrow keys\r\n                index = index + ((e.keyCode === 38 || (Formstone.isFirefox && e.keyCode === 37)) ? -1 : 1);\r\n\r\n                if (index < 0) {\r\n                    index = 0;\r\n                }\r\n                if (index > total) {\r\n                    index = total;\r\n                }\r\n            } else {\r\n                var input = String.fromCharCode(e.keyCode).toUpperCase(),\r\n                    letter,\r\n                    i;\r\n\r\n                // Search for input from original index\r\n                for (i = data.index + 1; i <= total; i++) {\r\n                    letter = data.$options.eq(i).text().charAt(0).toUpperCase();\r\n                    if (letter === input) {\r\n                        index = i;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // If not, start from the beginning\r\n                if (index < 0 || index === data.index) {\r\n                    for (i = 0; i <= total; i++) {\r\n                        letter = data.$options.eq(i).text().charAt(0).toUpperCase();\r\n                        if (letter === input) {\r\n                            index = i;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Update\r\n            if (index >= 0) {\r\n                updateOption(index, data);\r\n                scrollOptions(data);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @method private\r\n     * @name updateOption\r\n     * @description Updates instance based on new target index.\r\n     * @param index [int] \"Selected option index\"\r\n     * @param data [object] \"instance data\"\r\n     */\r\n\r\n    function updateOption(index, data) {\r\n        var $item      = data.$items.eq(index),\r\n            $option    = data.$options.eq(index),\r\n            isSelected = $item.hasClass(RawClasses.item_selected),\r\n            isDisabled = $item.hasClass(RawClasses.item_disabled);\r\n\r\n        // Check for disabled options\r\n        if (!isDisabled) {\r\n            if (data.multiple) {\r\n                if (isSelected) {\r\n                    $option.prop(\"selected\", null);\r\n                    $item.removeClass(RawClasses.item_selected);\r\n                } else {\r\n                    $option.prop(\"selected\", true);\r\n                    $item.addClass(RawClasses.item_selected);\r\n                }\r\n            } else if (index > -1 && index < data.$items.length) {\r\n                var label = $option.data(\"label\") || $item.html();\r\n\r\n                data.$selected.html(label)\r\n                    .removeClass(Classes.item_placeholder);\r\n\r\n                data.$items.filter(Classes.item_selected)\r\n                    .removeClass(RawClasses.item_selected);\r\n\r\n                data.$el[0].selectedIndex = index;\r\n\r\n                $item.addClass(RawClasses.item_selected);\r\n                data.index = index;\r\n            } else if (data.label !== \"\") {\r\n                data.$selected.html(data.label);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @method private\r\n     * @name scrollOptions\r\n     * @description Scrolls options wrapper to specific option.\r\n     * @param data [object] \"Instance data\"\r\n     */\r\n\r\n    function scrollOptions(data) {\r\n        var $selected      = data.$items.eq(data.index),\r\n            selectedOffset = (data.index >= 0 && !$selected.hasClass(RawClasses.item_placeholder)) ? $selected.position() : { left: 0, top: 0 },\r\n            buffer         = (data.$wrapper.outerHeight() - $selected.outerHeight()) / 2;\r\n\r\n        /*\r\n         if ($.fn.scroller !== undefined) {\r\n         data.$wrapper.scroller(\"scroll\", (data.$wrapper.find(\".scroller-content\").scrollTop() + selectedOffset.top), 0)\r\n         .scroller(\"reset\");\r\n         } else {\r\n         */\r\n        data.$wrapper.scrollTop( data.$wrapper.scrollTop() + selectedOffset.top - buffer );\r\n        // }\r\n    }\r\n\r\n    /**\r\n     * @method private\r\n     * @name handleChange\r\n     * @description Handles change events.\r\n     * @param data [object] \"Instance data\"\r\n     */\r\n\r\n    function handleChange(data) {\r\n        if (data.links) {\r\n            launchLink(data);\r\n        } else {\r\n            data.$el.trigger(Events.raw.change, [ true ]);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @method private\r\n     * @name launchLink\r\n     * @description Launches link.\r\n     * @param data [object] \"Instance data\"\r\n     */\r\n\r\n    function launchLink(data) {\r\n        var url = data.$el.val();\r\n\r\n        if (data.external) {\r\n            // Open link in a new tab/window\r\n            Window.open(url);\r\n        } else {\r\n            // Open link in same tab/window\r\n            Window.location.href = url;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @method private\r\n     * @name trimText\r\n     * @description Trims text, if specified length is greater then 0.\r\n     * @param length [int] \"Length to trim at\"\r\n     * @param text [string] \"Text to trim\"\r\n     * @return [string] \"Trimmed string\"\r\n     */\r\n\r\n    function trimText(text, length) {\r\n        if (length === 0) {\r\n            return text;\r\n        } else {\r\n            if (text.length > length) {\r\n                return text.substring(0, length) + \"...\";\r\n            } else {\r\n                return text;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @method private\r\n     * @name escapeText\r\n     * @description Escapes text.\r\n     * @param text [string] \"Text to escape\"\r\n     */\r\n\r\n    function escapeText(text) {\r\n        return (typeof text === \"string\") ? text.replace(/([;&,\\.\\+\\*\\~':\"\\!\\^#$%@\\[\\]\\(\\)=>\\|])/g, '\\\\$1') : text;\r\n    }\r\n\r\n    /**\r\n     * @plugin\r\n     * @name Dropdown\r\n     * @description A jQuery plugin for custom select elements.\r\n     * @type widget\r\n     * @dependency jQuery\r\n     * @dependency core.js\r\n     * @dependency touch.js\r\n     */\r\n\r\n    var Plugin = Formstone.Plugin(\"dropdown\", {\r\n            widget: true,\r\n\r\n            /**\r\n             * @options\r\n             * @param cover [boolean] <false> \"Cover handle with option set\"\r\n             * @param customClass [string] <''> \"Class applied to instance\"\r\n             * @param label [string] <''> \"Label displayed before selection\"\r\n             * @param external [boolean] <false> \"Open options as links in new window\"\r\n             * @param links [boolean] <false> \"Open options as links in same window\"\r\n             * @param mobile [boolean] <false> \"Force desktop interaction on mobile\"\r\n             * @param trim [int] <0> \"Trim options to specified length; 0 to disable\r\n             */\r\n            defaults: {\r\n                cover          : false,\r\n                customClass    : \"\",\r\n                label          : \"\",\r\n                external       : false,\r\n                links          : false,\r\n                mobile         : false,\r\n                trim           : 0\r\n            },\r\n\r\n            methods: {\r\n                _setup        : setup,\r\n                _construct    : construct,\r\n                _destruct     : destruct,\r\n\r\n                disable       : disableDropdown,\r\n                enable        : enableDropdown,\r\n                update        : updateDropdown,\r\n                open          : openOptions,\r\n                close         : closeOptions\r\n            },\r\n\r\n            classes: [\r\n                \"cover\",\r\n                \"bottom\",\r\n                \"multiple\",\r\n                \"mobile\",\r\n\r\n                \"open\",\r\n                \"disabled\",\r\n                \"focus\",\r\n\r\n                \"selected\",\r\n                \"options\",\r\n                \"group\",\r\n                \"item\",\r\n\r\n                \"item_disabled\",\r\n                \"item_selected\",\r\n                \"item_placeholder\"\r\n            ],\r\n\r\n            events: {\r\n                tap:   \"tap\",\r\n                close: \"close\"\r\n            }\r\n        }),\r\n\r\n    // Localize References\r\n\r\n        Classes       = Plugin.classes,\r\n        RawClasses    = Classes.raw,\r\n        Events        = Plugin.events,\r\n        Functions     = Plugin.functions,\r\n\r\n    // Local\r\n\r\n        Window        = Formstone.window,\r\n        $Window       = Formstone.$window,\r\n        Document      = Formstone.document,\r\n        $Body         = null;\r\n\r\n})(jQuery, Formstone);","/*! formstone v0.7.0 [lightbox.js] 2015-07-04 | MIT License | formstone.it */\n\n!function(a,b,c){\"use strict\";function d(){S=b.$body,T=a(\"html, body\")}function e(){U&&j()}function f(a){this.on(O.click,a,i)}function g(){k(),this.off(O.namespace)}function h(b,c){b instanceof a&&i.apply(Q,[{data:a.extend(!0,{},{$object:b},L,c||{})}])}function i(c){if(!U){var d=c.data,e=d.$el,f=d.$object,g=e&&e[0].href?e[0].href||\"\":\"\",h=e&&e[0].hash?e[0].hash||\"\":\"\",i=g.toLowerCase().split(\".\").pop().split(/\\#|\\?/),j=i[0],l=e?e.data(K+\"-type\"):\"\",m=\"image\"===l||a.inArray(j,d.extensions)>-1||\"data:image\"===g.substr(0,10),o=I(g),q=\"url\"===l||!m&&!o&&\"http\"===g.substr(0,4)&&!h,r=\"element\"===l||!m&&!o&&!q&&\"#\"===h.substr(0,1),t=\"undefined\"!=typeof f;if(r&&(g=h),!(m||o||q||r||t))return;if(P.killEvent(c),U=a.extend({},{visible:!1,gallery:{active:!1},isMobile:b.isMobile||d.mobile,isTouch:b.support.touch,isAnimating:!0,oldContentHeight:0,oldContentWidth:0},d),U.margin*=2,U.type=m?\"image\":o?\"video\":\"element\",m||o){var u=e.data(K+\"-gallery\");u&&(U.gallery.active=!0,U.gallery.id=u,U.gallery.$items=a(\"a[data-lightbox-gallery= \"+U.gallery.id+\"], a[rel= \"+U.gallery.id+\"]\"),U.gallery.index=U.gallery.$items.index(U.$el),U.gallery.total=U.gallery.$items.length-1)}var w=\"\";U.isMobile||(w+='<div class=\"'+[M.raw.overlay,U.customClass].join(\" \")+'\"></div>');var x=[M.raw.base,M.raw.loading,M.raw.animating,U.customClass];U.fixed&&x.push(M.raw.fixed),U.isMobile&&x.push(M.raw.mobile),U.isTouch&&x.push(M.raw.touch),q&&x.push(M.raw.iframed),(r||t)&&x.push(M.raw.inline),w+='<div class=\"'+x.join(\" \")+'\">',w+='<button type=\"button\" class=\"'+M.raw.close+'\">'+U.labels.close+\"</button>\",w+='<span class=\"'+M.raw.loading_icon+'\"></span>',w+='<div class=\"'+M.raw.container+'\">',w+='<div class=\"'+M.raw.content+'\">',(m||o)&&(w+='<div class=\"'+M.raw.tools+'\">',w+='<div class=\"'+M.raw.controls+'\">',U.gallery.active&&(w+='<button type=\"button\" class=\"'+[M.raw.control,M.raw.control_previous].join(\" \")+'\">'+U.labels.previous+\"</button>\",w+='<button type=\"button\" class=\"'+[M.raw.control,M.raw.control_next].join(\" \")+'\">'+U.labels.next+\"</button>\"),U.isMobile&&U.isTouch&&(w+='<button type=\"button\" class=\"'+[M.raw.caption_toggle].join(\" \")+'\">'+U.labels.captionClosed+\"</button>\"),w+=\"</div>\",w+='<div class=\"'+M.raw.meta+'\">',U.gallery.active&&(w+='<p class=\"'+M.raw.position+'\"',U.gallery.total<1&&(w+=' style=\"display: none;\"'),w+=\">\",w+='<span class=\"'+M.raw.position_current+'\">'+(U.gallery.index+1)+\"</span> \",w+=U.labels.count,w+=' <span class=\"'+M.raw.position_total+'\">'+(U.gallery.total+1)+\"</span>\",w+=\"</p>\"),w+='<div class=\"'+M.raw.caption+'\">',w+=U.formatter.call(e,d),w+=\"</div></div>\",w+=\"</div>\"),w+=\"</div></div></div>\",S.append(w),U.$overlay=a(M.overlay),U.$lightbox=a(M.base),U.$close=a(M.close),U.$container=a(M.container),U.$content=a(M.content),U.$tools=a(M.tools),U.$meta=a(M.meta),U.$position=a(M.position),U.$caption=a(M.caption),U.$controlBox=a(M.controls),U.$controls=a(M.control),U.isMobile?(U.paddingVertical=U.$close.outerHeight(),U.paddingHorizontal=0,U.mobilePaddingVertical=parseInt(U.$content.css(\"paddingTop\"),10)+parseInt(U.$content.css(\"paddingBottom\"),10),U.mobilePaddingHorizontal=parseInt(U.$content.css(\"paddingLeft\"),10)+parseInt(U.$content.css(\"paddingRight\"),10)):(U.paddingVertical=parseInt(U.$lightbox.css(\"paddingTop\"),10)+parseInt(U.$lightbox.css(\"paddingBottom\"),10),U.paddingHorizontal=parseInt(U.$lightbox.css(\"paddingLeft\"),10)+parseInt(U.$lightbox.css(\"paddingRight\"),10),U.mobilePaddingVertical=0,U.mobilePaddingHorizontal=0),U.contentHeight=U.$lightbox.outerHeight()-U.paddingVertical,U.contentWidth=U.$lightbox.outerWidth()-U.paddingHorizontal,U.controlHeight=U.$controls.outerHeight(),n(),U.gallery.active&&z(),R.on(O.keyDown,A),S.on(O.clickTouchStart,[M.overlay,M.close].join(\", \"),k),U.gallery.active&&U.$lightbox.on(O.clickTouchStart,M.control,y),U.isMobile&&U.isTouch&&U.$lightbox.on(O.clickTouchStart,M.caption_toggle,p),U.$lightbox.fsTransition({property:\"opacity\"},function(){m?s(g):o?v(g):q?C(g):r?B(g):t&&D(U.$object)}).addClass(M.raw.open),U.$overlay.addClass(M.raw.open)}}function j(a){\"object\"!=typeof a&&(U.targetHeight=arguments[0],U.targetWidth=arguments[1]),\"element\"===U.type?E(U.$content.find(\"> :first-child\")):\"image\"===U.type?t():\"video\"===U.type&&w(),m()}function k(a){P.killEvent(a),U&&(U.$lightbox.fsTransition(\"destroy\"),U.$container.fsTransition(\"destroy\"),U.$lightbox.addClass(M.raw.animating).fsTransition({property:\"opacity\"},function(){U.$lightbox.off(O.namespace),U.$container.off(O.namespace),R.off(O.namespace),S.off(O.namespace),U.$overlay.remove(),U.$lightbox.remove(),U=null,R.trigger(O.close)}),U.$lightbox.removeClass(M.raw.open),U.$overlay.removeClass(M.raw.open),U.isMobile&&T.removeClass(N.lock))}function l(){{var a=o();U.isMobile?0:U.duration}U.isMobile||U.$controls.css({marginTop:(U.contentHeight-U.controlHeight-U.metaHeight)/2}),!U.visible&&U.isMobile&&U.gallery.active&&U.$content.fsTouch({axis:\"x\",swipe:!0}).on(O.swipe,G),U.$lightbox.fsTransition({property:U.contentHeight!==U.oldContentHeight?\"height\":\"width\"},function(){U.$container.fsTransition({property:\"opacity\"},function(){U.$lightbox.removeClass(M.raw.animating),U.isAnimating=!1}),U.$lightbox.removeClass(M.raw.loading),U.visible=!0,R.trigger(O.open),U.gallery.active&&x()}),U.isMobile||U.$lightbox.css({height:U.contentHeight+U.paddingVertical,width:U.contentWidth+U.paddingHorizontal,top:U.fixed?0:a.top});var b=U.oldContentHeight!==U.contentHeight||U.oldContentWidth!==U.contentWidth;(U.isMobile||!b)&&U.$lightbox.fsTransition(\"resolve\"),U.oldContentHeight=U.contentHeight,U.oldContentWidth=U.contentWidth,U.isMobile&&T.addClass(N.lock)}function m(){if(U.visible&&!U.isMobile){var a=o();U.$controls.css({marginTop:(U.contentHeight-U.controlHeight-U.metaHeight)/2}),U.$lightbox.css({height:U.contentHeight+U.paddingVertical,width:U.contentWidth+U.paddingHorizontal,top:U.fixed?0:a.top})}}function n(){var a=o();U.$lightbox.css({top:U.fixed?0:a.top})}function o(){if(U.isMobile)return{left:0,top:0};var a={left:(b.windowWidth-U.contentWidth-U.paddingHorizontal)/2,top:U.top<=0?(b.windowHeight-U.contentHeight-U.paddingVertical)/2:U.top};return U.fixed!==!0&&(a.top+=R.scrollTop()),a}function p(a){P.killEvent(a),U.captionOpen?q():(U.$lightbox.addClass(M.raw.caption_open).find(M.caption_toggle).text(U.labels.captionOpen),U.captionOpen=!0)}function q(){U.$lightbox.removeClass(M.raw.caption_open).find(M.caption_toggle).text(U.labels.captionClosed),U.captionOpen=!1}function r(){var a=this.attr(\"title\"),b=a!==c&&a?a.replace(/^\\s+|\\s+$/g,\"\"):!1;return b?'<p class=\"caption\">'+b+\"</p>\":\"\"}function s(b){U.$image=a(\"<img>\"),U.$image.one(O.load,function(){var a=H(U.$image);U.naturalHeight=a.naturalHeight,U.naturalWidth=a.naturalWidth,U.retina&&(U.naturalHeight/=2,U.naturalWidth/=2),U.$content.prepend(U.$image),\"\"===U.$caption.html()?U.$caption.hide():U.$caption.show(),t(),l()}).error(F).attr(\"src\",b).addClass(M.raw.image),(U.$image[0].complete||4===U.$image[0].readyState)&&U.$image.trigger(O.load)}function t(){var a=0;for(U.windowHeight=U.viewportHeight=b.windowHeight-U.mobilePaddingVertical-U.paddingVertical,U.windowWidth=U.viewportWidth=b.windowWidth-U.mobilePaddingHorizontal-U.paddingHorizontal,U.contentHeight=1/0,U.contentWidth=1/0,U.imageMarginTop=0,U.imageMarginLeft=0;U.contentHeight>U.viewportHeight&&2>a;)U.imageHeight=0===a?U.naturalHeight:U.$image.outerHeight(),U.imageWidth=0===a?U.naturalWidth:U.$image.outerWidth(),U.metaHeight=0===a?0:U.metaHeight,U.spacerHeight=0===a?0:U.spacerHeight,0===a&&(U.ratioHorizontal=U.imageHeight/U.imageWidth,U.ratioVertical=U.imageWidth/U.imageHeight,U.isWide=U.imageWidth>U.imageHeight),U.imageHeight<U.minHeight&&(U.minHeight=U.imageHeight),U.imageWidth<U.minWidth&&(U.minWidth=U.imageWidth),U.isMobile?(U.isTouch?(U.$controlBox.css({width:b.windowWidth}),U.spacerHeight=U.$controls.outerHeight(!0)):(U.$tools.css({width:b.windowWidth}),U.spacerHeight=U.$tools.outerHeight(!0)),U.contentHeight=U.viewportHeight,U.contentWidth=U.viewportWidth,u(),U.imageMarginTop=(U.contentHeight-U.targetImageHeight-U.spacerHeight)/2,U.imageMarginLeft=(U.contentWidth-U.targetImageWidth)/2):(0===a&&(U.viewportHeight-=U.margin+U.paddingVertical,U.viewportWidth-=U.margin+U.paddingHorizontal),U.viewportHeight-=U.metaHeight,u(),U.contentHeight=U.targetImageHeight,U.contentWidth=U.targetImageWidth),U.isMobile||U.isTouch||U.$meta.css({width:U.contentWidth}),U.$image.css({height:U.targetImageHeight,width:U.targetImageWidth,marginTop:U.imageMarginTop,marginLeft:U.imageMarginLeft}),U.isMobile||(U.metaHeight=U.$meta.outerHeight(!0),U.contentHeight+=U.metaHeight),a++}function u(){var a=U.isMobile?U.contentHeight-U.spacerHeight:U.viewportHeight,b=U.isMobile?U.contentWidth:U.viewportWidth;U.isWide?(U.targetImageWidth=b,U.targetImageHeight=U.targetImageWidth*U.ratioHorizontal,U.targetImageHeight>a&&(U.targetImageHeight=a,U.targetImageWidth=U.targetImageHeight*U.ratioVertical)):(U.targetImageHeight=a,U.targetImageWidth=U.targetImageHeight*U.ratioVertical,U.targetImageWidth>b&&(U.targetImageWidth=b,U.targetImageHeight=U.targetImageWidth*U.ratioHorizontal)),(U.targetImageWidth>U.imageWidth||U.targetImageHeight>U.imageHeight)&&(U.targetImageHeight=U.imageHeight,U.targetImageWidth=U.imageWidth),(U.targetImageWidth<U.minWidth||U.targetImageHeight<U.minHeight)&&(U.targetImageWidth<U.minWidth?(U.targetImageWidth=U.minWidth,U.targetImageHeight=U.targetImageWidth*U.ratioHorizontal):(U.targetImageHeight=U.minHeight,U.targetImageWidth=U.targetImageHeight*U.ratioVertical))}function v(b){var c=b.match(/(?:youtube\\.com\\/(?:[^\\/]+\\/.+\\/|(?:v|e(?:mbed)?)\\/|.*[?&]v=)|youtu\\.be\\/)([^\"&?\\/ ]{11})/i),d=b.match(/(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\d+)\\/video\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/),e=b.split(\"?\").slice(1)[0],f=null!==c?\"//www.youtube.com/embed/\"+c[1]:\"//player.vimeo.com/video/\"+d[3];e.trim()&&(f+=\"?\"+e),U.$videoWrapper=a('<div class=\"'+M.raw.videoWrapper+'\"></div>'),U.$video=a('<iframe class=\"'+M.raw.video+'\" seamless=\"seamless\"></iframe>'),U.$video.attr(\"src\",f).addClass(M.raw.video).prependTo(U.$videoWrapper),U.$content.prepend(U.$videoWrapper),w(),l()}function w(){U.windowHeight=U.viewportHeight=b.windowHeight-U.mobilePaddingVertical-U.paddingVertical,U.windowWidth=U.viewportWidth=b.windowWidth-U.mobilePaddingHorizontal-U.paddingHorizontal,U.videoMarginTop=0,U.videoMarginLeft=0,U.isMobile?(U.isTouch?(U.$controlBox.css({width:b.windowWidth}),U.spacerHeight=U.$controls.outerHeight(!0)):(U.$tools.css({width:b.windowWidth}),U.spacerHeight=U.$tools.outerHeight(!0)),U.viewportHeight-=U.spacerHeight,U.targetVideoWidth=U.viewportWidth,U.targetVideoHeight=U.targetVideoWidth*U.videoRatio,U.targetVideoHeight>U.viewportHeight&&(U.targetVideoHeight=U.viewportHeight,U.targetVideoWidth=U.targetVideoHeight/U.videoRatio),U.videoMarginTop=(U.viewportHeight-U.targetVideoHeight)/2,U.videoMarginLeft=(U.viewportWidth-U.targetVideoWidth)/2):(U.viewportHeight=U.windowHeight-U.margin,U.viewportWidth=U.windowWidth-U.margin,U.targetVideoWidth=U.videoWidth>U.viewportWidth?U.viewportWidth:U.videoWidth,U.targetVideoWidth<U.minWidth&&(U.targetVideoWidth=U.minWidth),U.targetVideoHeight=U.targetVideoWidth*U.videoRatio,U.contentHeight=U.targetVideoHeight,U.contentWidth=U.targetVideoWidth),U.isMobile||U.isTouch||U.$meta.css({width:U.contentWidth}),U.$videoWrapper.css({height:U.targetVideoHeight,width:U.targetVideoWidth,marginTop:U.videoMarginTop,marginLeft:U.videoMarginLeft}),U.isMobile||(U.metaHeight=U.$meta.outerHeight(!0),U.contentHeight=U.targetVideoHeight+U.metaHeight)}function x(){var b=\"\";U.gallery.index>0&&(b=U.gallery.$items.eq(U.gallery.index-1).attr(\"href\"),I(b)||a('<img src=\"'+b+'\">')),U.gallery.index<U.gallery.total&&(b=U.gallery.$items.eq(U.gallery.index+1).attr(\"href\"),I(b)||a('<img src=\"'+b+'\">'))}function y(b){P.killEvent(b);var c=a(b.currentTarget);U.isAnimating||c.hasClass(M.raw.control_disabled)||(U.isAnimating=!0,q(),U.gallery.index+=c.hasClass(M.raw.control_next)?1:-1,U.gallery.index>U.gallery.total&&(U.gallery.index=U.infinite?0:U.gallery.total),U.gallery.index<0&&(U.gallery.index=U.infinite?U.gallery.total:0),U.$lightbox.addClass(M.raw.animating),U.$container.fsTransition({property:\"opacity\"},function(){\"undefined\"!=typeof U.$image&&U.$image.remove(),\"undefined\"!=typeof U.$videoWrapper&&U.$videoWrapper.remove(),U.$el=U.gallery.$items.eq(U.gallery.index),U.$caption.html(U.formatter.call(U.$el,U)),U.$position.find(M.position_current).html(U.gallery.index+1);var a=U.$el.attr(\"href\"),b=I(a);b?v(a):s(a),z()}),U.$lightbox.addClass(M.raw.loading))}function z(){U.$controls.removeClass(M.raw.control_disabled),U.infinite||(0===U.gallery.index&&U.$controls.filter(M.control_previous).addClass(N.control_disabled),U.gallery.index===U.gallery.total&&U.$controls.filter(M.control_next).addClass(N.control_disabled))}function A(a){!U.gallery.active||37!==a.keyCode&&39!==a.keyCode?27===a.keyCode&&U.$close.trigger(O.click):(P.killEvent(a),U.$controls.filter(37===a.keyCode?M.control_previous:M.control_next).trigger(O.click))}function B(b){var c=a(b).find(\"> :first-child\").clone();D(c)}function C(b){b+=b.indexOf(\"?\")>-1?\"&\"+U.requestKey+\"=true\":\"?\"+U.requestKey+\"=true\";var c=a('<iframe class=\"'+M.raw.iframe+'\" src=\"'+b+'\"></iframe>');D(c)}function D(a){U.$content.append(a),E(a),l()}function E(a){U.windowHeight=b.windowHeight-U.mobilePaddingVertical-U.paddingVertical,U.windowWidth=b.windowWidth-U.mobilePaddingHorizontal-U.paddingHorizontal,U.objectHeight=a.outerHeight(!0),U.objectWidth=a.outerWidth(!0),U.targetHeight=U.targetHeight||(U.$el?U.$el.data(K+\"-height\"):null),U.targetWidth=U.targetWidth||(U.$el?U.$el.data(K+\"-width\"):null),U.maxHeight=U.windowHeight<0?U.minHeight:U.windowHeight,U.isIframe=a.is(\"iframe\"),U.objectMarginTop=0,U.objectMarginLeft=0,U.isMobile||(U.windowHeight-=U.margin,U.windowWidth-=U.margin),U.contentHeight=U.targetHeight?U.targetHeight:U.isIframe||U.isMobile?U.windowHeight:U.objectHeight,U.contentWidth=U.targetWidth?U.targetWidth:U.isIframe||U.isMobile?U.windowWidth:U.objectWidth,(U.isIframe||U.isObject)&&U.isMobile?(U.contentHeight=U.windowHeight,U.contentWidth=U.windowWidth):U.isObject&&(U.contentHeight=U.contentHeight>U.windowHeight?U.windowHeight:U.contentHeight,U.contentWidth=U.contentWidth>U.windowWidth?U.windowWidth:U.contentWidth)}function F(){var b=a('<div class=\"'+M.raw.error+'\"><p>Error Loading Resource</p></div>');U.type=\"element\",U.$tools.remove(),U.$image.off(O.namespace),D(b)}function G(a){U.captionOpen||U.$controls.filter(\"left\"===a.directionX?M.control_next:M.control_previous).trigger(O.click)}function H(a){var b=a[0],c=new Image;return\"undefined\"!=typeof b.naturalHeight?{naturalHeight:b.naturalHeight,naturalWidth:b.naturalWidth}:\"img\"===b.tagName.toLowerCase()?(c.src=b.src,{naturalHeight:c.height,naturalWidth:c.width}):!1}function I(a){return a.indexOf(\"youtube.com\")>-1||a.indexOf(\"youtu.be\")>-1||a.indexOf(\"vimeo.com\")>-1}var J=b.Plugin(\"lightbox\",{widget:!0,defaults:{customClass:\"\",extensions:[\"jpg\",\"sjpg\",\"jpeg\",\"png\",\"gif\"],fixed:!1,formatter:r,infinite:!1,labels:{close:\"Close\",count:\"of\",next:\"Next\",previous:\"Previous\",captionClosed:\"View Caption\",captionOpen:\"Close Caption\"},margin:50,minHeight:100,minWidth:100,mobile:!1,retina:!1,requestKey:\"fs-lightbox\",top:0,videoRatio:.5625,videoWidth:800},classes:[\"loading\",\"animating\",\"fixed\",\"mobile\",\"touch\",\"inline\",\"iframed\",\"open\",\"overlay\",\"close\",\"loading_icon\",\"container\",\"content\",\"image\",\"video\",\"video_wrapper\",\"tools\",\"meta\",\"controls\",\"control\",\"control_previous\",\"control_next\",\"control_disabled\",\"position\",\"position_current\",\"position_total\",\"caption_toggle\",\"caption\",\"caption_open\",\"iframe\",\"error\",\"lock\"],events:{open:\"open\",close:\"close\",swipe:\"swipe\"},methods:{_setup:d,_construct:f,_destruct:g,_resize:e,resize:j},utilities:{_initialize:h,close:k}}),K=J.namespace,L=J.defaults,M=J.classes,N=M.raw,O=J.events,P=J.functions,Q=b.window,R=b.$window,S=null,T=null,U=null}(jQuery,Formstone);","/*!\r\n * Bootstrap Colorpicker\r\n * http://mjolnic.github.io/bootstrap-colorpicker/\r\n *\r\n * Originally written by (c) 2012 Stefan Petre\r\n * Licensed under the Apache License v2.0\r\n * http://www.apache.org/licenses/LICENSE-2.0.txt\r\n *\r\n * @todo Update DOCS\r\n */\r\n\r\n(function(factory) {\r\n    \"use strict\";\r\n    if (typeof exports === 'object') {\r\n        module.exports = factory(window.jQuery);\r\n    } else if (typeof define === 'function' && define.amd) {\r\n        define(['jquery'], factory);\r\n    } else if (window.jQuery && !window.jQuery.fn.colorpicker) {\r\n        factory(window.jQuery);\r\n    }\r\n}\r\n(function($) {\r\n    'use strict';\r\n\r\n    // Color object\r\n    var Color = function(val, customColors) {\r\n        this.value = {\r\n            h: 0,\r\n            s: 0,\r\n            b: 0,\r\n            a: 1\r\n        };\r\n        this.origFormat = null; // original string format\r\n        if (customColors) {\r\n            $.extend(this.colors, customColors);\r\n        }\r\n        if (val) {\r\n            if (val.toLowerCase !== undefined) {\r\n                // cast to string\r\n                val = val + '';\r\n                this.setColor(val);\r\n            } else if (val.h !== undefined) {\r\n                this.value = val;\r\n            }\r\n        }\r\n    };\r\n\r\n    Color.prototype = {\r\n        constructor: Color,\r\n        // 140 predefined colors from the HTML Colors spec\r\n        colors: {\r\n            \"aliceblue\": \"#f0f8ff\",\r\n            \"antiquewhite\": \"#faebd7\",\r\n            \"aqua\": \"#00ffff\",\r\n            \"aquamarine\": \"#7fffd4\",\r\n            \"azure\": \"#f0ffff\",\r\n            \"beige\": \"#f5f5dc\",\r\n            \"bisque\": \"#ffe4c4\",\r\n            \"black\": \"#000000\",\r\n            \"blanchedalmond\": \"#ffebcd\",\r\n            \"blue\": \"#0000ff\",\r\n            \"blueviolet\": \"#8a2be2\",\r\n            \"brown\": \"#a52a2a\",\r\n            \"burlywood\": \"#deb887\",\r\n            \"cadetblue\": \"#5f9ea0\",\r\n            \"chartreuse\": \"#7fff00\",\r\n            \"chocolate\": \"#d2691e\",\r\n            \"coral\": \"#ff7f50\",\r\n            \"cornflowerblue\": \"#6495ed\",\r\n            \"cornsilk\": \"#fff8dc\",\r\n            \"crimson\": \"#dc143c\",\r\n            \"cyan\": \"#00ffff\",\r\n            \"darkblue\": \"#00008b\",\r\n            \"darkcyan\": \"#008b8b\",\r\n            \"darkgoldenrod\": \"#b8860b\",\r\n            \"darkgray\": \"#a9a9a9\",\r\n            \"darkgreen\": \"#006400\",\r\n            \"darkkhaki\": \"#bdb76b\",\r\n            \"darkmagenta\": \"#8b008b\",\r\n            \"darkolivegreen\": \"#556b2f\",\r\n            \"darkorange\": \"#ff8c00\",\r\n            \"darkorchid\": \"#9932cc\",\r\n            \"darkred\": \"#8b0000\",\r\n            \"darksalmon\": \"#e9967a\",\r\n            \"darkseagreen\": \"#8fbc8f\",\r\n            \"darkslateblue\": \"#483d8b\",\r\n            \"darkslategray\": \"#2f4f4f\",\r\n            \"darkturquoise\": \"#00ced1\",\r\n            \"darkviolet\": \"#9400d3\",\r\n            \"deeppink\": \"#ff1493\",\r\n            \"deepskyblue\": \"#00bfff\",\r\n            \"dimgray\": \"#696969\",\r\n            \"dodgerblue\": \"#1e90ff\",\r\n            \"firebrick\": \"#b22222\",\r\n            \"floralwhite\": \"#fffaf0\",\r\n            \"forestgreen\": \"#228b22\",\r\n            \"fuchsia\": \"#ff00ff\",\r\n            \"gainsboro\": \"#dcdcdc\",\r\n            \"ghostwhite\": \"#f8f8ff\",\r\n            \"gold\": \"#ffd700\",\r\n            \"goldenrod\": \"#daa520\",\r\n            \"gray\": \"#808080\",\r\n            \"green\": \"#008000\",\r\n            \"greenyellow\": \"#adff2f\",\r\n            \"honeydew\": \"#f0fff0\",\r\n            \"hotpink\": \"#ff69b4\",\r\n            \"indianred\": \"#cd5c5c\",\r\n            \"indigo\": \"#4b0082\",\r\n            \"ivory\": \"#fffff0\",\r\n            \"khaki\": \"#f0e68c\",\r\n            \"lavender\": \"#e6e6fa\",\r\n            \"lavenderblush\": \"#fff0f5\",\r\n            \"lawngreen\": \"#7cfc00\",\r\n            \"lemonchiffon\": \"#fffacd\",\r\n            \"lightblue\": \"#add8e6\",\r\n            \"lightcoral\": \"#f08080\",\r\n            \"lightcyan\": \"#e0ffff\",\r\n            \"lightgoldenrodyellow\": \"#fafad2\",\r\n            \"lightgrey\": \"#d3d3d3\",\r\n            \"lightgreen\": \"#90ee90\",\r\n            \"lightpink\": \"#ffb6c1\",\r\n            \"lightsalmon\": \"#ffa07a\",\r\n            \"lightseagreen\": \"#20b2aa\",\r\n            \"lightskyblue\": \"#87cefa\",\r\n            \"lightslategray\": \"#778899\",\r\n            \"lightsteelblue\": \"#b0c4de\",\r\n            \"lightyellow\": \"#ffffe0\",\r\n            \"lime\": \"#00ff00\",\r\n            \"limegreen\": \"#32cd32\",\r\n            \"linen\": \"#faf0e6\",\r\n            \"magenta\": \"#ff00ff\",\r\n            \"maroon\": \"#800000\",\r\n            \"mediumaquamarine\": \"#66cdaa\",\r\n            \"mediumblue\": \"#0000cd\",\r\n            \"mediumorchid\": \"#ba55d3\",\r\n            \"mediumpurple\": \"#9370d8\",\r\n            \"mediumseagreen\": \"#3cb371\",\r\n            \"mediumslateblue\": \"#7b68ee\",\r\n            \"mediumspringgreen\": \"#00fa9a\",\r\n            \"mediumturquoise\": \"#48d1cc\",\r\n            \"mediumvioletred\": \"#c71585\",\r\n            \"midnightblue\": \"#191970\",\r\n            \"mintcream\": \"#f5fffa\",\r\n            \"mistyrose\": \"#ffe4e1\",\r\n            \"moccasin\": \"#ffe4b5\",\r\n            \"navajowhite\": \"#ffdead\",\r\n            \"navy\": \"#000080\",\r\n            \"oldlace\": \"#fdf5e6\",\r\n            \"olive\": \"#808000\",\r\n            \"olivedrab\": \"#6b8e23\",\r\n            \"orange\": \"#ffa500\",\r\n            \"orangered\": \"#ff4500\",\r\n            \"orchid\": \"#da70d6\",\r\n            \"palegoldenrod\": \"#eee8aa\",\r\n            \"palegreen\": \"#98fb98\",\r\n            \"paleturquoise\": \"#afeeee\",\r\n            \"palevioletred\": \"#d87093\",\r\n            \"papayawhip\": \"#ffefd5\",\r\n            \"peachpuff\": \"#ffdab9\",\r\n            \"peru\": \"#cd853f\",\r\n            \"pink\": \"#ffc0cb\",\r\n            \"plum\": \"#dda0dd\",\r\n            \"powderblue\": \"#b0e0e6\",\r\n            \"purple\": \"#800080\",\r\n            \"red\": \"#ff0000\",\r\n            \"rosybrown\": \"#bc8f8f\",\r\n            \"royalblue\": \"#4169e1\",\r\n            \"saddlebrown\": \"#8b4513\",\r\n            \"salmon\": \"#fa8072\",\r\n            \"sandybrown\": \"#f4a460\",\r\n            \"seagreen\": \"#2e8b57\",\r\n            \"seashell\": \"#fff5ee\",\r\n            \"sienna\": \"#a0522d\",\r\n            \"silver\": \"#c0c0c0\",\r\n            \"skyblue\": \"#87ceeb\",\r\n            \"slateblue\": \"#6a5acd\",\r\n            \"slategray\": \"#708090\",\r\n            \"snow\": \"#fffafa\",\r\n            \"springgreen\": \"#00ff7f\",\r\n            \"steelblue\": \"#4682b4\",\r\n            \"tan\": \"#d2b48c\",\r\n            \"teal\": \"#008080\",\r\n            \"thistle\": \"#d8bfd8\",\r\n            \"tomato\": \"#ff6347\",\r\n            \"turquoise\": \"#40e0d0\",\r\n            \"violet\": \"#ee82ee\",\r\n            \"wheat\": \"#f5deb3\",\r\n            \"white\": \"#ffffff\",\r\n            \"whitesmoke\": \"#f5f5f5\",\r\n            \"yellow\": \"#ffff00\",\r\n            \"yellowgreen\": \"#9acd32\",\r\n            \"transparent\": \"transparent\"\r\n        },\r\n        _sanitizeNumber: function(val) {\r\n            if (typeof val === 'number') {\r\n                return val;\r\n            }\r\n            if (isNaN(val) || (val === null) || (val === '') || (val === undefined)) {\r\n                return 1;\r\n            }\r\n            if (val.toLowerCase !== undefined) {\r\n                return parseFloat(val);\r\n            }\r\n            return 1;\r\n        },\r\n        isTransparent: function(strVal) {\r\n            if (!strVal) {\r\n                return false;\r\n            }\r\n            strVal = strVal.toLowerCase().trim();\r\n            return (strVal === 'transparent') || (strVal.match(/#?00000000/)) || (strVal.match(/(rgba|hsla)\\(0,0,0,0?\\.?0\\)/));\r\n        },\r\n        rgbaIsTransparent: function(rgba) {\r\n            return ((rgba.r === 0) && (rgba.g === 0) && (rgba.b === 0) && (rgba.a === 0));\r\n        },\r\n        //parse a string to HSB\r\n        setColor: function(strVal) {\r\n            strVal = strVal.toLowerCase().trim();\r\n            if (strVal) {\r\n                if (this.isTransparent(strVal)) {\r\n                    this.value = {\r\n                        h: 0,\r\n                        s: 0,\r\n                        b: 0,\r\n                        a: 0\r\n                    };\r\n                } else {\r\n                    this.value = this.stringToHSB(strVal) || {\r\n                            h: 0,\r\n                            s: 0,\r\n                            b: 0,\r\n                            a: 1\r\n                        }; // if parser fails, defaults to black\r\n                }\r\n            }\r\n        },\r\n        stringToHSB: function(strVal) {\r\n            strVal = strVal.toLowerCase();\r\n            var alias;\r\n            if (typeof this.colors[strVal] !== 'undefined') {\r\n                strVal = this.colors[strVal];\r\n                alias = 'alias';\r\n            }\r\n            var that = this,\r\n                result = false;\r\n            $.each(this.stringParsers, function(i, parser) {\r\n                var match = parser.re.exec(strVal),\r\n                    values = match && parser.parse.apply(that, [match]),\r\n                    format = alias || parser.format || 'rgba';\r\n                if (values) {\r\n                    if (format.match(/hsla?/)) {\r\n                        result = that.RGBtoHSB.apply(that, that.HSLtoRGB.apply(that, values));\r\n                    } else {\r\n                        result = that.RGBtoHSB.apply(that, values);\r\n                    }\r\n                    that.origFormat = format;\r\n                    return false;\r\n                }\r\n                return true;\r\n            });\r\n            return result;\r\n        },\r\n        setHue: function(h) {\r\n            this.value.h = 1 - h;\r\n        },\r\n        setSaturation: function(s) {\r\n            this.value.s = s;\r\n        },\r\n        setBrightness: function(b) {\r\n            this.value.b = 1 - b;\r\n        },\r\n        setAlpha: function(a) {\r\n            this.value.a = parseInt((1 - a) * 100, 10) / 100;\r\n        },\r\n        toRGB: function(h, s, b, a) {\r\n            if (!h) {\r\n                h = this.value.h;\r\n                s = this.value.s;\r\n                b = this.value.b;\r\n            }\r\n            h *= 360;\r\n            var R, G, B, X, C;\r\n            h = (h % 360) / 60;\r\n            C = b * s;\r\n            X = C * (1 - Math.abs(h % 2 - 1));\r\n            R = G = B = b - C;\r\n\r\n            h = ~~h;\r\n            R += [C, X, 0, 0, X, C][h];\r\n            G += [X, C, C, X, 0, 0][h];\r\n            B += [0, 0, X, C, C, X][h];\r\n            return {\r\n                r: Math.round(R * 255),\r\n                g: Math.round(G * 255),\r\n                b: Math.round(B * 255),\r\n                a: a || this.value.a\r\n            };\r\n        },\r\n        toHex: function(h, s, b, a) {\r\n            var rgb = this.toRGB(h, s, b, a);\r\n            if (this.rgbaIsTransparent(rgb)) {\r\n                return 'transparent';\r\n            }\r\n            return '#' + ((1 << 24) | (parseInt(rgb.r) << 16) | (parseInt(rgb.g) << 8) | parseInt(rgb.b)).toString(16).substr(1);\r\n        },\r\n        toHSL: function(h, s, b, a) {\r\n            h = h || this.value.h;\r\n            s = s || this.value.s;\r\n            b = b || this.value.b;\r\n            a = a || this.value.a;\r\n\r\n            var H = h,\r\n                L = (2 - s) * b,\r\n                S = s * b;\r\n            if (L > 0 && L <= 1) {\r\n                S /= L;\r\n            } else {\r\n                S /= 2 - L;\r\n            }\r\n            L /= 2;\r\n            if (S > 1) {\r\n                S = 1;\r\n            }\r\n            return {\r\n                h: isNaN(H) ? 0 : H,\r\n                s: isNaN(S) ? 0 : S,\r\n                l: isNaN(L) ? 0 : L,\r\n                a: isNaN(a) ? 0 : a\r\n            };\r\n        },\r\n        toAlias: function(r, g, b, a) {\r\n            var rgb = this.toHex(r, g, b, a);\r\n            for (var alias in this.colors) {\r\n                if (this.colors[alias] === rgb) {\r\n                    return alias;\r\n                }\r\n            }\r\n            return false;\r\n        },\r\n        RGBtoHSB: function(r, g, b, a) {\r\n            r /= 255;\r\n            g /= 255;\r\n            b /= 255;\r\n\r\n            var H, S, V, C;\r\n            V = Math.max(r, g, b);\r\n            C = V - Math.min(r, g, b);\r\n            H = (C === 0 ? null :\r\n                    V === r ? (g - b) / C :\r\n                        V === g ? (b - r) / C + 2 :\r\n                        (r - g) / C + 4\r\n            );\r\n            H = ((H + 360) % 6) * 60 / 360;\r\n            S = C === 0 ? 0 : C / V;\r\n            return {\r\n                h: this._sanitizeNumber(H),\r\n                s: S,\r\n                b: V,\r\n                a: this._sanitizeNumber(a)\r\n            };\r\n        },\r\n        HueToRGB: function(p, q, h) {\r\n            if (h < 0) {\r\n                h += 1;\r\n            } else if (h > 1) {\r\n                h -= 1;\r\n            }\r\n            if ((h * 6) < 1) {\r\n                return p + (q - p) * h * 6;\r\n            } else if ((h * 2) < 1) {\r\n                return q;\r\n            } else if ((h * 3) < 2) {\r\n                return p + (q - p) * ((2 / 3) - h) * 6;\r\n            } else {\r\n                return p;\r\n            }\r\n        },\r\n        HSLtoRGB: function(h, s, l, a) {\r\n            if (s < 0) {\r\n                s = 0;\r\n            }\r\n            var q;\r\n            if (l <= 0.5) {\r\n                q = l * (1 + s);\r\n            } else {\r\n                q = l + s - (l * s);\r\n            }\r\n\r\n            var p = 2 * l - q;\r\n\r\n            var tr = h + (1 / 3);\r\n            var tg = h;\r\n            var tb = h - (1 / 3);\r\n\r\n            var r = Math.round(this.HueToRGB(p, q, tr) * 255);\r\n            var g = Math.round(this.HueToRGB(p, q, tg) * 255);\r\n            var b = Math.round(this.HueToRGB(p, q, tb) * 255);\r\n            return [r, g, b, this._sanitizeNumber(a)];\r\n        },\r\n        toString: function(format) {\r\n            format = format || 'rgba';\r\n            var c = false;\r\n            switch (format) {\r\n                case 'rgb':\r\n                {\r\n                    c = this.toRGB();\r\n                    if (this.rgbaIsTransparent(c)) {\r\n                        return 'transparent';\r\n                    }\r\n                    return 'rgb(' + c.r + ',' + c.g + ',' + c.b + ')';\r\n                }\r\n                    break;\r\n                case 'rgba':\r\n                {\r\n                    c = this.toRGB();\r\n                    return 'rgba(' + c.r + ',' + c.g + ',' + c.b + ',' + c.a + ')';\r\n                }\r\n                    break;\r\n                case 'hsl':\r\n                {\r\n                    c = this.toHSL();\r\n                    return 'hsl(' + Math.round(c.h * 360) + ',' + Math.round(c.s * 100) + '%,' + Math.round(c.l * 100) + '%)';\r\n                }\r\n                    break;\r\n                case 'hsla':\r\n                {\r\n                    c = this.toHSL();\r\n                    return 'hsla(' + Math.round(c.h * 360) + ',' + Math.round(c.s * 100) + '%,' + Math.round(c.l * 100) + '%,' + c.a + ')';\r\n                }\r\n                    break;\r\n                case 'hex':\r\n                {\r\n                    return this.toHex();\r\n                }\r\n                    break;\r\n                case 'alias':\r\n                    return this.toAlias() || this.toHex();\r\n                default:\r\n                {\r\n                    return c;\r\n                }\r\n                    break;\r\n            }\r\n        },\r\n        // a set of RE's that can match strings and generate color tuples.\r\n        // from John Resig color plugin\r\n        // https://github.com/jquery/jquery-color/\r\n        stringParsers: [{\r\n            re: /rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*?\\)/,\r\n            format: 'rgb',\r\n            parse: function(execResult) {\r\n                return [\r\n                    execResult[1],\r\n                    execResult[2],\r\n                    execResult[3],\r\n                    1\r\n                ];\r\n            }\r\n        }, {\r\n            re: /rgb\\(\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*?\\)/,\r\n            format: 'rgb',\r\n            parse: function(execResult) {\r\n                return [\r\n                    2.55 * execResult[1],\r\n                    2.55 * execResult[2],\r\n                    2.55 * execResult[3],\r\n                    1\r\n                ];\r\n            }\r\n        }, {\r\n            re: /rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*(?:,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)/,\r\n            format: 'rgba',\r\n            parse: function(execResult) {\r\n                return [\r\n                    execResult[1],\r\n                    execResult[2],\r\n                    execResult[3],\r\n                    execResult[4]\r\n                ];\r\n            }\r\n        }, {\r\n            re: /rgba\\(\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)/,\r\n            format: 'rgba',\r\n            parse: function(execResult) {\r\n                return [\r\n                    2.55 * execResult[1],\r\n                    2.55 * execResult[2],\r\n                    2.55 * execResult[3],\r\n                    execResult[4]\r\n                ];\r\n            }\r\n        }, {\r\n            re: /hsl\\(\\s*(\\d+(?:\\.\\d+)?)\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*?\\)/,\r\n            format: 'hsl',\r\n            parse: function(execResult) {\r\n                return [\r\n                    execResult[1] / 360,\r\n                    execResult[2] / 100,\r\n                    execResult[3] / 100,\r\n                    execResult[4]\r\n                ];\r\n            }\r\n        }, {\r\n            re: /hsla\\(\\s*(\\d+(?:\\.\\d+)?)\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)/,\r\n            format: 'hsla',\r\n            parse: function(execResult) {\r\n                return [\r\n                    execResult[1] / 360,\r\n                    execResult[2] / 100,\r\n                    execResult[3] / 100,\r\n                    execResult[4]\r\n                ];\r\n            }\r\n        }, {\r\n            re: /#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,\r\n            format: 'hex',\r\n            parse: function(execResult) {\r\n                return [\r\n                    parseInt(execResult[1], 16),\r\n                    parseInt(execResult[2], 16),\r\n                    parseInt(execResult[3], 16),\r\n                    1\r\n                ];\r\n            }\r\n        }, {\r\n            re: /#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,\r\n            format: 'hex',\r\n            parse: function(execResult) {\r\n                return [\r\n                    parseInt(execResult[1] + execResult[1], 16),\r\n                    parseInt(execResult[2] + execResult[2], 16),\r\n                    parseInt(execResult[3] + execResult[3], 16),\r\n                    1\r\n                ];\r\n            }\r\n        }],\r\n        colorNameToHex: function(name) {\r\n            if (typeof this.colors[name.toLowerCase()] !== 'undefined') {\r\n                return this.colors[name.toLowerCase()];\r\n            }\r\n            return false;\r\n        }\r\n    };\r\n\r\n\r\n    var defaults = {\r\n        horizontal: false, // horizontal mode layout ?\r\n        inline: false, //forces to show the colorpicker as an inline element\r\n        color: false, //forces a color\r\n        format: false, //forces a format\r\n        input: 'input', // children input selector\r\n        container: false, // container selector\r\n        component: '.add-on, .input-group-addon', // children component selector\r\n        sliders: {\r\n            saturation: {\r\n                maxLeft: 100,\r\n                maxTop: 100,\r\n                callLeft: 'setSaturation',\r\n                callTop: 'setBrightness'\r\n            },\r\n            hue: {\r\n                maxLeft: 0,\r\n                maxTop: 100,\r\n                callLeft: false,\r\n                callTop: 'setHue'\r\n            },\r\n            alpha: {\r\n                maxLeft: 0,\r\n                maxTop: 100,\r\n                callLeft: false,\r\n                callTop: 'setAlpha'\r\n            }\r\n        },\r\n        slidersHorz: {\r\n            saturation: {\r\n                maxLeft: 100,\r\n                maxTop: 100,\r\n                callLeft: 'setSaturation',\r\n                callTop: 'setBrightness'\r\n            },\r\n            hue: {\r\n                maxLeft: 100,\r\n                maxTop: 0,\r\n                callLeft: 'setHue',\r\n                callTop: false\r\n            },\r\n            alpha: {\r\n                maxLeft: 100,\r\n                maxTop: 0,\r\n                callLeft: 'setAlpha',\r\n                callTop: false\r\n            }\r\n        },\r\n        template: '<div class=\"colorpicker dropdown-menu\">' +\r\n        '<div class=\"colorpicker-saturation\"><i><b></b></i></div>' +\r\n        '<div class=\"colorpicker-hue\"><i></i></div>' +\r\n        '<div class=\"colorpicker-alpha\"><i></i></div>' +\r\n        '<div class=\"colorpicker-color\"><div /></div>' +\r\n        '<div class=\"colorpicker-selectors\"></div>' +\r\n        '</div>',\r\n        align: 'right',\r\n        customClass: null,\r\n        colorSelectors: null\r\n    };\r\n\r\n    var Colorpicker = function(element, options) {\r\n        this.element = $(element).addClass('colorpicker-element');\r\n        this.options = $.extend(true, {}, defaults, this.element.data(), options);\r\n        this.component = this.options.component;\r\n        this.component = (this.component !== false) ? this.element.find(this.component) : false;\r\n        if (this.component && (this.component.length === 0)) {\r\n            this.component = false;\r\n        }\r\n        this.container = (this.options.container === true) ? this.element : this.options.container;\r\n        this.container = (this.container !== false) ? $(this.container) : false;\r\n\r\n        // Is the element an input? Should we search inside for any input?\r\n        this.input = this.element.is('input') ? this.element : (this.options.input ?\r\n            this.element.find(this.options.input) : false);\r\n        if (this.input && (this.input.length === 0)) {\r\n            this.input = false;\r\n        }\r\n        // Set HSB color\r\n        this.color = new Color(this.options.color !== false ? this.options.color : this.getValue(), this.options.colorSelectors);\r\n        this.format = this.options.format !== false ? this.options.format : this.color.origFormat;\r\n\r\n        // Setup picker\r\n        this.picker = $(this.options.template);\r\n        if (this.options.customClass) {\r\n            this.picker.addClass(this.options.customClass);\r\n        }\r\n        if (this.options.inline) {\r\n            this.picker.addClass('colorpicker-inline colorpicker-visible');\r\n        } else {\r\n            this.picker.addClass('colorpicker-hidden');\r\n        }\r\n        if (this.options.horizontal) {\r\n            this.picker.addClass('colorpicker-horizontal');\r\n        }\r\n        if (this.format === 'rgba' || this.format === 'hsla' || this.options.format === false) {\r\n            this.picker.addClass('colorpicker-with-alpha');\r\n        }\r\n        if (this.options.align === 'right') {\r\n            this.picker.addClass('colorpicker-right');\r\n        }\r\n        if (this.options.colorSelectors) {\r\n            var colorpicker = this;\r\n            $.each(this.options.colorSelectors, function(name, color) {\r\n                var $btn = $('<i />').css('background-color', color).data('class', name);\r\n                $btn.click(function() {\r\n                    colorpicker.setValue($(this).css('background-color'));\r\n                });\r\n                colorpicker.picker.find('.colorpicker-selectors').append($btn);\r\n            });\r\n            this.picker.find('.colorpicker-selectors').show();\r\n        }\r\n        this.picker.on('mousedown.colorpicker touchstart.colorpicker', $.proxy(this.mousedown, this));\r\n        this.picker.appendTo(this.container ? this.container : $('body'));\r\n\r\n        // Bind events\r\n        if (this.input !== false) {\r\n            this.input.on({\r\n                'keyup.colorpicker': $.proxy(this.keyup, this)\r\n            });\r\n            this.input.on({\r\n                'change.colorpicker': $.proxy(this.change, this)\r\n            });\r\n            if (this.component === false) {\r\n                this.element.on({\r\n                    'focus.colorpicker': $.proxy(this.show, this)\r\n                });\r\n            }\r\n            if (this.options.inline === false) {\r\n                this.element.on({\r\n                    'focusout.colorpicker': $.proxy(this.hide, this)\r\n                });\r\n            }\r\n        }\r\n\r\n        if (this.component !== false) {\r\n            this.component.on({\r\n                'click.colorpicker': $.proxy(this.show, this)\r\n            });\r\n        }\r\n\r\n        if ((this.input === false) && (this.component === false)) {\r\n            this.element.on({\r\n                'click.colorpicker': $.proxy(this.show, this)\r\n            });\r\n        }\r\n\r\n        // for HTML5 input[type='color']\r\n        if ((this.input !== false) && (this.component !== false) && (this.input.attr('type') === 'color')) {\r\n\r\n            this.input.on({\r\n                'click.colorpicker': $.proxy(this.show, this),\r\n                'focus.colorpicker': $.proxy(this.show, this)\r\n            });\r\n        }\r\n        this.update();\r\n\r\n        $($.proxy(function() {\r\n            this.element.trigger('create');\r\n        }, this));\r\n    };\r\n\r\n    Colorpicker.Color = Color;\r\n\r\n    Colorpicker.prototype = {\r\n        constructor: Colorpicker,\r\n        destroy: function() {\r\n            this.picker.remove();\r\n            this.element.removeData('colorpicker').off('.colorpicker');\r\n            if (this.input !== false) {\r\n                this.input.off('.colorpicker');\r\n            }\r\n            if (this.component !== false) {\r\n                this.component.off('.colorpicker');\r\n            }\r\n            this.element.removeClass('colorpicker-element');\r\n            this.element.trigger({\r\n                type: 'destroy'\r\n            });\r\n        },\r\n        reposition: function() {\r\n            if (this.options.inline !== false || this.options.container) {\r\n                return false;\r\n            }\r\n            var type = this.container && this.container[0] !== document.body ? 'position' : 'offset';\r\n            var element = this.component || this.element;\r\n            var offset = element[type]();\r\n            if (this.options.align === 'right') {\r\n                offset.left -= this.picker.outerWidth() - element.outerWidth();\r\n            }\r\n            this.picker.css({\r\n                top: offset.top + element.outerHeight(),\r\n                left: offset.left\r\n            });\r\n        },\r\n        show: function(e) {\r\n            if (this.isDisabled()) {\r\n                return false;\r\n            }\r\n            this.picker.addClass('colorpicker-visible').removeClass('colorpicker-hidden');\r\n            this.reposition();\r\n            $(window).on('resize.colorpicker', $.proxy(this.reposition, this));\r\n            if (e && (!this.hasInput() || this.input.attr('type') === 'color')) {\r\n                if (e.stopPropagation && e.preventDefault) {\r\n                    e.stopPropagation();\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n            if (this.options.inline === false) {\r\n                $(window.document).on({\r\n                    'mousedown.colorpicker': $.proxy(this.hide, this)\r\n                });\r\n            }\r\n            this.element.trigger({\r\n                type: 'showPicker',\r\n                color: this.color\r\n            });\r\n        },\r\n        hide: function() {\r\n            this.picker.addClass('colorpicker-hidden').removeClass('colorpicker-visible');\r\n            $(window).off('resize.colorpicker', this.reposition);\r\n            $(document).off({\r\n                'mousedown.colorpicker': this.hide\r\n            });\r\n            this.update();\r\n            this.element.trigger({\r\n                type: 'hidePicker',\r\n                color: this.color\r\n            });\r\n        },\r\n        updateData: function(val) {\r\n            val = val || this.color.toString(this.format);\r\n            this.element.data('color', val);\r\n            return val;\r\n        },\r\n        updateInput: function(val) {\r\n            val = val || this.color.toString(this.format);\r\n            if (this.input !== false) {\r\n                if (this.options.colorSelectors) {\r\n                    var color = new Color(val, this.options.colorSelectors);\r\n                    var alias = color.toAlias();\r\n                    if (typeof this.options.colorSelectors[alias] !== 'undefined') {\r\n                        val = alias;\r\n                    }\r\n                }\r\n                this.input.prop('value', val);\r\n            }\r\n            return val;\r\n        },\r\n        updatePicker: function(val) {\r\n            if (val !== undefined) {\r\n                this.color = new Color(val, this.options.colorSelectors);\r\n            }\r\n            var sl = (this.options.horizontal === false) ? this.options.sliders : this.options.slidersHorz;\r\n            var icns = this.picker.find('i');\r\n            if (icns.length === 0) {\r\n                return;\r\n            }\r\n            if (this.options.horizontal === false) {\r\n                sl = this.options.sliders;\r\n                icns.eq(1).css('top', sl.hue.maxTop * (1 - this.color.value.h)).end()\r\n                    .eq(2).css('top', sl.alpha.maxTop * (1 - this.color.value.a));\r\n            } else {\r\n                sl = this.options.slidersHorz;\r\n                icns.eq(1).css('left', sl.hue.maxLeft * (1 - this.color.value.h)).end()\r\n                    .eq(2).css('left', sl.alpha.maxLeft * (1 - this.color.value.a));\r\n            }\r\n            icns.eq(0).css({\r\n                'top': sl.saturation.maxTop - this.color.value.b * sl.saturation.maxTop,\r\n                'left': this.color.value.s * sl.saturation.maxLeft\r\n            });\r\n            this.picker.find('.colorpicker-saturation').css('backgroundColor', this.color.toHex(this.color.value.h, 1, 1, 1));\r\n            this.picker.find('.colorpicker-alpha').css('backgroundColor', this.color.toHex());\r\n            this.picker.find('.colorpicker-color, .colorpicker-color div').css('backgroundColor', this.color.toString(this.format));\r\n            return val;\r\n        },\r\n        updateComponent: function(val) {\r\n            val = val || this.color.toString(this.format);\r\n            if (this.component !== false) {\r\n                var icn = this.component.find('i').eq(0);\r\n                if (icn.length > 0) {\r\n                    icn.css({\r\n                        'backgroundColor': val\r\n                    });\r\n                } else {\r\n                    this.component.css({\r\n                        'backgroundColor': val\r\n                    });\r\n                }\r\n            }\r\n            return val;\r\n        },\r\n        update: function(force) {\r\n            var val;\r\n            if ((this.getValue(false) !== false) || (force === true)) {\r\n                // Update input/data only if the current value is not empty\r\n                val = this.updateComponent();\r\n                this.updateInput(val);\r\n                this.updateData(val);\r\n                this.updatePicker(); // only update picker if value is not empty\r\n            }\r\n            return val;\r\n\r\n        },\r\n        setValue: function(val) { // set color manually\r\n            this.color = new Color(val, this.options.colorSelectors);\r\n            this.update(true);\r\n            this.element.trigger({\r\n                type: 'changeColor',\r\n                color: this.color,\r\n                value: val\r\n            });\r\n        },\r\n        getValue: function(defaultValue) {\r\n            defaultValue = (defaultValue === undefined) ? '#000000' : defaultValue;\r\n            var val;\r\n            if (this.hasInput()) {\r\n                val = this.input.val();\r\n            } else {\r\n                val = this.element.data('color');\r\n            }\r\n            if ((val === undefined) || (val === '') || (val === null)) {\r\n                // if not defined or empty, return default\r\n                val = defaultValue;\r\n            }\r\n            return val;\r\n        },\r\n        hasInput: function() {\r\n            return (this.input !== false);\r\n        },\r\n        isDisabled: function() {\r\n            if (this.hasInput()) {\r\n                return (this.input.prop('disabled') === true);\r\n            }\r\n            return false;\r\n        },\r\n        disable: function() {\r\n            if (this.hasInput()) {\r\n                this.input.prop('disabled', true);\r\n                this.element.trigger({\r\n                    type: 'disable',\r\n                    color: this.color,\r\n                    value: this.getValue()\r\n                });\r\n                return true;\r\n            }\r\n            return false;\r\n        },\r\n        enable: function() {\r\n            if (this.hasInput()) {\r\n                this.input.prop('disabled', false);\r\n                this.element.trigger({\r\n                    type: 'enable',\r\n                    color: this.color,\r\n                    value: this.getValue()\r\n                });\r\n                return true;\r\n            }\r\n            return false;\r\n        },\r\n        currentSlider: null,\r\n        mousePointer: {\r\n            left: 0,\r\n            top: 0\r\n        },\r\n        mousedown: function(e) {\r\n            if (!e.pageX && !e.pageY && e.originalEvent) {\r\n                e.pageX = e.originalEvent.touches[0].pageX;\r\n                e.pageY = e.originalEvent.touches[0].pageY;\r\n            }\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n\r\n            var target = $(e.target);\r\n\r\n            //detect the slider and set the limits and callbacks\r\n            var zone = target.closest('div');\r\n            var sl = this.options.horizontal ? this.options.slidersHorz : this.options.sliders;\r\n            if (!zone.is('.colorpicker')) {\r\n                if (zone.is('.colorpicker-saturation')) {\r\n                    this.currentSlider = $.extend({}, sl.saturation);\r\n                } else if (zone.is('.colorpicker-hue')) {\r\n                    this.currentSlider = $.extend({}, sl.hue);\r\n                } else if (zone.is('.colorpicker-alpha')) {\r\n                    this.currentSlider = $.extend({}, sl.alpha);\r\n                } else {\r\n                    return false;\r\n                }\r\n                var offset = zone.offset();\r\n                //reference to guide's style\r\n                this.currentSlider.guide = zone.find('i')[0].style;\r\n                this.currentSlider.left = e.pageX - offset.left;\r\n                this.currentSlider.top = e.pageY - offset.top;\r\n                this.mousePointer = {\r\n                    left: e.pageX,\r\n                    top: e.pageY\r\n                };\r\n                //trigger mousemove to move the guide to the current position\r\n                $(document).on({\r\n                    'mousemove.colorpicker': $.proxy(this.mousemove, this),\r\n                    'touchmove.colorpicker': $.proxy(this.mousemove, this),\r\n                    'mouseup.colorpicker': $.proxy(this.mouseup, this),\r\n                    'touchend.colorpicker': $.proxy(this.mouseup, this)\r\n                }).trigger('mousemove');\r\n            }\r\n            return false;\r\n        },\r\n        mousemove: function(e) {\r\n            if (!e.pageX && !e.pageY && e.originalEvent) {\r\n                e.pageX = e.originalEvent.touches[0].pageX;\r\n                e.pageY = e.originalEvent.touches[0].pageY;\r\n            }\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            var left = Math.max(\r\n                0,\r\n                Math.min(\r\n                    this.currentSlider.maxLeft,\r\n                    this.currentSlider.left + ((e.pageX || this.mousePointer.left) - this.mousePointer.left)\r\n                )\r\n            );\r\n            var top = Math.max(\r\n                0,\r\n                Math.min(\r\n                    this.currentSlider.maxTop,\r\n                    this.currentSlider.top + ((e.pageY || this.mousePointer.top) - this.mousePointer.top)\r\n                )\r\n            );\r\n            this.currentSlider.guide.left = left + 'px';\r\n            this.currentSlider.guide.top = top + 'px';\r\n            if (this.currentSlider.callLeft) {\r\n                this.color[this.currentSlider.callLeft].call(this.color, left / this.currentSlider.maxLeft);\r\n            }\r\n            if (this.currentSlider.callTop) {\r\n                this.color[this.currentSlider.callTop].call(this.color, top / this.currentSlider.maxTop);\r\n            }\r\n            // Change format dynamically\r\n            // Only occurs if user choose the dynamic format by\r\n            // setting option format to false\r\n            if (this.currentSlider.callTop === 'setAlpha' && this.options.format === false) {\r\n\r\n                // Converting from hex / rgb to rgba\r\n                if (this.color.value.a !== 1) {\r\n                    this.format = 'rgba';\r\n                    this.color.origFormat = 'rgba';\r\n                }\r\n\r\n                // Converting from rgba to hex\r\n                else {\r\n                    this.format = 'hex';\r\n                    this.color.origFormat = 'hex';\r\n                }\r\n            }\r\n            this.update(true);\r\n\r\n            this.element.trigger({\r\n                type: 'changeColor',\r\n                color: this.color\r\n            });\r\n            return false;\r\n        },\r\n        mouseup: function(e) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            $(document).off({\r\n                'mousemove.colorpicker': this.mousemove,\r\n                'touchmove.colorpicker': this.mousemove,\r\n                'mouseup.colorpicker': this.mouseup,\r\n                'touchend.colorpicker': this.mouseup\r\n            });\r\n            return false;\r\n        },\r\n        change: function(e) {\r\n            this.keyup(e);\r\n        },\r\n        keyup: function(e) {\r\n            if ((e.keyCode === 38)) {\r\n                if (this.color.value.a < 1) {\r\n                    this.color.value.a = Math.round((this.color.value.a + 0.01) * 100) / 100;\r\n                }\r\n                this.update(true);\r\n            } else if ((e.keyCode === 40)) {\r\n                if (this.color.value.a > 0) {\r\n                    this.color.value.a = Math.round((this.color.value.a - 0.01) * 100) / 100;\r\n                }\r\n                this.update(true);\r\n            } else {\r\n                this.color = new Color(this.input.val(), this.options.colorSelectors);\r\n                // Change format dynamically\r\n                // Only occurs if user choose the dynamic format by\r\n                // setting option format to false\r\n                if (this.color.origFormat && this.options.format === false) {\r\n                    this.format = this.color.origFormat;\r\n                }\r\n                if (this.getValue(false) !== false) {\r\n                    this.updateData();\r\n                    this.updateComponent();\r\n                    this.updatePicker();\r\n                }\r\n            }\r\n            this.element.trigger({\r\n                type: 'changeColor',\r\n                color: this.color,\r\n                value: this.input.val()\r\n            });\r\n        }\r\n    };\r\n\r\n    $.colorpicker = Colorpicker;\r\n\r\n    $.fn.colorpicker = function(option) {\r\n        var pickerArgs = arguments,\r\n            rv;\r\n\r\n        var $returnValue = this.each(function() {\r\n            var $this = $(this),\r\n                inst = $this.data('colorpicker'),\r\n                options = ((typeof option === 'object') ? option : {});\r\n            if ((!inst) && (typeof option !== 'string')) {\r\n                $this.data('colorpicker', new Colorpicker(this, options));\r\n            } else {\r\n                if (typeof option === 'string') {\r\n                    rv = inst[option].apply(inst, Array.prototype.slice.call(pickerArgs, 1));\r\n                }\r\n            }\r\n        });\r\n        if (option === 'getValue') {\r\n            return rv;\r\n        }\r\n        return $returnValue;\r\n    };\r\n\r\n    $.fn.colorpicker.constructor = Colorpicker;\r\n\r\n}));","/**\n * sifter.js\n * Copyright (c) 2013 Brian Reavis & contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n * @author Brian Reavis <brian@thirdroute.com>\n */\n\n(function(root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('sifter', factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory();\n    } else {\n        root.Sifter = factory();\n    }\n}(this, function() {\n\n    /**\n     * Textually searches arrays and hashes of objects\n     * by property (or multiple properties). Designed\n     * specifically for autocomplete.\n     *\n     * @constructor\n     * @param {array|object} items\n     * @param {object} items\n     */\n    var Sifter = function(items, settings) {\n        this.items = items;\n        this.settings = settings || {diacritics: true};\n    };\n\n    /**\n     * Splits a search string into an array of individual\n     * regexps to be used to match results.\n     *\n     * @param {string} query\n     * @returns {array}\n     */\n    Sifter.prototype.tokenize = function(query) {\n        query = trim(String(query || '').toLowerCase());\n        if (!query || !query.length) return [];\n\n        var i, n, regex, letter;\n        var tokens = [];\n        var words = query.split(/ +/);\n\n        for (i = 0, n = words.length; i < n; i++) {\n            regex = escape_regex(words[i]);\n            if (this.settings.diacritics) {\n                for (letter in DIACRITICS) {\n                    if (DIACRITICS.hasOwnProperty(letter)) {\n                        regex = regex.replace(new RegExp(letter, 'g'), DIACRITICS[letter]);\n                    }\n                }\n            }\n            tokens.push({\n                string : words[i],\n                regex  : new RegExp(regex, 'i')\n            });\n        }\n\n        return tokens;\n    };\n\n    /**\n     * Iterates over arrays and hashes.\n     *\n     * ```\n     * this.iterator(this.items, function(item, id) {\n\t *    // invoked for each item\n\t * });\n     * ```\n     *\n     * @param {array|object} object\n     */\n    Sifter.prototype.iterator = function(object, callback) {\n        var iterator;\n        if (is_array(object)) {\n            iterator = Array.prototype.forEach || function(callback) {\n                    for (var i = 0, n = this.length; i < n; i++) {\n                        callback(this[i], i, this);\n                    }\n                };\n        } else {\n            iterator = function(callback) {\n                for (var key in this) {\n                    if (this.hasOwnProperty(key)) {\n                        callback(this[key], key, this);\n                    }\n                }\n            };\n        }\n\n        iterator.apply(object, [callback]);\n    };\n\n    /**\n     * Returns a function to be used to score individual results.\n     *\n     * Good matches will have a higher score than poor matches.\n     * If an item is not a match, 0 will be returned by the function.\n     *\n     * @param {object|string} search\n     * @param {object} options (optional)\n     * @returns {function}\n     */\n    Sifter.prototype.getScoreFunction = function(search, options) {\n        var self, fields, tokens, token_count;\n\n        self        = this;\n        search      = self.prepareSearch(search, options);\n        tokens      = search.tokens;\n        fields      = search.options.fields;\n        token_count = tokens.length;\n\n        /**\n         * Calculates how close of a match the\n         * given value is against a search token.\n         *\n         * @param {mixed} value\n         * @param {object} token\n         * @return {number}\n         */\n        var scoreValue = function(value, token) {\n            var score, pos;\n\n            if (!value) return 0;\n            value = String(value || '');\n            pos = value.search(token.regex);\n            if (pos === -1) return 0;\n            score = token.string.length / value.length;\n            if (pos === 0) score += 0.5;\n            return score;\n        };\n\n        /**\n         * Calculates the score of an object\n         * against the search query.\n         *\n         * @param {object} token\n         * @param {object} data\n         * @return {number}\n         */\n        var scoreObject = (function() {\n            var field_count = fields.length;\n            if (!field_count) {\n                return function() { return 0; };\n            }\n            if (field_count === 1) {\n                return function(token, data) {\n                    return scoreValue(data[fields[0]], token);\n                };\n            }\n            return function(token, data) {\n                for (var i = 0, sum = 0; i < field_count; i++) {\n                    sum += scoreValue(data[fields[i]], token);\n                }\n                return sum / field_count;\n            };\n        })();\n\n        if (!token_count) {\n            return function() { return 0; };\n        }\n        if (token_count === 1) {\n            return function(data) {\n                return scoreObject(tokens[0], data);\n            };\n        }\n\n        if (search.options.conjunction === 'and') {\n            return function(data) {\n                var score;\n                for (var i = 0, sum = 0; i < token_count; i++) {\n                    score = scoreObject(tokens[i], data);\n                    if (score <= 0) return 0;\n                    sum += score;\n                }\n                return sum / token_count;\n            };\n        } else {\n            return function(data) {\n                for (var i = 0, sum = 0; i < token_count; i++) {\n                    sum += scoreObject(tokens[i], data);\n                }\n                return sum / token_count;\n            };\n        }\n    };\n\n    /**\n     * Returns a function that can be used to compare two\n     * results, for sorting purposes. If no sorting should\n     * be performed, `null` will be returned.\n     *\n     * @param {string|object} search\n     * @param {object} options\n     * @return function(a,b)\n     */\n    Sifter.prototype.getSortFunction = function(search, options) {\n        var i, n, self, field, fields, fields_count, multiplier, multipliers, get_field, implicit_score, sort;\n\n        self   = this;\n        search = self.prepareSearch(search, options);\n        sort   = (!search.query && options.sort_empty) || options.sort;\n\n        /**\n         * Fetches the specified sort field value\n         * from a search result item.\n         *\n         * @param  {string} name\n         * @param  {object} result\n         * @return {mixed}\n         */\n        get_field = function(name, result) {\n            if (name === '$score') return result.score;\n            return self.items[result.id][name];\n        };\n\n        // parse options\n        fields = [];\n        if (sort) {\n            for (i = 0, n = sort.length; i < n; i++) {\n                if (search.query || sort[i].field !== '$score') {\n                    fields.push(sort[i]);\n                }\n            }\n        }\n\n        // the \"$score\" field is implied to be the primary\n        // sort field, unless it's manually specified\n        if (search.query) {\n            implicit_score = true;\n            for (i = 0, n = fields.length; i < n; i++) {\n                if (fields[i].field === '$score') {\n                    implicit_score = false;\n                    break;\n                }\n            }\n            if (implicit_score) {\n                fields.unshift({field: '$score', direction: 'desc'});\n            }\n        } else {\n            for (i = 0, n = fields.length; i < n; i++) {\n                if (fields[i].field === '$score') {\n                    fields.splice(i, 1);\n                    break;\n                }\n            }\n        }\n\n        multipliers = [];\n        for (i = 0, n = fields.length; i < n; i++) {\n            multipliers.push(fields[i].direction === 'desc' ? -1 : 1);\n        }\n\n        // build function\n        fields_count = fields.length;\n        if (!fields_count) {\n            return null;\n        } else if (fields_count === 1) {\n            field = fields[0].field;\n            multiplier = multipliers[0];\n            return function(a, b) {\n                return multiplier * cmp(\n                        get_field(field, a),\n                        get_field(field, b)\n                    );\n            };\n        } else {\n            return function(a, b) {\n                var i, result, a_value, b_value, field;\n                for (i = 0; i < fields_count; i++) {\n                    field = fields[i].field;\n                    result = multipliers[i] * cmp(\n                            get_field(field, a),\n                            get_field(field, b)\n                        );\n                    if (result) return result;\n                }\n                return 0;\n            };\n        }\n    };\n\n    /**\n     * Parses a search query and returns an object\n     * with tokens and fields ready to be populated\n     * with results.\n     *\n     * @param {string} query\n     * @param {object} options\n     * @returns {object}\n     */\n    Sifter.prototype.prepareSearch = function(query, options) {\n        if (typeof query === 'object') return query;\n\n        options = extend({}, options);\n\n        var option_fields     = options.fields;\n        var option_sort       = options.sort;\n        var option_sort_empty = options.sort_empty;\n\n        if (option_fields && !is_array(option_fields)) options.fields = [option_fields];\n        if (option_sort && !is_array(option_sort)) options.sort = [option_sort];\n        if (option_sort_empty && !is_array(option_sort_empty)) options.sort_empty = [option_sort_empty];\n\n        return {\n            options : options,\n            query   : String(query || '').toLowerCase(),\n            tokens  : this.tokenize(query),\n            total   : 0,\n            items   : []\n        };\n    };\n\n    /**\n     * Searches through all items and returns a sorted array of matches.\n     *\n     * The `options` parameter can contain:\n     *\n     *   - fields {string|array}\n     *   - sort {array}\n     *   - score {function}\n     *   - filter {bool}\n     *   - limit {integer}\n     *\n     * Returns an object containing:\n     *\n     *   - options {object}\n     *   - query {string}\n     *   - tokens {array}\n     *   - total {int}\n     *   - items {array}\n     *\n     * @param {string} query\n     * @param {object} options\n     * @returns {object}\n     */\n    Sifter.prototype.search = function(query, options) {\n        var self = this, value, score, search, calculateScore;\n        var fn_sort;\n        var fn_score;\n\n        search  = this.prepareSearch(query, options);\n        options = search.options;\n        query   = search.query;\n\n        // generate result scoring function\n        fn_score = options.score || self.getScoreFunction(search);\n\n        // perform search and sort\n        if (query.length) {\n            self.iterator(self.items, function(item, id) {\n                score = fn_score(item);\n                if (options.filter === false || score > 0) {\n                    search.items.push({'score': score, 'id': id});\n                }\n            });\n        } else {\n            self.iterator(self.items, function(item, id) {\n                search.items.push({'score': 1, 'id': id});\n            });\n        }\n\n        fn_sort = self.getSortFunction(search, options);\n        if (fn_sort) search.items.sort(fn_sort);\n\n        // apply limits\n        search.total = search.items.length;\n        if (typeof options.limit === 'number') {\n            search.items = search.items.slice(0, options.limit);\n        }\n\n        return search;\n    };\n\n    // utilities\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n    var cmp = function(a, b) {\n        if (typeof a === 'number' && typeof b === 'number') {\n            return a > b ? 1 : (a < b ? -1 : 0);\n        }\n        a = asciifold(String(a || ''));\n        b = asciifold(String(b || ''));\n        if (a > b) return 1;\n        if (b > a) return -1;\n        return 0;\n    };\n\n    var extend = function(a, b) {\n        var i, n, k, object;\n        for (i = 1, n = arguments.length; i < n; i++) {\n            object = arguments[i];\n            if (!object) continue;\n            for (k in object) {\n                if (object.hasOwnProperty(k)) {\n                    a[k] = object[k];\n                }\n            }\n        }\n        return a;\n    };\n\n    var trim = function(str) {\n        return (str + '').replace(/^\\s+|\\s+$|/g, '');\n    };\n\n    var escape_regex = function(str) {\n        return (str + '').replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\n    };\n\n    var is_array = Array.isArray || ($ && $.isArray) || function(object) {\n            return Object.prototype.toString.call(object) === '[object Array]';\n        };\n\n    var DIACRITICS = {\n        'a': '[a]',\n        'c': '[c]',\n        'd': '[d]',\n        'e': '[e]',\n        'i': '[i]',\n        'l': '[l]',\n        'n': '[n]',\n        'o': '[o]',\n        'r': '[r]',\n        's': '[s]',\n        't': '[t]',\n        'u': '[u]',\n        'y': '[y]',\n        'z': '[z]'\n    };\n\n    var asciifold = (function() {\n        var i, n, k, chunk;\n        var foreignletters = '';\n        var lookup = {};\n        for (k in DIACRITICS) {\n            if (DIACRITICS.hasOwnProperty(k)) {\n                chunk = DIACRITICS[k].substring(2, DIACRITICS[k].length - 1);\n                foreignletters += chunk;\n                for (i = 0, n = chunk.length; i < n; i++) {\n                    lookup[chunk.charAt(i)] = k;\n                }\n            }\n        }\n        var regexp = new RegExp('[' +  foreignletters + ']', 'g');\n        return function(str) {\n            return str.replace(regexp, function(foreignletter) {\n                return lookup[foreignletter];\n            }).toLowerCase();\n        };\n    })();\n\n\n    // export\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n    return Sifter;\n}));\n\n\n\n/**\n * microplugin.js\n * Copyright (c) 2013 Brian Reavis & contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n * @author Brian Reavis <brian@thirdroute.com>\n */\n\n(function(root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('microplugin', factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory();\n    } else {\n        root.MicroPlugin = factory();\n    }\n}(this, function() {\n    var MicroPlugin = {};\n\n    MicroPlugin.mixin = function(Interface) {\n        Interface.plugins = {};\n\n        /**\n         * Initializes the listed plugins (with options).\n         * Acceptable formats:\n         *\n         * List (without options):\n         *   ['a', 'b', 'c']\n         *\n         * List (with options):\n         *   [{'name': 'a', options: {}}, {'name': 'b', options: {}}]\n         *\n         * Hash (with options):\n         *   {'a': { ... }, 'b': { ... }, 'c': { ... }}\n         *\n         * @param {mixed} plugins\n         */\n        Interface.prototype.initializePlugins = function(plugins) {\n            var i, n, key;\n            var self  = this;\n            var queue = [];\n\n            self.plugins = {\n                names     : [],\n                settings  : {},\n                requested : {},\n                loaded    : {}\n            };\n\n            if (utils.isArray(plugins)) {\n                for (i = 0, n = plugins.length; i < n; i++) {\n                    if (typeof plugins[i] === 'string') {\n                        queue.push(plugins[i]);\n                    } else {\n                        self.plugins.settings[plugins[i].name] = plugins[i].options;\n                        queue.push(plugins[i].name);\n                    }\n                }\n            } else if (plugins) {\n                for (key in plugins) {\n                    if (plugins.hasOwnProperty(key)) {\n                        self.plugins.settings[key] = plugins[key];\n                        queue.push(key);\n                    }\n                }\n            }\n\n            while (queue.length) {\n                self.require(queue.shift());\n            }\n        };\n\n        Interface.prototype.loadPlugin = function(name) {\n            var self    = this;\n            var plugins = self.plugins;\n            var plugin  = Interface.plugins[name];\n\n            if (!Interface.plugins.hasOwnProperty(name)) {\n                throw new Error('Unable to find \"' +  name + '\" plugin');\n            }\n\n            plugins.requested[name] = true;\n            plugins.loaded[name] = plugin.fn.apply(self, [self.plugins.settings[name] || {}]);\n            plugins.names.push(name);\n        };\n\n        /**\n         * Initializes a plugin.\n         *\n         * @param {string} name\n         */\n        Interface.prototype.require = function(name) {\n            var self = this;\n            var plugins = self.plugins;\n\n            if (!self.plugins.loaded.hasOwnProperty(name)) {\n                if (plugins.requested[name]) {\n                    throw new Error('Plugin has circular dependency (\"' + name + '\")');\n                }\n                self.loadPlugin(name);\n            }\n\n            return plugins.loaded[name];\n        };\n\n        /**\n         * Registers a plugin.\n         *\n         * @param {string} name\n         * @param {function} fn\n         */\n        Interface.define = function(name, fn) {\n            Interface.plugins[name] = {\n                'name' : name,\n                'fn'   : fn\n            };\n        };\n    };\n\n    var utils = {\n        isArray: Array.isArray || function(vArg) {\n            return Object.prototype.toString.call(vArg) === '[object Array]';\n        }\n    };\n\n    return MicroPlugin;\n}));\n\n/**\n * selectize.js (v0.12.1)\n * Copyright (c) 20132015 Brian Reavis & contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n * @author Brian Reavis <brian@thirdroute.com>\n */\n\n/*jshint curly:false */\n/*jshint browser:true */\n\n(function(root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('selectize', ['jquery','sifter','microplugin'], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory(require('jquery'), require('sifter'), require('microplugin'));\n    } else {\n        root.Selectize = factory(root.jQuery, root.Sifter, root.MicroPlugin);\n    }\n}(this, function($, Sifter, MicroPlugin) {\n    'use strict';\n\n    var highlight = function($element, pattern) {\n        if (typeof pattern === 'string' && !pattern.length) return;\n        var regex = (typeof pattern === 'string') ? new RegExp(pattern, 'i') : pattern;\n\n        var highlight = function(node) {\n            var skip = 0;\n            if (node.nodeType === 3) {\n                var pos = node.data.search(regex);\n                if (pos >= 0 && node.data.length > 0) {\n                    var match = node.data.match(regex);\n                    var spannode = document.createElement('span');\n                    spannode.className = 'highlight';\n                    var middlebit = node.splitText(pos);\n                    var endbit = middlebit.splitText(match[0].length);\n                    var middleclone = middlebit.cloneNode(true);\n                    spannode.appendChild(middleclone);\n                    middlebit.parentNode.replaceChild(spannode, middlebit);\n                    skip = 1;\n                }\n            } else if (node.nodeType === 1 && node.childNodes && !/(script|style)/i.test(node.tagName)) {\n                for (var i = 0; i < node.childNodes.length; ++i) {\n                    i += highlight(node.childNodes[i]);\n                }\n            }\n            return skip;\n        };\n\n        return $element.each(function() {\n            highlight(this);\n        });\n    };\n\n    var MicroEvent = function() {};\n    MicroEvent.prototype = {\n        on: function(event, fct){\n            this._events = this._events || {};\n            this._events[event] = this._events[event] || [];\n            this._events[event].push(fct);\n        },\n        off: function(event, fct){\n            var n = arguments.length;\n            if (n === 0) return delete this._events;\n            if (n === 1) return delete this._events[event];\n\n            this._events = this._events || {};\n            if (event in this._events === false) return;\n            this._events[event].splice(this._events[event].indexOf(fct), 1);\n        },\n        trigger: function(event /* , args... */){\n            this._events = this._events || {};\n            if (event in this._events === false) return;\n            for (var i = 0; i < this._events[event].length; i++){\n                this._events[event][i].apply(this, Array.prototype.slice.call(arguments, 1));\n            }\n        }\n    };\n\n    /**\n     * Mixin will delegate all MicroEvent.js function in the destination object.\n     *\n     * - MicroEvent.mixin(Foobar) will make Foobar able to use MicroEvent\n     *\n     * @param {object} the object which will support MicroEvent\n     */\n    MicroEvent.mixin = function(destObject){\n        var props = ['on', 'off', 'trigger'];\n        for (var i = 0; i < props.length; i++){\n            destObject.prototype[props[i]] = MicroEvent.prototype[props[i]];\n        }\n    };\n\n    var IS_MAC        = /Mac/.test(navigator.userAgent);\n\n    var KEY_A         = 65;\n    var KEY_COMMA     = 188;\n    var KEY_RETURN    = 13;\n    var KEY_ESC       = 27;\n    var KEY_LEFT      = 37;\n    var KEY_UP        = 38;\n    var KEY_P         = 80;\n    var KEY_RIGHT     = 39;\n    var KEY_DOWN      = 40;\n    var KEY_N         = 78;\n    var KEY_BACKSPACE = 8;\n    var KEY_DELETE    = 46;\n    var KEY_SHIFT     = 16;\n    var KEY_CMD       = IS_MAC ? 91 : 17;\n    var KEY_CTRL      = IS_MAC ? 18 : 17;\n    var KEY_TAB       = 9;\n\n    var TAG_SELECT    = 1;\n    var TAG_INPUT     = 2;\n\n    // for now, android support in general is too spotty to support validity\n    var SUPPORTS_VALIDITY_API = !/android/i.test(window.navigator.userAgent) && !!document.createElement('form').validity;\n\n    var isset = function(object) {\n        return typeof object !== 'undefined';\n    };\n\n    /**\n     * Converts a scalar to its best string representation\n     * for hash keys and HTML attribute values.\n     *\n     * Transformations:\n     *   'str'     -> 'str'\n     *   null      -> ''\n     *   undefined -> ''\n     *   true      -> '1'\n     *   false     -> '0'\n     *   0         -> '0'\n     *   1         -> '1'\n     *\n     * @param {string} value\n     * @returns {string|null}\n     */\n    var hash_key = function(value) {\n        if (typeof value === 'undefined' || value === null) return null;\n        if (typeof value === 'boolean') return value ? '1' : '0';\n        return value + '';\n    };\n\n    /**\n     * Escapes a string for use within HTML.\n     *\n     * @param {string} str\n     * @returns {string}\n     */\n    var escape_html = function(str) {\n        return (str + '')\n            .replace(/&/g, '&amp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;')\n            .replace(/\"/g, '&quot;');\n    };\n\n    /**\n     * Escapes \"$\" characters in replacement strings.\n     *\n     * @param {string} str\n     * @returns {string}\n     */\n    var escape_replace = function(str) {\n        return (str + '').replace(/\\$/g, '$$$$');\n    };\n\n    var hook = {};\n\n    /**\n     * Wraps `method` on `self` so that `fn`\n     * is invoked before the original method.\n     *\n     * @param {object} self\n     * @param {string} method\n     * @param {function} fn\n     */\n    hook.before = function(self, method, fn) {\n        var original = self[method];\n        self[method] = function() {\n            fn.apply(self, arguments);\n            return original.apply(self, arguments);\n        };\n    };\n\n    /**\n     * Wraps `method` on `self` so that `fn`\n     * is invoked after the original method.\n     *\n     * @param {object} self\n     * @param {string} method\n     * @param {function} fn\n     */\n    hook.after = function(self, method, fn) {\n        var original = self[method];\n        self[method] = function() {\n            var result = original.apply(self, arguments);\n            fn.apply(self, arguments);\n            return result;\n        };\n    };\n\n    /**\n     * Wraps `fn` so that it can only be invoked once.\n     *\n     * @param {function} fn\n     * @returns {function}\n     */\n    var once = function(fn) {\n        var called = false;\n        return function() {\n            if (called) return;\n            called = true;\n            fn.apply(this, arguments);\n        };\n    };\n\n    /**\n     * Wraps `fn` so that it can only be called once\n     * every `delay` milliseconds (invoked on the falling edge).\n     *\n     * @param {function} fn\n     * @param {int} delay\n     * @returns {function}\n     */\n    var debounce = function(fn, delay) {\n        var timeout;\n        return function() {\n            var self = this;\n            var args = arguments;\n            window.clearTimeout(timeout);\n            timeout = window.setTimeout(function() {\n                fn.apply(self, args);\n            }, delay);\n        };\n    };\n\n    /**\n     * Debounce all fired events types listed in `types`\n     * while executing the provided `fn`.\n     *\n     * @param {object} self\n     * @param {array} types\n     * @param {function} fn\n     */\n    var debounce_events = function(self, types, fn) {\n        var type;\n        var trigger = self.trigger;\n        var event_args = {};\n\n        // override trigger method\n        self.trigger = function() {\n            var type = arguments[0];\n            if (types.indexOf(type) !== -1) {\n                event_args[type] = arguments;\n            } else {\n                return trigger.apply(self, arguments);\n            }\n        };\n\n        // invoke provided function\n        fn.apply(self, []);\n        self.trigger = trigger;\n\n        // trigger queued events\n        for (type in event_args) {\n            if (event_args.hasOwnProperty(type)) {\n                trigger.apply(self, event_args[type]);\n            }\n        }\n    };\n\n    /**\n     * A workaround for http://bugs.jquery.com/ticket/6696\n     *\n     * @param {object} $parent - Parent element to listen on.\n     * @param {string} event - Event name.\n     * @param {string} selector - Descendant selector to filter by.\n     * @param {function} fn - Event handler.\n     */\n    var watchChildEvent = function($parent, event, selector, fn) {\n        $parent.on(event, selector, function(e) {\n            var child = e.target;\n            while (child && child.parentNode !== $parent[0]) {\n                child = child.parentNode;\n            }\n            e.currentTarget = child;\n            return fn.apply(this, [e]);\n        });\n    };\n\n    /**\n     * Determines the current selection within a text input control.\n     * Returns an object containing:\n     *   - start\n     *   - length\n     *\n     * @param {object} input\n     * @returns {object}\n     */\n    var getSelection = function(input) {\n        var result = {};\n        if ('selectionStart' in input) {\n            result.start = input.selectionStart;\n            result.length = input.selectionEnd - result.start;\n        } else if (document.selection) {\n            input.focus();\n            var sel = document.selection.createRange();\n            var selLen = document.selection.createRange().text.length;\n            sel.moveStart('character', -input.value.length);\n            result.start = sel.text.length - selLen;\n            result.length = selLen;\n        }\n        return result;\n    };\n\n    /**\n     * Copies CSS properties from one element to another.\n     *\n     * @param {object} $from\n     * @param {object} $to\n     * @param {array} properties\n     */\n    var transferStyles = function($from, $to, properties) {\n        var i, n, styles = {};\n        if (properties) {\n            for (i = 0, n = properties.length; i < n; i++) {\n                styles[properties[i]] = $from.css(properties[i]);\n            }\n        } else {\n            styles = $from.css();\n        }\n        $to.css(styles);\n    };\n\n    /**\n     * Measures the width of a string within a\n     * parent element (in pixels).\n     *\n     * @param {string} str\n     * @param {object} $parent\n     * @returns {int}\n     */\n    var measureString = function(str, $parent) {\n        if (!str) {\n            return 0;\n        }\n\n        var $test = $('<test>').css({\n            position: 'absolute',\n            top: -99999,\n            left: -99999,\n            width: 'auto',\n            padding: 0,\n            whiteSpace: 'pre'\n        }).text(str).appendTo('body');\n\n        transferStyles($parent, $test, [\n            'letterSpacing',\n            'fontSize',\n            'fontFamily',\n            'fontWeight',\n            'textTransform'\n        ]);\n\n        var width = $test.width();\n        $test.remove();\n\n        return width;\n    };\n\n    /**\n     * Sets up an input to grow horizontally as the user\n     * types. If the value is changed manually, you can\n     * trigger the \"update\" handler to resize:\n     *\n     * $input.trigger('update');\n     *\n     * @param {object} $input\n     */\n    var autoGrow = function($input) {\n        var currentWidth = null;\n\n        var update = function(e, options) {\n            var value, keyCode, printable, placeholder, width;\n            var shift, character, selection;\n            e = e || window.event || {};\n            options = options || {};\n\n            if (e.metaKey || e.altKey) return;\n            if (!options.force && $input.data('grow') === false) return;\n\n            value = $input.val();\n            if (e.type && e.type.toLowerCase() === 'keydown') {\n                keyCode = e.keyCode;\n                printable = (\n                    (keyCode >= 97 && keyCode <= 122) || // a-z\n                    (keyCode >= 65 && keyCode <= 90)  || // A-Z\n                    (keyCode >= 48 && keyCode <= 57)  || // 0-9\n                    keyCode === 32 // space\n                );\n\n                if (keyCode === KEY_DELETE || keyCode === KEY_BACKSPACE) {\n                    selection = getSelection($input[0]);\n                    if (selection.length) {\n                        value = value.substring(0, selection.start) + value.substring(selection.start + selection.length);\n                    } else if (keyCode === KEY_BACKSPACE && selection.start) {\n                        value = value.substring(0, selection.start - 1) + value.substring(selection.start + 1);\n                    } else if (keyCode === KEY_DELETE && typeof selection.start !== 'undefined') {\n                        value = value.substring(0, selection.start) + value.substring(selection.start + 1);\n                    }\n                } else if (printable) {\n                    shift = e.shiftKey;\n                    character = String.fromCharCode(e.keyCode);\n                    if (shift) character = character.toUpperCase();\n                    else character = character.toLowerCase();\n                    value += character;\n                }\n            }\n\n            placeholder = $input.attr('placeholder');\n            if (!value && placeholder) {\n                value = placeholder;\n            }\n\n            width = measureString(value, $input) + 4;\n            if (width !== currentWidth) {\n                currentWidth = width;\n                $input.width(width);\n                $input.triggerHandler('resize');\n            }\n        };\n\n        $input.on('keydown keyup update blur', update);\n        update();\n    };\n\n    var Selectize = function($input, settings) {\n        var key, i, n, dir, input, self = this;\n        input = $input[0];\n        input.selectize = self;\n\n        // detect rtl environment\n        var computedStyle = window.getComputedStyle && window.getComputedStyle(input, null);\n        dir = computedStyle ? computedStyle.getPropertyValue('direction') : input.currentStyle && input.currentStyle.direction;\n        dir = dir || $input.parents('[dir]:first').attr('dir') || '';\n\n        // setup default state\n        $.extend(self, {\n            order            : 0,\n            settings         : settings,\n            $input           : $input,\n            tabIndex         : $input.attr('tabindex') || '',\n            tagType          : input.tagName.toLowerCase() === 'select' ? TAG_SELECT : TAG_INPUT,\n            rtl              : /rtl/i.test(dir),\n\n            eventNS          : '.selectize' + (++Selectize.count),\n            highlightedValue : null,\n            isOpen           : false,\n            isDisabled       : false,\n            isRequired       : $input.is('[required]'),\n            isInvalid        : false,\n            isLocked         : false,\n            isFocused        : false,\n            isInputHidden    : false,\n            isSetup          : false,\n            isShiftDown      : false,\n            isCmdDown        : false,\n            isCtrlDown       : false,\n            ignoreFocus      : false,\n            ignoreBlur       : false,\n            ignoreHover      : false,\n            hasOptions       : false,\n            currentResults   : null,\n            lastValue        : '',\n            caretPos         : 0,\n            loading          : 0,\n            loadedSearches   : {},\n\n            $activeOption    : null,\n            $activeItems     : [],\n\n            optgroups        : {},\n            options          : {},\n            userOptions      : {},\n            items            : [],\n            renderCache      : {},\n            onSearchChange   : settings.loadThrottle === null ? self.onSearchChange : debounce(self.onSearchChange, settings.loadThrottle)\n        });\n\n        // search system\n        self.sifter = new Sifter(this.options, {diacritics: settings.diacritics});\n\n        // build options table\n        if (self.settings.options) {\n            for (i = 0, n = self.settings.options.length; i < n; i++) {\n                self.registerOption(self.settings.options[i]);\n            }\n            delete self.settings.options;\n        }\n\n        // build optgroup table\n        if (self.settings.optgroups) {\n            for (i = 0, n = self.settings.optgroups.length; i < n; i++) {\n                self.registerOptionGroup(self.settings.optgroups[i]);\n            }\n            delete self.settings.optgroups;\n        }\n\n        // option-dependent defaults\n        self.settings.mode = self.settings.mode || (self.settings.maxItems === 1 ? 'single' : 'multi');\n        if (typeof self.settings.hideSelected !== 'boolean') {\n            self.settings.hideSelected = self.settings.mode === 'multi';\n        }\n\n        self.initializePlugins(self.settings.plugins);\n        self.setupCallbacks();\n        self.setupTemplates();\n        self.setup();\n    };\n\n    // mixins\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n    MicroEvent.mixin(Selectize);\n    MicroPlugin.mixin(Selectize);\n\n    // methods\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n    $.extend(Selectize.prototype, {\n\n        /**\n         * Creates all elements and sets up event bindings.\n         */\n        setup: function() {\n            var self      = this;\n            var settings  = self.settings;\n            var eventNS   = self.eventNS;\n            var $window   = $(window);\n            var $document = $(document);\n            var $input    = self.$input;\n\n            var $wrapper;\n            var $control;\n            var $control_input;\n            var $dropdown;\n            var $dropdown_content;\n            var $dropdown_parent;\n            var inputMode;\n            var timeout_blur;\n            var timeout_focus;\n            var classes;\n            var classes_plugins;\n\n            inputMode         = self.settings.mode;\n            classes           = $input.attr('class') || '';\n\n            $wrapper          = $('<div>').addClass(settings.wrapperClass).addClass(classes).addClass(inputMode);\n            $control          = $('<div>').addClass(settings.inputClass).addClass('items').appendTo($wrapper);\n            $control_input    = $('<input type=\"text\" autocomplete=\"off\" />').appendTo($control).attr('tabindex', $input.is(':disabled') ? '-1' : self.tabIndex);\n            $dropdown_parent  = $(settings.dropdownParent || $wrapper);\n            $dropdown         = $('<div>').addClass(settings.dropdownClass).addClass(inputMode).hide().appendTo($dropdown_parent);\n            $dropdown_content = $('<div>').addClass(settings.dropdownContentClass).appendTo($dropdown);\n\n            if(self.settings.copyClassesToDropdown) {\n                $dropdown.addClass(classes);\n            }\n\n            $wrapper.css({\n                width: $input[0].style.width\n            });\n\n            if (self.plugins.names.length) {\n                classes_plugins = 'plugin-' + self.plugins.names.join(' plugin-');\n                $wrapper.addClass(classes_plugins);\n                $dropdown.addClass(classes_plugins);\n            }\n\n            if ((settings.maxItems === null || settings.maxItems > 1) && self.tagType === TAG_SELECT) {\n                $input.attr('multiple', 'multiple');\n            }\n\n            if (self.settings.placeholder) {\n                $control_input.attr('placeholder', settings.placeholder);\n            }\n\n            // if splitOn was not passed in, construct it from the delimiter to allow pasting universally\n            if (!self.settings.splitOn && self.settings.delimiter) {\n                var delimiterEscaped = self.settings.delimiter.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n                self.settings.splitOn = new RegExp('\\\\s*' + delimiterEscaped + '+\\\\s*');\n            }\n\n            if ($input.attr('autocorrect')) {\n                $control_input.attr('autocorrect', $input.attr('autocorrect'));\n            }\n\n            if ($input.attr('autocapitalize')) {\n                $control_input.attr('autocapitalize', $input.attr('autocapitalize'));\n            }\n\n            self.$wrapper          = $wrapper;\n            self.$control          = $control;\n            self.$control_input    = $control_input;\n            self.$dropdown         = $dropdown;\n            self.$dropdown_content = $dropdown_content;\n\n            $dropdown.on('mouseenter', '[data-selectable]', function() { return self.onOptionHover.apply(self, arguments); });\n            $dropdown.on('mousedown click', '[data-selectable]', function() { return self.onOptionSelect.apply(self, arguments); });\n            watchChildEvent($control, 'mousedown', '*:not(input)', function() { return self.onItemSelect.apply(self, arguments); });\n            autoGrow($control_input);\n\n            $control.on({\n                mousedown : function() { return self.onMouseDown.apply(self, arguments); },\n                click     : function() { return self.onClick.apply(self, arguments); }\n            });\n\n            $control_input.on({\n                mousedown : function(e) { e.stopPropagation(); },\n                keydown   : function() { return self.onKeyDown.apply(self, arguments); },\n                keyup     : function() { return self.onKeyUp.apply(self, arguments); },\n                keypress  : function() { return self.onKeyPress.apply(self, arguments); },\n                resize    : function() { self.positionDropdown.apply(self, []); },\n                blur      : function() { return self.onBlur.apply(self, arguments); },\n                focus     : function() { self.ignoreBlur = false; return self.onFocus.apply(self, arguments); },\n                paste     : function() { return self.onPaste.apply(self, arguments); }\n            });\n\n            $document.on('keydown' + eventNS, function(e) {\n                self.isCmdDown = e[IS_MAC ? 'metaKey' : 'ctrlKey'];\n                self.isCtrlDown = e[IS_MAC ? 'altKey' : 'ctrlKey'];\n                self.isShiftDown = e.shiftKey;\n            });\n\n            $document.on('keyup' + eventNS, function(e) {\n                if (e.keyCode === KEY_CTRL) self.isCtrlDown = false;\n                if (e.keyCode === KEY_SHIFT) self.isShiftDown = false;\n                if (e.keyCode === KEY_CMD) self.isCmdDown = false;\n            });\n\n            $document.on('mousedown' + eventNS, function(e) {\n                if (self.isFocused) {\n                    // prevent events on the dropdown scrollbar from causing the control to blur\n                    if (e.target === self.$dropdown[0] || e.target.parentNode === self.$dropdown[0]) {\n                        return false;\n                    }\n                    // blur on click outside\n                    if (!self.$control.has(e.target).length && e.target !== self.$control[0]) {\n                        self.blur(e.target);\n                    }\n                }\n            });\n\n            $window.on(['scroll' + eventNS, 'resize' + eventNS].join(' '), function() {\n                if (self.isOpen) {\n                    self.positionDropdown.apply(self, arguments);\n                }\n            });\n            $window.on('mousemove' + eventNS, function() {\n                self.ignoreHover = false;\n            });\n\n            // store original children and tab index so that they can be\n            // restored when the destroy() method is called.\n            this.revertSettings = {\n                $children : $input.children().detach(),\n                tabindex  : $input.attr('tabindex')\n            };\n\n            $input.attr('tabindex', -1).hide().after(self.$wrapper);\n\n            if ($.isArray(settings.items)) {\n                self.setValue(settings.items);\n                delete settings.items;\n            }\n\n            // feature detect for the validation API\n            if (SUPPORTS_VALIDITY_API) {\n                $input.on('invalid' + eventNS, function(e) {\n                    e.preventDefault();\n                    self.isInvalid = true;\n                    self.refreshState();\n                });\n            }\n\n            self.updateOriginalInput();\n            self.refreshItems();\n            self.refreshState();\n            self.updatePlaceholder();\n            self.isSetup = true;\n\n            if ($input.is(':disabled')) {\n                self.disable();\n            }\n\n            self.on('change', this.onChange);\n\n            $input.data('selectize', self);\n            $input.addClass('selectized');\n            self.trigger('initialize');\n\n            // preload options\n            if (settings.preload === true) {\n                self.onSearchChange('');\n            }\n\n        },\n\n        /**\n         * Sets up default rendering functions.\n         */\n        setupTemplates: function() {\n            var self = this;\n            var field_label = self.settings.labelField;\n            var field_optgroup = self.settings.optgroupLabelField;\n\n            var templates = {\n                'optgroup': function(data) {\n                    return '<div class=\"optgroup\">' + data.html + '</div>';\n                },\n                'optgroup_header': function(data, escape) {\n                    return '<div class=\"optgroup-header\">' + escape(data[field_optgroup]) + '</div>';\n                },\n                'option': function(data, escape) {\n                    return '<div class=\"option\">' + escape(data[field_label]) + '</div>';\n                },\n                'item': function(data, escape) {\n                    return '<div class=\"item\">' + escape(data[field_label]) + '</div>';\n                },\n                'option_create': function(data, escape) {\n                    return '<div class=\"create\">Add <strong>' + escape(data.input) + '</strong>&hellip;</div>';\n                }\n            };\n\n            self.settings.render = $.extend({}, templates, self.settings.render);\n        },\n\n        /**\n         * Maps fired events to callbacks provided\n         * in the settings used when creating the control.\n         */\n        setupCallbacks: function() {\n            var key, fn, callbacks = {\n                'initialize'      : 'onInitialize',\n                'change'          : 'onChange',\n                'item_add'        : 'onItemAdd',\n                'item_remove'     : 'onItemRemove',\n                'clear'           : 'onClear',\n                'option_add'      : 'onOptionAdd',\n                'option_remove'   : 'onOptionRemove',\n                'option_clear'    : 'onOptionClear',\n                'optgroup_add'    : 'onOptionGroupAdd',\n                'optgroup_remove' : 'onOptionGroupRemove',\n                'optgroup_clear'  : 'onOptionGroupClear',\n                'dropdown_open'   : 'onDropdownOpen',\n                'dropdown_close'  : 'onDropdownClose',\n                'type'            : 'onType',\n                'load'            : 'onLoad',\n                'focus'           : 'onFocus',\n                'blur'            : 'onBlur'\n            };\n\n            for (key in callbacks) {\n                if (callbacks.hasOwnProperty(key)) {\n                    fn = this.settings[callbacks[key]];\n                    if (fn) this.on(key, fn);\n                }\n            }\n        },\n\n        /**\n         * Triggered when the main control element\n         * has a click event.\n         *\n         * @param {object} e\n         * @return {boolean}\n         */\n        onClick: function(e) {\n            var self = this;\n\n            // necessary for mobile webkit devices (manual focus triggering\n            // is ignored unless invoked within a click event)\n            if (!self.isFocused) {\n                self.focus();\n                e.preventDefault();\n            }\n        },\n\n        /**\n         * Triggered when the main control element\n         * has a mouse down event.\n         *\n         * @param {object} e\n         * @return {boolean}\n         */\n        onMouseDown: function(e) {\n            var self = this;\n            var defaultPrevented = e.isDefaultPrevented();\n            var $target = $(e.target);\n\n            if (self.isFocused) {\n                // retain focus by preventing native handling. if the\n                // event target is the input it should not be modified.\n                // otherwise, text selection within the input won't work.\n                if (e.target !== self.$control_input[0]) {\n                    if (self.settings.mode === 'single') {\n                        // toggle dropdown\n                        self.isOpen ? self.close() : self.open();\n                    } else if (!defaultPrevented) {\n                        self.setActiveItem(null);\n                    }\n                    return false;\n                }\n            } else {\n                // give control focus\n                if (!defaultPrevented) {\n                    window.setTimeout(function() {\n                        self.focus();\n                    }, 0);\n                }\n            }\n        },\n\n        /**\n         * Triggered when the value of the control has been changed.\n         * This should propagate the event to the original DOM\n         * input / select element.\n         */\n        onChange: function() {\n            this.$input.trigger('change');\n        },\n\n        /**\n         * Triggered on <input> paste.\n         *\n         * @param {object} e\n         * @returns {boolean}\n         */\n        onPaste: function(e) {\n            var self = this;\n            if (self.isFull() || self.isInputHidden || self.isLocked) {\n                e.preventDefault();\n            } else {\n                // If a regex or string is included, this will split the pasted\n                // input and create Items for each separate value\n                if (self.settings.splitOn) {\n                    setTimeout(function() {\n                        var splitInput = $.trim(self.$control_input.val() || '').split(self.settings.splitOn);\n                        for (var i = 0, n = splitInput.length; i < n; i++) {\n                            self.createItem(splitInput[i]);\n                        }\n                    }, 0);\n                }\n            }\n        },\n\n        /**\n         * Triggered on <input> keypress.\n         *\n         * @param {object} e\n         * @returns {boolean}\n         */\n        onKeyPress: function(e) {\n            if (this.isLocked) return e && e.preventDefault();\n            var character = String.fromCharCode(e.keyCode || e.which);\n            if (this.settings.create && this.settings.mode === 'multi' && character === this.settings.delimiter) {\n                this.createItem();\n                e.preventDefault();\n                return false;\n            }\n        },\n\n        /**\n         * Triggered on <input> keydown.\n         *\n         * @param {object} e\n         * @returns {boolean}\n         */\n        onKeyDown: function(e) {\n            var isInput = e.target === this.$control_input[0];\n            var self = this;\n\n            if (self.isLocked) {\n                if (e.keyCode !== KEY_TAB) {\n                    e.preventDefault();\n                }\n                return;\n            }\n\n            switch (e.keyCode) {\n                case KEY_A:\n                    if (self.isCmdDown) {\n                        self.selectAll();\n                        return;\n                    }\n                    break;\n                case KEY_ESC:\n                    if (self.isOpen) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        self.close();\n                    }\n                    return;\n                case KEY_N:\n                    if (!e.ctrlKey || e.altKey) break;\n                case KEY_DOWN:\n                    if (!self.isOpen && self.hasOptions) {\n                        self.open();\n                    } else if (self.$activeOption) {\n                        self.ignoreHover = true;\n                        var $next = self.getAdjacentOption(self.$activeOption, 1);\n                        if ($next.length) self.setActiveOption($next, true, true);\n                    }\n                    e.preventDefault();\n                    return;\n                case KEY_P:\n                    if (!e.ctrlKey || e.altKey) break;\n                case KEY_UP:\n                    if (self.$activeOption) {\n                        self.ignoreHover = true;\n                        var $prev = self.getAdjacentOption(self.$activeOption, -1);\n                        if ($prev.length) self.setActiveOption($prev, true, true);\n                    }\n                    e.preventDefault();\n                    return;\n                case KEY_RETURN:\n                    if (self.isOpen && self.$activeOption) {\n                        self.onOptionSelect({currentTarget: self.$activeOption});\n                        e.preventDefault();\n                    }\n                    return;\n                case KEY_LEFT:\n                    self.advanceSelection(-1, e);\n                    return;\n                case KEY_RIGHT:\n                    self.advanceSelection(1, e);\n                    return;\n                case KEY_TAB:\n                    if (self.settings.selectOnTab && self.isOpen && self.$activeOption) {\n                        self.onOptionSelect({currentTarget: self.$activeOption});\n\n                        // Default behaviour is to jump to the next field, we only want this\n                        // if the current field doesn't accept any more entries\n                        if (!self.isFull()) {\n                            e.preventDefault();\n                        }\n                    }\n                    if (self.settings.create && self.createItem()) {\n                        e.preventDefault();\n                    }\n                    return;\n                case KEY_BACKSPACE:\n                case KEY_DELETE:\n                    self.deleteSelection(e);\n                    return;\n            }\n\n            if ((self.isFull() || self.isInputHidden) && !(IS_MAC ? e.metaKey : e.ctrlKey)) {\n                e.preventDefault();\n                return;\n            }\n        },\n\n        /**\n         * Triggered on <input> keyup.\n         *\n         * @param {object} e\n         * @returns {boolean}\n         */\n        onKeyUp: function(e) {\n            var self = this;\n\n            if (self.isLocked) return e && e.preventDefault();\n            var value = self.$control_input.val() || '';\n            if (self.lastValue !== value) {\n                self.lastValue = value;\n                self.onSearchChange(value);\n                self.refreshOptions();\n                self.trigger('type', value);\n            }\n        },\n\n        /**\n         * Invokes the user-provide option provider / loader.\n         *\n         * Note: this function is debounced in the Selectize\n         * constructor (by `settings.loadDelay` milliseconds)\n         *\n         * @param {string} value\n         */\n        onSearchChange: function(value) {\n            var self = this;\n            var fn = self.settings.load;\n            if (!fn) return;\n            if (self.loadedSearches.hasOwnProperty(value)) return;\n            self.loadedSearches[value] = true;\n            self.load(function(callback) {\n                fn.apply(self, [value, callback]);\n            });\n        },\n\n        /**\n         * Triggered on <input> focus.\n         *\n         * @param {object} e (optional)\n         * @returns {boolean}\n         */\n        onFocus: function(e) {\n            var self = this;\n            var wasFocused = self.isFocused;\n\n            if (self.isDisabled) {\n                self.blur();\n                e && e.preventDefault();\n                return false;\n            }\n\n            if (self.ignoreFocus) return;\n            self.isFocused = true;\n            if (self.settings.preload === 'focus') self.onSearchChange('');\n\n            if (!wasFocused) self.trigger('focus');\n\n            if (!self.$activeItems.length) {\n                self.showInput();\n                self.setActiveItem(null);\n                self.refreshOptions(!!self.settings.openOnFocus);\n            }\n\n            self.refreshState();\n        },\n\n        /**\n         * Triggered on <input> blur.\n         *\n         * @param {object} e\n         * @param {Element} dest\n         */\n        onBlur: function(e, dest) {\n            var self = this;\n            if (!self.isFocused) return;\n            self.isFocused = false;\n\n            if (self.ignoreFocus) {\n                return;\n            } else if (!self.ignoreBlur && document.activeElement === self.$dropdown_content[0]) {\n                // necessary to prevent IE closing the dropdown when the scrollbar is clicked\n                self.ignoreBlur = true;\n                self.onFocus(e);\n                return;\n            }\n\n            var deactivate = function() {\n                self.close();\n                self.setTextboxValue('');\n                self.setActiveItem(null);\n                self.setActiveOption(null);\n                self.setCaret(self.items.length);\n                self.refreshState();\n\n                // IE11 bug: element still marked as active\n                (dest || document.body).focus();\n\n                self.ignoreFocus = false;\n                self.trigger('blur');\n            };\n\n            self.ignoreFocus = true;\n            if (self.settings.create && self.settings.createOnBlur) {\n                self.createItem(null, false, deactivate);\n            } else {\n                deactivate();\n            }\n        },\n\n        /**\n         * Triggered when the user rolls over\n         * an option in the autocomplete dropdown menu.\n         *\n         * @param {object} e\n         * @returns {boolean}\n         */\n        onOptionHover: function(e) {\n            if (this.ignoreHover) return;\n            this.setActiveOption(e.currentTarget, false);\n        },\n\n        /**\n         * Triggered when the user clicks on an option\n         * in the autocomplete dropdown menu.\n         *\n         * @param {object} e\n         * @returns {boolean}\n         */\n        onOptionSelect: function(e) {\n            var value, $target, $option, self = this;\n\n            if (e.preventDefault) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n\n            $target = $(e.currentTarget);\n            if ($target.hasClass('create')) {\n                self.createItem(null, function() {\n                    if (self.settings.closeAfterSelect) {\n                        self.close();\n                    }\n                });\n            } else {\n                value = $target.attr('data-value');\n                if (typeof value !== 'undefined') {\n                    self.lastQuery = null;\n                    self.setTextboxValue('');\n                    self.addItem(value);\n                    if (self.settings.closeAfterSelect) {\n                        self.close();\n                    } else if (!self.settings.hideSelected && e.type && /mouse/.test(e.type)) {\n                        self.setActiveOption(self.getOption(value));\n                    }\n                }\n            }\n        },\n\n        /**\n         * Triggered when the user clicks on an item\n         * that has been selected.\n         *\n         * @param {object} e\n         * @returns {boolean}\n         */\n        onItemSelect: function(e) {\n            var self = this;\n\n            if (self.isLocked) return;\n            if (self.settings.mode === 'multi') {\n                e.preventDefault();\n                self.setActiveItem(e.currentTarget, e);\n            }\n        },\n\n        /**\n         * Invokes the provided method that provides\n         * results to a callback---which are then added\n         * as options to the control.\n         *\n         * @param {function} fn\n         */\n        load: function(fn) {\n            var self = this;\n            var $wrapper = self.$wrapper.addClass(self.settings.loadingClass);\n\n            self.loading++;\n            fn.apply(self, [function(results) {\n                self.loading = Math.max(self.loading - 1, 0);\n                if (results && results.length) {\n                    self.addOption(results);\n                    self.refreshOptions(self.isFocused && !self.isInputHidden);\n                }\n                if (!self.loading) {\n                    $wrapper.removeClass(self.settings.loadingClass);\n                }\n                self.trigger('load', results);\n            }]);\n        },\n\n        /**\n         * Sets the input field of the control to the specified value.\n         *\n         * @param {string} value\n         */\n        setTextboxValue: function(value) {\n            var $input = this.$control_input;\n            var changed = $input.val() !== value;\n            if (changed) {\n                $input.val(value).triggerHandler('update');\n                this.lastValue = value;\n            }\n        },\n\n        /**\n         * Returns the value of the control. If multiple items\n         * can be selected (e.g. <select multiple>), this returns\n         * an array. If only one item can be selected, this\n         * returns a string.\n         *\n         * @returns {mixed}\n         */\n        getValue: function() {\n            if (this.tagType === TAG_SELECT && this.$input.attr('multiple')) {\n                return this.items;\n            } else {\n                return this.items.join(this.settings.delimiter);\n            }\n        },\n\n        /**\n         * Resets the selected items to the given value.\n         *\n         * @param {mixed} value\n         */\n        setValue: function(value, silent) {\n            var events = silent ? [] : ['change'];\n\n            debounce_events(this, events, function() {\n                this.clear(silent);\n                this.addItems(value, silent);\n            });\n        },\n\n        /**\n         * Sets the selected item.\n         *\n         * @param {object} $item\n         * @param {object} e (optional)\n         */\n        setActiveItem: function($item, e) {\n            var self = this;\n            var eventName;\n            var i, idx, begin, end, item, swap;\n            var $last;\n\n            if (self.settings.mode === 'single') return;\n            $item = $($item);\n\n            // clear the active selection\n            if (!$item.length) {\n                $(self.$activeItems).removeClass('active');\n                self.$activeItems = [];\n                if (self.isFocused) {\n                    self.showInput();\n                }\n                return;\n            }\n\n            // modify selection\n            eventName = e && e.type.toLowerCase();\n\n            if (eventName === 'mousedown' && self.isShiftDown && self.$activeItems.length) {\n                $last = self.$control.children('.active:last');\n                begin = Array.prototype.indexOf.apply(self.$control[0].childNodes, [$last[0]]);\n                end   = Array.prototype.indexOf.apply(self.$control[0].childNodes, [$item[0]]);\n                if (begin > end) {\n                    swap  = begin;\n                    begin = end;\n                    end   = swap;\n                }\n                for (i = begin; i <= end; i++) {\n                    item = self.$control[0].childNodes[i];\n                    if (self.$activeItems.indexOf(item) === -1) {\n                        $(item).addClass('active');\n                        self.$activeItems.push(item);\n                    }\n                }\n                e.preventDefault();\n            } else if ((eventName === 'mousedown' && self.isCtrlDown) || (eventName === 'keydown' && this.isShiftDown)) {\n                if ($item.hasClass('active')) {\n                    idx = self.$activeItems.indexOf($item[0]);\n                    self.$activeItems.splice(idx, 1);\n                    $item.removeClass('active');\n                } else {\n                    self.$activeItems.push($item.addClass('active')[0]);\n                }\n            } else {\n                $(self.$activeItems).removeClass('active');\n                self.$activeItems = [$item.addClass('active')[0]];\n            }\n\n            // ensure control has focus\n            self.hideInput();\n            if (!this.isFocused) {\n                self.focus();\n            }\n        },\n\n        /**\n         * Sets the selected item in the dropdown menu\n         * of available options.\n         *\n         * @param {object} $object\n         * @param {boolean} scroll\n         * @param {boolean} animate\n         */\n        setActiveOption: function($option, scroll, animate) {\n            var height_menu, height_item, y;\n            var scroll_top, scroll_bottom;\n            var self = this;\n\n            if (self.$activeOption) self.$activeOption.removeClass('active');\n            self.$activeOption = null;\n\n            $option = $($option);\n            if (!$option.length) return;\n\n            self.$activeOption = $option.addClass('active');\n\n            if (scroll || !isset(scroll)) {\n\n                height_menu   = self.$dropdown_content.height();\n                height_item   = self.$activeOption.outerHeight(true);\n                scroll        = self.$dropdown_content.scrollTop() || 0;\n                y             = self.$activeOption.offset().top - self.$dropdown_content.offset().top + scroll;\n                scroll_top    = y;\n                scroll_bottom = y - height_menu + height_item;\n\n                if (y + height_item > height_menu + scroll) {\n                    self.$dropdown_content.stop().animate({scrollTop: scroll_bottom}, animate ? self.settings.scrollDuration : 0);\n                } else if (y < scroll) {\n                    self.$dropdown_content.stop().animate({scrollTop: scroll_top}, animate ? self.settings.scrollDuration : 0);\n                }\n\n            }\n        },\n\n        /**\n         * Selects all items (CTRL + A).\n         */\n        selectAll: function() {\n            var self = this;\n            if (self.settings.mode === 'single') return;\n\n            self.$activeItems = Array.prototype.slice.apply(self.$control.children(':not(input)').addClass('active'));\n            if (self.$activeItems.length) {\n                self.hideInput();\n                self.close();\n            }\n            self.focus();\n        },\n\n        /**\n         * Hides the input element out of view, while\n         * retaining its focus.\n         */\n        hideInput: function() {\n            var self = this;\n\n            self.setTextboxValue('');\n            self.$control_input.css({opacity: 0, position: 'absolute', left: self.rtl ? 10000 : -10000});\n            self.isInputHidden = true;\n        },\n\n        /**\n         * Restores input visibility.\n         */\n        showInput: function() {\n            this.$control_input.css({opacity: 1, position: 'relative', left: 0});\n            this.isInputHidden = false;\n        },\n\n        /**\n         * Gives the control focus.\n         */\n        focus: function() {\n            var self = this;\n            if (self.isDisabled) return;\n\n            self.ignoreFocus = true;\n            self.$control_input[0].focus();\n            window.setTimeout(function() {\n                self.ignoreFocus = false;\n                self.onFocus();\n            }, 0);\n        },\n\n        /**\n         * Forces the control out of focus.\n         *\n         * @param {Element} dest\n         */\n        blur: function(dest) {\n            this.$control_input[0].blur();\n            this.onBlur(null, dest);\n        },\n\n        /**\n         * Returns a function that scores an object\n         * to show how good of a match it is to the\n         * provided query.\n         *\n         * @param {string} query\n         * @param {object} options\n         * @return {function}\n         */\n        getScoreFunction: function(query) {\n            return this.sifter.getScoreFunction(query, this.getSearchOptions());\n        },\n\n        /**\n         * Returns search options for sifter (the system\n         * for scoring and sorting results).\n         *\n         * @see https://github.com/brianreavis/sifter.js\n         * @return {object}\n         */\n        getSearchOptions: function() {\n            var settings = this.settings;\n            var sort = settings.sortField;\n            if (typeof sort === 'string') {\n                sort = [{field: sort}];\n            }\n\n            return {\n                fields      : settings.searchField,\n                conjunction : settings.searchConjunction,\n                sort        : sort\n            };\n        },\n\n        /**\n         * Searches through available options and returns\n         * a sorted array of matches.\n         *\n         * Returns an object containing:\n         *\n         *   - query {string}\n         *   - tokens {array}\n         *   - total {int}\n         *   - items {array}\n         *\n         * @param {string} query\n         * @returns {object}\n         */\n        search: function(query) {\n            var i, value, score, result, calculateScore;\n            var self     = this;\n            var settings = self.settings;\n            var options  = this.getSearchOptions();\n\n            // validate user-provided result scoring function\n            if (settings.score) {\n                calculateScore = self.settings.score.apply(this, [query]);\n                if (typeof calculateScore !== 'function') {\n                    throw new Error('Selectize \"score\" setting must be a function that returns a function');\n                }\n            }\n\n            // perform search\n            if (query !== self.lastQuery) {\n                self.lastQuery = query;\n                result = self.sifter.search(query, $.extend(options, {score: calculateScore}));\n                self.currentResults = result;\n            } else {\n                result = $.extend(true, {}, self.currentResults);\n            }\n\n            // filter out selected items\n            if (settings.hideSelected) {\n                for (i = result.items.length - 1; i >= 0; i--) {\n                    if (self.items.indexOf(hash_key(result.items[i].id)) !== -1) {\n                        result.items.splice(i, 1);\n                    }\n                }\n            }\n\n            return result;\n        },\n\n        /**\n         * Refreshes the list of available options shown\n         * in the autocomplete dropdown menu.\n         *\n         * @param {boolean} triggerDropdown\n         */\n        refreshOptions: function(triggerDropdown) {\n            var i, j, k, n, groups, groups_order, option, option_html, optgroup, optgroups, html, html_children, has_create_option;\n            var $active, $active_before, $create;\n\n            if (typeof triggerDropdown === 'undefined') {\n                triggerDropdown = true;\n            }\n\n            var self              = this;\n            var query             = $.trim(self.$control_input.val());\n            var results           = self.search(query);\n            var $dropdown_content = self.$dropdown_content;\n            var active_before     = self.$activeOption && hash_key(self.$activeOption.attr('data-value'));\n\n            // build markup\n            n = results.items.length;\n            if (typeof self.settings.maxOptions === 'number') {\n                n = Math.min(n, self.settings.maxOptions);\n            }\n\n            // render and group available options individually\n            groups = {};\n            groups_order = [];\n\n            for (i = 0; i < n; i++) {\n                option      = self.options[results.items[i].id];\n                option_html = self.render('option', option);\n                optgroup    = option[self.settings.optgroupField] || '';\n                optgroups   = $.isArray(optgroup) ? optgroup : [optgroup];\n\n                for (j = 0, k = optgroups && optgroups.length; j < k; j++) {\n                    optgroup = optgroups[j];\n                    if (!self.optgroups.hasOwnProperty(optgroup)) {\n                        optgroup = '';\n                    }\n                    if (!groups.hasOwnProperty(optgroup)) {\n                        groups[optgroup] = [];\n                        groups_order.push(optgroup);\n                    }\n                    groups[optgroup].push(option_html);\n                }\n            }\n\n            // sort optgroups\n            if (this.settings.lockOptgroupOrder) {\n                groups_order.sort(function(a, b) {\n                    var a_order = self.optgroups[a].$order || 0;\n                    var b_order = self.optgroups[b].$order || 0;\n                    return a_order - b_order;\n                });\n            }\n\n            // render optgroup headers & join groups\n            html = [];\n            for (i = 0, n = groups_order.length; i < n; i++) {\n                optgroup = groups_order[i];\n                if (self.optgroups.hasOwnProperty(optgroup) && groups[optgroup].length) {\n                    // render the optgroup header and options within it,\n                    // then pass it to the wrapper template\n                    html_children = self.render('optgroup_header', self.optgroups[optgroup]) || '';\n                    html_children += groups[optgroup].join('');\n                    html.push(self.render('optgroup', $.extend({}, self.optgroups[optgroup], {\n                        html: html_children\n                    })));\n                } else {\n                    html.push(groups[optgroup].join(''));\n                }\n            }\n\n            $dropdown_content.html(html.join(''));\n\n            // highlight matching terms inline\n            if (self.settings.highlight && results.query.length && results.tokens.length) {\n                for (i = 0, n = results.tokens.length; i < n; i++) {\n                    highlight($dropdown_content, results.tokens[i].regex);\n                }\n            }\n\n            // add \"selected\" class to selected options\n            if (!self.settings.hideSelected) {\n                for (i = 0, n = self.items.length; i < n; i++) {\n                    self.getOption(self.items[i]).addClass('selected');\n                }\n            }\n\n            // add create option\n            has_create_option = self.canCreate(query);\n            if (has_create_option) {\n                $dropdown_content.prepend(self.render('option_create', {input: query}));\n                $create = $($dropdown_content[0].childNodes[0]);\n            }\n\n            // activate\n            self.hasOptions = results.items.length > 0 || has_create_option;\n            if (self.hasOptions) {\n                if (results.items.length > 0) {\n                    $active_before = active_before && self.getOption(active_before);\n                    if ($active_before && $active_before.length) {\n                        $active = $active_before;\n                    } else if (self.settings.mode === 'single' && self.items.length) {\n                        $active = self.getOption(self.items[0]);\n                    }\n                    if (!$active || !$active.length) {\n                        if ($create && !self.settings.addPrecedence) {\n                            $active = self.getAdjacentOption($create, 1);\n                        } else {\n                            $active = $dropdown_content.find('[data-selectable]:first');\n                        }\n                    }\n                } else {\n                    $active = $create;\n                }\n                self.setActiveOption($active);\n                if (triggerDropdown && !self.isOpen) { self.open(); }\n            } else {\n                self.setActiveOption(null);\n                if (triggerDropdown && self.isOpen) { self.close(); }\n            }\n        },\n\n        /**\n         * Adds an available option. If it already exists,\n         * nothing will happen. Note: this does not refresh\n         * the options list dropdown (use `refreshOptions`\n         * for that).\n         *\n         * Usage:\n         *\n         *   this.addOption(data)\n         *\n         * @param {object|array} data\n         */\n        addOption: function(data) {\n            var i, n, value, self = this;\n\n            if ($.isArray(data)) {\n                for (i = 0, n = data.length; i < n; i++) {\n                    self.addOption(data[i]);\n                }\n                return;\n            }\n\n            if (value = self.registerOption(data)) {\n                self.userOptions[value] = true;\n                self.lastQuery = null;\n                self.trigger('option_add', value, data);\n            }\n        },\n\n        /**\n         * Registers an option to the pool of options.\n         *\n         * @param {object} data\n         * @return {boolean|string}\n         */\n        registerOption: function(data) {\n            var key = hash_key(data[this.settings.valueField]);\n            if (!key || this.options.hasOwnProperty(key)) return false;\n            data.$order = data.$order || ++this.order;\n            this.options[key] = data;\n            return key;\n        },\n\n        /**\n         * Registers an option group to the pool of option groups.\n         *\n         * @param {object} data\n         * @return {boolean|string}\n         */\n        registerOptionGroup: function(data) {\n            var key = hash_key(data[this.settings.optgroupValueField]);\n            if (!key) return false;\n\n            data.$order = data.$order || ++this.order;\n            this.optgroups[key] = data;\n            return key;\n        },\n\n        /**\n         * Registers a new optgroup for options\n         * to be bucketed into.\n         *\n         * @param {string} id\n         * @param {object} data\n         */\n        addOptionGroup: function(id, data) {\n            data[this.settings.optgroupValueField] = id;\n            if (id = this.registerOptionGroup(data)) {\n                this.trigger('optgroup_add', id, data);\n            }\n        },\n\n        /**\n         * Removes an existing option group.\n         *\n         * @param {string} id\n         */\n        removeOptionGroup: function(id) {\n            if (this.optgroups.hasOwnProperty(id)) {\n                delete this.optgroups[id];\n                this.renderCache = {};\n                this.trigger('optgroup_remove', id);\n            }\n        },\n\n        /**\n         * Clears all existing option groups.\n         */\n        clearOptionGroups: function() {\n            this.optgroups = {};\n            this.renderCache = {};\n            this.trigger('optgroup_clear');\n        },\n\n        /**\n         * Updates an option available for selection. If\n         * it is visible in the selected items or options\n         * dropdown, it will be re-rendered automatically.\n         *\n         * @param {string} value\n         * @param {object} data\n         */\n        updateOption: function(value, data) {\n            var self = this;\n            var $item, $item_new;\n            var value_new, index_item, cache_items, cache_options, order_old;\n\n            value     = hash_key(value);\n            value_new = hash_key(data[self.settings.valueField]);\n\n            // sanity checks\n            if (value === null) return;\n            if (!self.options.hasOwnProperty(value)) return;\n            if (typeof value_new !== 'string') throw new Error('Value must be set in option data');\n\n            order_old = self.options[value].$order;\n\n            // update references\n            if (value_new !== value) {\n                delete self.options[value];\n                index_item = self.items.indexOf(value);\n                if (index_item !== -1) {\n                    self.items.splice(index_item, 1, value_new);\n                }\n            }\n            data.$order = data.$order || order_old;\n            self.options[value_new] = data;\n\n            // invalidate render cache\n            cache_items = self.renderCache['item'];\n            cache_options = self.renderCache['option'];\n\n            if (cache_items) {\n                delete cache_items[value];\n                delete cache_items[value_new];\n            }\n            if (cache_options) {\n                delete cache_options[value];\n                delete cache_options[value_new];\n            }\n\n            // update the item if it's selected\n            if (self.items.indexOf(value_new) !== -1) {\n                $item = self.getItem(value);\n                $item_new = $(self.render('item', data));\n                if ($item.hasClass('active')) $item_new.addClass('active');\n                $item.replaceWith($item_new);\n            }\n\n            // invalidate last query because we might have updated the sortField\n            self.lastQuery = null;\n\n            // update dropdown contents\n            if (self.isOpen) {\n                self.refreshOptions(false);\n            }\n        },\n\n        /**\n         * Removes a single option.\n         *\n         * @param {string} value\n         * @param {boolean} silent\n         */\n        removeOption: function(value, silent) {\n            var self = this;\n            value = hash_key(value);\n\n            var cache_items = self.renderCache['item'];\n            var cache_options = self.renderCache['option'];\n            if (cache_items) delete cache_items[value];\n            if (cache_options) delete cache_options[value];\n\n            delete self.userOptions[value];\n            delete self.options[value];\n            self.lastQuery = null;\n            self.trigger('option_remove', value);\n            self.removeItem(value, silent);\n        },\n\n        /**\n         * Clears all options.\n         */\n        clearOptions: function() {\n            var self = this;\n\n            self.loadedSearches = {};\n            self.userOptions = {};\n            self.renderCache = {};\n            self.options = self.sifter.items = {};\n            self.lastQuery = null;\n            self.trigger('option_clear');\n            self.clear();\n        },\n\n        /**\n         * Returns the jQuery element of the option\n         * matching the given value.\n         *\n         * @param {string} value\n         * @returns {object}\n         */\n        getOption: function(value) {\n            return this.getElementWithValue(value, this.$dropdown_content.find('[data-selectable]'));\n        },\n\n        /**\n         * Returns the jQuery element of the next or\n         * previous selectable option.\n         *\n         * @param {object} $option\n         * @param {int} direction  can be 1 for next or -1 for previous\n         * @return {object}\n         */\n        getAdjacentOption: function($option, direction) {\n            var $options = this.$dropdown.find('[data-selectable]');\n            var index    = $options.index($option) + direction;\n\n            return index >= 0 && index < $options.length ? $options.eq(index) : $();\n        },\n\n        /**\n         * Finds the first element with a \"data-value\" attribute\n         * that matches the given value.\n         *\n         * @param {mixed} value\n         * @param {object} $els\n         * @return {object}\n         */\n        getElementWithValue: function(value, $els) {\n            value = hash_key(value);\n\n            if (typeof value !== 'undefined' && value !== null) {\n                for (var i = 0, n = $els.length; i < n; i++) {\n                    if ($els[i].getAttribute('data-value') === value) {\n                        return $($els[i]);\n                    }\n                }\n            }\n\n            return $();\n        },\n\n        /**\n         * Returns the jQuery element of the item\n         * matching the given value.\n         *\n         * @param {string} value\n         * @returns {object}\n         */\n        getItem: function(value) {\n            return this.getElementWithValue(value, this.$control.children());\n        },\n\n        /**\n         * \"Selects\" multiple items at once. Adds them to the list\n         * at the current caret position.\n         *\n         * @param {string} value\n         * @param {boolean} silent\n         */\n        addItems: function(values, silent) {\n            var items = $.isArray(values) ? values : [values];\n            for (var i = 0, n = items.length; i < n; i++) {\n                this.isPending = (i < n - 1);\n                this.addItem(items[i], silent);\n            }\n        },\n\n        /**\n         * \"Selects\" an item. Adds it to the list\n         * at the current caret position.\n         *\n         * @param {string} value\n         * @param {boolean} silent\n         */\n        addItem: function(value, silent) {\n            var events = silent ? [] : ['change'];\n\n            debounce_events(this, events, function() {\n                var $item, $option, $options;\n                var self = this;\n                var inputMode = self.settings.mode;\n                var i, active, value_next, wasFull;\n                value = hash_key(value);\n\n                if (self.items.indexOf(value) !== -1) {\n                    if (inputMode === 'single') self.close();\n                    return;\n                }\n\n                if (!self.options.hasOwnProperty(value)) return;\n                if (inputMode === 'single') self.clear(silent);\n                if (inputMode === 'multi' && self.isFull()) return;\n\n                $item = $(self.render('item', self.options[value]));\n                wasFull = self.isFull();\n                self.items.splice(self.caretPos, 0, value);\n                self.insertAtCaret($item);\n                if (!self.isPending || (!wasFull && self.isFull())) {\n                    self.refreshState();\n                }\n\n                if (self.isSetup) {\n                    $options = self.$dropdown_content.find('[data-selectable]');\n\n                    // update menu / remove the option (if this is not one item being added as part of series)\n                    if (!self.isPending) {\n                        $option = self.getOption(value);\n                        value_next = self.getAdjacentOption($option, 1).attr('data-value');\n                        self.refreshOptions(self.isFocused && inputMode !== 'single');\n                        if (value_next) {\n                            self.setActiveOption(self.getOption(value_next));\n                        }\n                    }\n\n                    // hide the menu if the maximum number of items have been selected or no options are left\n                    if (!$options.length || self.isFull()) {\n                        self.close();\n                    } else {\n                        self.positionDropdown();\n                    }\n\n                    self.updatePlaceholder();\n                    self.trigger('item_add', value, $item);\n                    self.updateOriginalInput({silent: silent});\n                }\n            });\n        },\n\n        /**\n         * Removes the selected item matching\n         * the provided value.\n         *\n         * @param {string} value\n         */\n        removeItem: function(value, silent) {\n            var self = this;\n            var $item, i, idx;\n\n            $item = (typeof value === 'object') ? value : self.getItem(value);\n            value = hash_key($item.attr('data-value'));\n            i = self.items.indexOf(value);\n\n            if (i !== -1) {\n                $item.remove();\n                if ($item.hasClass('active')) {\n                    idx = self.$activeItems.indexOf($item[0]);\n                    self.$activeItems.splice(idx, 1);\n                }\n\n                self.items.splice(i, 1);\n                self.lastQuery = null;\n                if (!self.settings.persist && self.userOptions.hasOwnProperty(value)) {\n                    self.removeOption(value, silent);\n                }\n\n                if (i < self.caretPos) {\n                    self.setCaret(self.caretPos - 1);\n                }\n\n                self.refreshState();\n                self.updatePlaceholder();\n                self.updateOriginalInput({silent: silent});\n                self.positionDropdown();\n                self.trigger('item_remove', value, $item);\n            }\n        },\n\n        /**\n         * Invokes the `create` method provided in the\n         * selectize options that should provide the data\n         * for the new item, given the user input.\n         *\n         * Once this completes, it will be added\n         * to the item list.\n         *\n         * @param {string} value\n         * @param {boolean} [triggerDropdown]\n         * @param {function} [callback]\n         * @return {boolean}\n         */\n        createItem: function(input, triggerDropdown) {\n            var self  = this;\n            var caret = self.caretPos;\n            input = input || $.trim(self.$control_input.val() || '');\n\n            var callback = arguments[arguments.length - 1];\n            if (typeof callback !== 'function') callback = function() {};\n\n            if (typeof triggerDropdown !== 'boolean') {\n                triggerDropdown = true;\n            }\n\n            if (!self.canCreate(input)) {\n                callback();\n                return false;\n            }\n\n            self.lock();\n\n            var setup = (typeof self.settings.create === 'function') ? this.settings.create : function(input) {\n                var data = {};\n                data[self.settings.labelField] = input;\n                data[self.settings.valueField] = input;\n                return data;\n            };\n\n            var create = once(function(data) {\n                self.unlock();\n\n                if (!data || typeof data !== 'object') return callback();\n                var value = hash_key(data[self.settings.valueField]);\n                if (typeof value !== 'string') return callback();\n\n                self.setTextboxValue('');\n                self.addOption(data);\n                self.setCaret(caret);\n                self.addItem(value);\n                self.refreshOptions(triggerDropdown && self.settings.mode !== 'single');\n                callback(data);\n            });\n\n            var output = setup.apply(this, [input, create]);\n            if (typeof output !== 'undefined') {\n                create(output);\n            }\n\n            return true;\n        },\n\n        /**\n         * Re-renders the selected item lists.\n         */\n        refreshItems: function() {\n            this.lastQuery = null;\n\n            if (this.isSetup) {\n                this.addItem(this.items);\n            }\n\n            this.refreshState();\n            this.updateOriginalInput();\n        },\n\n        /**\n         * Updates all state-dependent attributes\n         * and CSS classes.\n         */\n        refreshState: function() {\n            var invalid, self = this;\n            if (self.isRequired) {\n                if (self.items.length) self.isInvalid = false;\n                self.$control_input.prop('required', invalid);\n            }\n            self.refreshClasses();\n        },\n\n        /**\n         * Updates all state-dependent CSS classes.\n         */\n        refreshClasses: function() {\n            var self     = this;\n            var isFull   = self.isFull();\n            var isLocked = self.isLocked;\n\n            self.$wrapper\n                .toggleClass('rtl', self.rtl);\n\n            self.$control\n                .toggleClass('focus', self.isFocused)\n                .toggleClass('disabled', self.isDisabled)\n                .toggleClass('required', self.isRequired)\n                .toggleClass('invalid', self.isInvalid)\n                .toggleClass('locked', isLocked)\n                .toggleClass('full', isFull).toggleClass('not-full', !isFull)\n                .toggleClass('input-active', self.isFocused && !self.isInputHidden)\n                .toggleClass('dropdown-active', self.isOpen)\n                .toggleClass('has-options', !$.isEmptyObject(self.options))\n                .toggleClass('has-items', self.items.length > 0);\n\n            self.$control_input.data('grow', !isFull && !isLocked);\n        },\n\n        /**\n         * Determines whether or not more items can be added\n         * to the control without exceeding the user-defined maximum.\n         *\n         * @returns {boolean}\n         */\n        isFull: function() {\n            return this.settings.maxItems !== null && this.items.length >= this.settings.maxItems;\n        },\n\n        /**\n         * Refreshes the original <select> or <input>\n         * element to reflect the current state.\n         */\n        updateOriginalInput: function(opts) {\n            var i, n, options, label, self = this;\n            opts = opts || {};\n\n            if (self.tagType === TAG_SELECT) {\n                options = [];\n                for (i = 0, n = self.items.length; i < n; i++) {\n                    label = self.options[self.items[i]][self.settings.labelField] || '';\n                    options.push('<option value=\"' + escape_html(self.items[i]) + '\" selected=\"selected\">' + escape_html(label) + '</option>');\n                }\n                if (!options.length && !this.$input.attr('multiple')) {\n                    options.push('<option value=\"\" selected=\"selected\"></option>');\n                }\n                self.$input.html(options.join(''));\n            } else {\n                self.$input.val(self.getValue());\n                self.$input.attr('value',self.$input.val());\n            }\n\n            if (self.isSetup) {\n                if (!opts.silent) {\n                    self.trigger('change', self.$input.val());\n                }\n            }\n        },\n\n        /**\n         * Shows/hide the input placeholder depending\n         * on if there items in the list already.\n         */\n        updatePlaceholder: function() {\n            if (!this.settings.placeholder) return;\n            var $input = this.$control_input;\n\n            if (this.items.length) {\n                $input.removeAttr('placeholder');\n            } else {\n                $input.attr('placeholder', this.settings.placeholder);\n            }\n            $input.triggerHandler('update', {force: true});\n        },\n\n        /**\n         * Shows the autocomplete dropdown containing\n         * the available options.\n         */\n        open: function() {\n            var self = this;\n\n            if (self.isLocked || self.isOpen || (self.settings.mode === 'multi' && self.isFull())) return;\n            self.focus();\n            self.isOpen = true;\n            self.refreshState();\n            self.$dropdown.css({visibility: 'hidden', display: 'block'});\n            self.positionDropdown();\n            self.$dropdown.css({visibility: 'visible'});\n            self.trigger('dropdown_open', self.$dropdown);\n        },\n\n        /**\n         * Closes the autocomplete dropdown menu.\n         */\n        close: function() {\n            var self = this;\n            var trigger = self.isOpen;\n\n            if (self.settings.mode === 'single' && self.items.length) {\n                self.hideInput();\n            }\n\n            self.isOpen = false;\n            self.$dropdown.hide();\n            self.setActiveOption(null);\n            self.refreshState();\n\n            if (trigger) self.trigger('dropdown_close', self.$dropdown);\n        },\n\n        /**\n         * Calculates and applies the appropriate\n         * position of the dropdown.\n         */\n        positionDropdown: function() {\n            var $control = this.$control;\n            var offset = this.settings.dropdownParent === 'body' ? $control.offset() : $control.position();\n            offset.top += $control.outerHeight(true);\n\n            this.$dropdown.css({\n                width : $control.outerWidth(),\n                top   : offset.top,\n                left  : offset.left\n            });\n        },\n\n        /**\n         * Resets / clears all selected items\n         * from the control.\n         *\n         * @param {boolean} silent\n         */\n        clear: function(silent) {\n            var self = this;\n\n            if (!self.items.length) return;\n            self.$control.children(':not(input)').remove();\n            self.items = [];\n            self.lastQuery = null;\n            self.setCaret(0);\n            self.setActiveItem(null);\n            self.updatePlaceholder();\n            self.updateOriginalInput({silent: silent});\n            self.refreshState();\n            self.showInput();\n            self.trigger('clear');\n        },\n\n        /**\n         * A helper method for inserting an element\n         * at the current caret position.\n         *\n         * @param {object} $el\n         */\n        insertAtCaret: function($el) {\n            var caret = Math.min(this.caretPos, this.items.length);\n            if (caret === 0) {\n                this.$control.prepend($el);\n            } else {\n                $(this.$control[0].childNodes[caret]).before($el);\n            }\n            this.setCaret(caret + 1);\n        },\n\n        /**\n         * Removes the current selected item(s).\n         *\n         * @param {object} e (optional)\n         * @returns {boolean}\n         */\n        deleteSelection: function(e) {\n            var i, n, direction, selection, values, caret, option_select, $option_select, $tail;\n            var self = this;\n\n            direction = (e && e.keyCode === KEY_BACKSPACE) ? -1 : 1;\n            selection = getSelection(self.$control_input[0]);\n\n            if (self.$activeOption && !self.settings.hideSelected) {\n                option_select = self.getAdjacentOption(self.$activeOption, -1).attr('data-value');\n            }\n\n            // determine items that will be removed\n            values = [];\n\n            if (self.$activeItems.length) {\n                $tail = self.$control.children('.active:' + (direction > 0 ? 'last' : 'first'));\n                caret = self.$control.children(':not(input)').index($tail);\n                if (direction > 0) { caret++; }\n\n                for (i = 0, n = self.$activeItems.length; i < n; i++) {\n                    values.push($(self.$activeItems[i]).attr('data-value'));\n                }\n                if (e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n            } else if ((self.isFocused || self.settings.mode === 'single') && self.items.length) {\n                if (direction < 0 && selection.start === 0 && selection.length === 0) {\n                    values.push(self.items[self.caretPos - 1]);\n                } else if (direction > 0 && selection.start === self.$control_input.val().length) {\n                    values.push(self.items[self.caretPos]);\n                }\n            }\n\n            // allow the callback to abort\n            if (!values.length || (typeof self.settings.onDelete === 'function' && self.settings.onDelete.apply(self, [values]) === false)) {\n                return false;\n            }\n\n            // perform removal\n            if (typeof caret !== 'undefined') {\n                self.setCaret(caret);\n            }\n            while (values.length) {\n                self.removeItem(values.pop());\n            }\n\n            self.showInput();\n            self.positionDropdown();\n            self.refreshOptions(true);\n\n            // select previous option\n            if (option_select) {\n                $option_select = self.getOption(option_select);\n                if ($option_select.length) {\n                    self.setActiveOption($option_select);\n                }\n            }\n\n            return true;\n        },\n\n        /**\n         * Selects the previous / next item (depending\n         * on the `direction` argument).\n         *\n         * > 0 - right\n         * < 0 - left\n         *\n         * @param {int} direction\n         * @param {object} e (optional)\n         */\n        advanceSelection: function(direction, e) {\n            var tail, selection, idx, valueLength, cursorAtEdge, $tail;\n            var self = this;\n\n            if (direction === 0) return;\n            if (self.rtl) direction *= -1;\n\n            tail = direction > 0 ? 'last' : 'first';\n            selection = getSelection(self.$control_input[0]);\n\n            if (self.isFocused && !self.isInputHidden) {\n                valueLength = self.$control_input.val().length;\n                cursorAtEdge = direction < 0\n                    ? selection.start === 0 && selection.length === 0\n                    : selection.start === valueLength;\n\n                if (cursorAtEdge && !valueLength) {\n                    self.advanceCaret(direction, e);\n                }\n            } else {\n                $tail = self.$control.children('.active:' + tail);\n                if ($tail.length) {\n                    idx = self.$control.children(':not(input)').index($tail);\n                    self.setActiveItem(null);\n                    self.setCaret(direction > 0 ? idx + 1 : idx);\n                }\n            }\n        },\n\n        /**\n         * Moves the caret left / right.\n         *\n         * @param {int} direction\n         * @param {object} e (optional)\n         */\n        advanceCaret: function(direction, e) {\n            var self = this, fn, $adj;\n\n            if (direction === 0) return;\n\n            fn = direction > 0 ? 'next' : 'prev';\n            if (self.isShiftDown) {\n                $adj = self.$control_input[fn]();\n                if ($adj.length) {\n                    self.hideInput();\n                    self.setActiveItem($adj);\n                    e && e.preventDefault();\n                }\n            } else {\n                self.setCaret(self.caretPos + direction);\n            }\n        },\n\n        /**\n         * Moves the caret to the specified index.\n         *\n         * @param {int} i\n         */\n        setCaret: function(i) {\n            var self = this;\n\n            if (self.settings.mode === 'single') {\n                i = self.items.length;\n            } else {\n                i = Math.max(0, Math.min(self.items.length, i));\n            }\n\n            if(!self.isPending) {\n                // the input must be moved by leaving it in place and moving the\n                // siblings, due to the fact that focus cannot be restored once lost\n                // on mobile webkit devices\n                var j, n, fn, $children, $child;\n                $children = self.$control.children(':not(input)');\n                for (j = 0, n = $children.length; j < n; j++) {\n                    $child = $($children[j]).detach();\n                    if (j <  i) {\n                        self.$control_input.before($child);\n                    } else {\n                        self.$control.append($child);\n                    }\n                }\n            }\n\n            self.caretPos = i;\n        },\n\n        /**\n         * Disables user input on the control. Used while\n         * items are being asynchronously created.\n         */\n        lock: function() {\n            this.close();\n            this.isLocked = true;\n            this.refreshState();\n        },\n\n        /**\n         * Re-enables user input on the control.\n         */\n        unlock: function() {\n            this.isLocked = false;\n            this.refreshState();\n        },\n\n        /**\n         * Disables user input on the control completely.\n         * While disabled, it cannot receive focus.\n         */\n        disable: function() {\n            var self = this;\n            self.$input.prop('disabled', true);\n            self.$control_input.prop('disabled', true).prop('tabindex', -1);\n            self.isDisabled = true;\n            self.lock();\n        },\n\n        /**\n         * Enables the control so that it can respond\n         * to focus and user input.\n         */\n        enable: function() {\n            var self = this;\n            self.$input.prop('disabled', false);\n            self.$control_input.prop('disabled', false).prop('tabindex', self.tabIndex);\n            self.isDisabled = false;\n            self.unlock();\n        },\n\n        /**\n         * Completely destroys the control and\n         * unbinds all event listeners so that it can\n         * be garbage collected.\n         */\n        destroy: function() {\n            var self = this;\n            var eventNS = self.eventNS;\n            var revertSettings = self.revertSettings;\n\n            self.trigger('destroy');\n            self.off();\n            self.$wrapper.remove();\n            self.$dropdown.remove();\n\n            self.$input\n                .html('')\n                .append(revertSettings.$children)\n                .removeAttr('tabindex')\n                .removeClass('selectized')\n                .attr({tabindex: revertSettings.tabindex})\n                .show();\n\n            self.$control_input.removeData('grow');\n            self.$input.removeData('selectize');\n\n            $(window).off(eventNS);\n            $(document).off(eventNS);\n            $(document.body).off(eventNS);\n\n            delete self.$input[0].selectize;\n        },\n\n        /**\n         * A helper method for rendering \"item\" and\n         * \"option\" templates, given the data.\n         *\n         * @param {string} templateName\n         * @param {object} data\n         * @returns {string}\n         */\n        render: function(templateName, data) {\n            var value, id, label;\n            var html = '';\n            var cache = false;\n            var self = this;\n            var regex_tag = /^[\\t \\r\\n]*<([a-z][a-z0-9\\-_]*(?:\\:[a-z][a-z0-9\\-_]*)?)/i;\n\n            if (templateName === 'option' || templateName === 'item') {\n                value = hash_key(data[self.settings.valueField]);\n                cache = !!value;\n            }\n\n            // pull markup from cache if it exists\n            if (cache) {\n                if (!isset(self.renderCache[templateName])) {\n                    self.renderCache[templateName] = {};\n                }\n                if (self.renderCache[templateName].hasOwnProperty(value)) {\n                    return self.renderCache[templateName][value];\n                }\n            }\n\n            // render markup\n            html = self.settings.render[templateName].apply(this, [data, escape_html]);\n\n            // add mandatory attributes\n            if (templateName === 'option' || templateName === 'option_create') {\n                html = html.replace(regex_tag, '<$1 data-selectable');\n            }\n            if (templateName === 'optgroup') {\n                id = data[self.settings.optgroupValueField] || '';\n                html = html.replace(regex_tag, '<$1 data-group=\"' + escape_replace(escape_html(id)) + '\"');\n            }\n            if (templateName === 'option' || templateName === 'item') {\n                html = html.replace(regex_tag, '<$1 data-value=\"' + escape_replace(escape_html(value || '')) + '\"');\n            }\n\n            // update cache\n            if (cache) {\n                self.renderCache[templateName][value] = html;\n            }\n\n            return html;\n        },\n\n        /**\n         * Clears the render cache for a template. If\n         * no template is given, clears all render\n         * caches.\n         *\n         * @param {string} templateName\n         */\n        clearCache: function(templateName) {\n            var self = this;\n            if (typeof templateName === 'undefined') {\n                self.renderCache = {};\n            } else {\n                delete self.renderCache[templateName];\n            }\n        },\n\n        /**\n         * Determines whether or not to display the\n         * create item prompt, given a user input.\n         *\n         * @param {string} input\n         * @return {boolean}\n         */\n        canCreate: function(input) {\n            var self = this;\n            if (!self.settings.create) return false;\n            var filter = self.settings.createFilter;\n            return input.length\n                && (typeof filter !== 'function' || filter.apply(self, [input]))\n                && (typeof filter !== 'string' || new RegExp(filter).test(input))\n                && (!(filter instanceof RegExp) || filter.test(input));\n        }\n\n    });\n\n\n    Selectize.count = 0;\n    Selectize.defaults = {\n        options: [],\n        optgroups: [],\n\n        plugins: [],\n        delimiter: ',',\n        splitOn: null, // regexp or string for splitting up values from a paste command\n        persist: true,\n        diacritics: true,\n        create: false,\n        createOnBlur: false,\n        createFilter: null,\n        highlight: true,\n        openOnFocus: true,\n        maxOptions: 1000,\n        maxItems: null,\n        hideSelected: null,\n        addPrecedence: false,\n        selectOnTab: false,\n        preload: false,\n        allowEmptyOption: false,\n        closeAfterSelect: false,\n\n        scrollDuration: 60,\n        loadThrottle: 300,\n        loadingClass: 'loading',\n\n        dataAttr: 'data-data',\n        optgroupField: 'optgroup',\n        valueField: 'value',\n        labelField: 'text',\n        optgroupLabelField: 'label',\n        optgroupValueField: 'value',\n        lockOptgroupOrder: false,\n\n        sortField: '$order',\n        searchField: ['text'],\n        searchConjunction: 'and',\n\n        mode: null,\n        wrapperClass: 'selectize-control',\n        inputClass: 'selectize-input',\n        dropdownClass: 'selectize-dropdown',\n        dropdownContentClass: 'selectize-dropdown-content',\n\n        dropdownParent: null,\n\n        copyClassesToDropdown: true,\n\n        /*\n         load                 : null, // function(query, callback) { ... }\n         score                : null, // function(search) { ... }\n         onInitialize         : null, // function() { ... }\n         onChange             : null, // function(value) { ... }\n         onItemAdd            : null, // function(value, $item) { ... }\n         onItemRemove         : null, // function(value) { ... }\n         onClear              : null, // function() { ... }\n         onOptionAdd          : null, // function(value, data) { ... }\n         onOptionRemove       : null, // function(value) { ... }\n         onOptionClear        : null, // function() { ... }\n         onOptionGroupAdd     : null, // function(id, data) { ... }\n         onOptionGroupRemove  : null, // function(id) { ... }\n         onOptionGroupClear   : null, // function() { ... }\n         onDropdownOpen       : null, // function($dropdown) { ... }\n         onDropdownClose      : null, // function($dropdown) { ... }\n         onType               : null, // function(str) { ... }\n         onDelete             : null, // function(values) { ... }\n         */\n\n        render: {\n            /*\n             item: null,\n             optgroup: null,\n             optgroup_header: null,\n             option: null,\n             option_create: null\n             */\n        }\n    };\n\n\n    $.fn.selectize = function(settings_user) {\n        var defaults             = $.fn.selectize.defaults;\n        var settings             = $.extend({}, defaults, settings_user);\n        var attr_data            = settings.dataAttr;\n        var field_label          = settings.labelField;\n        var field_value          = settings.valueField;\n        var field_optgroup       = settings.optgroupField;\n        var field_optgroup_label = settings.optgroupLabelField;\n        var field_optgroup_value = settings.optgroupValueField;\n\n        /**\n         * Initializes selectize from a <input type=\"text\"> element.\n         *\n         * @param {object} $input\n         * @param {object} settings_element\n         */\n        var init_textbox = function($input, settings_element) {\n            var i, n, values, option;\n\n            var data_raw = $input.attr(attr_data);\n\n            if (!data_raw) {\n                var value = $.trim($input.val() || '');\n                if (!settings.allowEmptyOption && !value.length) return;\n                values = value.split(settings.delimiter);\n                for (i = 0, n = values.length; i < n; i++) {\n                    option = {};\n                    option[field_label] = values[i];\n                    option[field_value] = values[i];\n                    settings_element.options.push(option);\n                }\n                settings_element.items = values;\n            } else {\n                settings_element.options = JSON.parse(data_raw);\n                for (i = 0, n = settings_element.options.length; i < n; i++) {\n                    settings_element.items.push(settings_element.options[i][field_value]);\n                }\n            }\n        };\n\n        /**\n         * Initializes selectize from a <select> element.\n         *\n         * @param {object} $input\n         * @param {object} settings_element\n         */\n        var init_select = function($input, settings_element) {\n            var i, n, tagName, $children, order = 0;\n            var options = settings_element.options;\n            var optionsMap = {};\n\n            var readData = function($el) {\n                var data = attr_data && $el.attr(attr_data);\n                if (typeof data === 'string' && data.length) {\n                    return JSON.parse(data);\n                }\n                return null;\n            };\n\n            var addOption = function($option, group) {\n                $option = $($option);\n\n                var value = hash_key($option.attr('value'));\n                if (!value && !settings.allowEmptyOption) return;\n\n                // if the option already exists, it's probably been\n                // duplicated in another optgroup. in this case, push\n                // the current group to the \"optgroup\" property on the\n                // existing option so that it's rendered in both places.\n                if (optionsMap.hasOwnProperty(value)) {\n                    if (group) {\n                        var arr = optionsMap[value][field_optgroup];\n                        if (!arr) {\n                            optionsMap[value][field_optgroup] = group;\n                        } else if (!$.isArray(arr)) {\n                            optionsMap[value][field_optgroup] = [arr, group];\n                        } else {\n                            arr.push(group);\n                        }\n                    }\n                    return;\n                }\n\n                var option             = readData($option) || {};\n                option[field_label]    = option[field_label] || $option.text();\n                option[field_value]    = option[field_value] || value;\n                option[field_optgroup] = option[field_optgroup] || group;\n\n                optionsMap[value] = option;\n                options.push(option);\n\n                if ($option.is(':selected')) {\n                    settings_element.items.push(value);\n                }\n            };\n\n            var addGroup = function($optgroup) {\n                var i, n, id, optgroup, $options;\n\n                $optgroup = $($optgroup);\n                id = $optgroup.attr('label');\n\n                if (id) {\n                    optgroup = readData($optgroup) || {};\n                    optgroup[field_optgroup_label] = id;\n                    optgroup[field_optgroup_value] = id;\n                    settings_element.optgroups.push(optgroup);\n                }\n\n                $options = $('option', $optgroup);\n                for (i = 0, n = $options.length; i < n; i++) {\n                    addOption($options[i], id);\n                }\n            };\n\n            settings_element.maxItems = $input.attr('multiple') ? null : 1;\n\n            $children = $input.children();\n            for (i = 0, n = $children.length; i < n; i++) {\n                tagName = $children[i].tagName.toLowerCase();\n                if (tagName === 'optgroup') {\n                    addGroup($children[i]);\n                } else if (tagName === 'option') {\n                    addOption($children[i]);\n                }\n            }\n        };\n\n        return this.each(function() {\n            if (this.selectize) return;\n\n            var instance;\n            var $input = $(this);\n            var tag_name = this.tagName.toLowerCase();\n            var placeholder = $input.attr('placeholder') || $input.attr('data-placeholder');\n            if (!placeholder && !settings.allowEmptyOption) {\n                placeholder = $input.children('option[value=\"\"]').text();\n            }\n\n            var settings_element = {\n                'placeholder' : placeholder,\n                'options'     : [],\n                'optgroups'   : [],\n                'items'       : []\n            };\n\n            if (tag_name === 'select') {\n                init_select($input, settings_element);\n            } else {\n                init_textbox($input, settings_element);\n            }\n\n            instance = new Selectize($input, $.extend(true, {}, defaults, settings_element, settings_user));\n        });\n    };\n\n    $.fn.selectize.defaults = Selectize.defaults;\n    $.fn.selectize.support = {\n        validity: SUPPORTS_VALIDITY_API\n    };\n\n\n    Selectize.define('drag_drop', function(options) {\n        if (!$.fn.sortable) throw new Error('The \"drag_drop\" plugin requires jQuery UI \"sortable\".');\n        if (this.settings.mode !== 'multi') return;\n        var self = this;\n\n        self.lock = (function() {\n            var original = self.lock;\n            return function() {\n                var sortable = self.$control.data('sortable');\n                if (sortable) sortable.disable();\n                return original.apply(self, arguments);\n            };\n        })();\n\n        self.unlock = (function() {\n            var original = self.unlock;\n            return function() {\n                var sortable = self.$control.data('sortable');\n                if (sortable) sortable.enable();\n                return original.apply(self, arguments);\n            };\n        })();\n\n        self.setup = (function() {\n            var original = self.setup;\n            return function() {\n                original.apply(this, arguments);\n\n                var $control = self.$control.sortable({\n                    items: '[data-value]',\n                    forcePlaceholderSize: true,\n                    disabled: self.isLocked,\n                    start: function(e, ui) {\n                        ui.placeholder.css('width', ui.helper.css('width'));\n                        $control.css({overflow: 'visible'});\n                    },\n                    stop: function() {\n                        $control.css({overflow: 'hidden'});\n                        var active = self.$activeItems ? self.$activeItems.slice() : null;\n                        var values = [];\n                        $control.children('[data-value]').each(function() {\n                            values.push($(this).attr('data-value'));\n                        });\n                        self.setValue(values);\n                        self.setActiveItem(active);\n                    }\n                });\n            };\n        })();\n\n    });\n\n    Selectize.define('dropdown_header', function(options) {\n        var self = this;\n\n        options = $.extend({\n            title         : 'Untitled',\n            headerClass   : 'selectize-dropdown-header',\n            titleRowClass : 'selectize-dropdown-header-title',\n            labelClass    : 'selectize-dropdown-header-label',\n            closeClass    : 'selectize-dropdown-header-close',\n\n            html: function(data) {\n                return (\n                    '<div class=\"' + data.headerClass + '\">' +\n                    '<div class=\"' + data.titleRowClass + '\">' +\n                    '<span class=\"' + data.labelClass + '\">' + data.title + '</span>' +\n                    '<a href=\"javascript:void(0)\" class=\"' + data.closeClass + '\">&times;</a>' +\n                    '</div>' +\n                    '</div>'\n                );\n            }\n        }, options);\n\n        self.setup = (function() {\n            var original = self.setup;\n            return function() {\n                original.apply(self, arguments);\n                self.$dropdown_header = $(options.html(options));\n                self.$dropdown.prepend(self.$dropdown_header);\n            };\n        })();\n\n    });\n\n    Selectize.define('optgroup_columns', function(options) {\n        var self = this;\n\n        options = $.extend({\n            equalizeWidth  : true,\n            equalizeHeight : true\n        }, options);\n\n        this.getAdjacentOption = function($option, direction) {\n            var $options = $option.closest('[data-group]').find('[data-selectable]');\n            var index    = $options.index($option) + direction;\n\n            return index >= 0 && index < $options.length ? $options.eq(index) : $();\n        };\n\n        this.onKeyDown = (function() {\n            var original = self.onKeyDown;\n            return function(e) {\n                var index, $option, $options, $optgroup;\n\n                if (this.isOpen && (e.keyCode === KEY_LEFT || e.keyCode === KEY_RIGHT)) {\n                    self.ignoreHover = true;\n                    $optgroup = this.$activeOption.closest('[data-group]');\n                    index = $optgroup.find('[data-selectable]').index(this.$activeOption);\n\n                    if(e.keyCode === KEY_LEFT) {\n                        $optgroup = $optgroup.prev('[data-group]');\n                    } else {\n                        $optgroup = $optgroup.next('[data-group]');\n                    }\n\n                    $options = $optgroup.find('[data-selectable]');\n                    $option  = $options.eq(Math.min($options.length - 1, index));\n                    if ($option.length) {\n                        this.setActiveOption($option);\n                    }\n                    return;\n                }\n\n                return original.apply(this, arguments);\n            };\n        })();\n\n        var getScrollbarWidth = function() {\n            var div;\n            var width = getScrollbarWidth.width;\n            var doc = document;\n\n            if (typeof width === 'undefined') {\n                div = doc.createElement('div');\n                div.innerHTML = '<div style=\"width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;\"><div style=\"width:1px;height:100px;\"></div></div>';\n                div = div.firstChild;\n                doc.body.appendChild(div);\n                width = getScrollbarWidth.width = div.offsetWidth - div.clientWidth;\n                doc.body.removeChild(div);\n            }\n            return width;\n        };\n\n        var equalizeSizes = function() {\n            var i, n, height_max, width, width_last, width_parent, $optgroups;\n\n            $optgroups = $('[data-group]', self.$dropdown_content);\n            n = $optgroups.length;\n            if (!n || !self.$dropdown_content.width()) return;\n\n            if (options.equalizeHeight) {\n                height_max = 0;\n                for (i = 0; i < n; i++) {\n                    height_max = Math.max(height_max, $optgroups.eq(i).height());\n                }\n                $optgroups.css({height: height_max});\n            }\n\n            if (options.equalizeWidth) {\n                width_parent = self.$dropdown_content.innerWidth() - getScrollbarWidth();\n                width = Math.round(width_parent / n);\n                $optgroups.css({width: width});\n                if (n > 1) {\n                    width_last = width_parent - width * (n - 1);\n                    $optgroups.eq(n - 1).css({width: width_last});\n                }\n            }\n        };\n\n        if (options.equalizeHeight || options.equalizeWidth) {\n            hook.after(this, 'positionDropdown', equalizeSizes);\n            hook.after(this, 'refreshOptions', equalizeSizes);\n        }\n\n\n    });\n\n    Selectize.define('remove_button', function(options) {\n        if (this.settings.mode === 'single') return;\n\n        options = $.extend({\n            label     : '&times;',\n            title     : 'Remove',\n            className : 'remove',\n            append    : true\n        }, options);\n\n        var self = this;\n        var html = '<a href=\"javascript:void(0)\" class=\"' + options.className + '\" tabindex=\"-1\" title=\"' + escape_html(options.title) + '\">' + options.label + '</a>';\n\n        /**\n         * Appends an element as a child (with raw HTML).\n         *\n         * @param {string} html_container\n         * @param {string} html_element\n         * @return {string}\n         */\n        var append = function(html_container, html_element) {\n            var pos = html_container.search(/(<\\/[^>]+>\\s*)$/);\n            return html_container.substring(0, pos) + html_element + html_container.substring(pos);\n        };\n\n        this.setup = (function() {\n            var original = self.setup;\n            return function() {\n                // override the item rendering method to add the button to each\n                if (options.append) {\n                    var render_item = self.settings.render.item;\n                    self.settings.render.item = function(data) {\n                        return append(render_item.apply(this, arguments), html);\n                    };\n                }\n\n                original.apply(this, arguments);\n\n                // add event listener\n                this.$control.on('click', '.' + options.className, function(e) {\n                    e.preventDefault();\n                    if (self.isLocked) return;\n\n                    var $item = $(e.currentTarget).parent();\n                    self.setActiveItem($item);\n                    if (self.deleteSelection()) {\n                        self.setCaret(self.items.length);\n                    }\n                });\n\n            };\n        })();\n\n    });\n\n    Selectize.define('restore_on_backspace', function(options) {\n        var self = this;\n\n        options.text = options.text || function(option) {\n                return option[this.settings.labelField];\n            };\n\n        this.onKeyDown = (function() {\n            var original = self.onKeyDown;\n            return function(e) {\n                var index, option;\n                if (e.keyCode === KEY_BACKSPACE && this.$control_input.val() === '' && !this.$activeItems.length) {\n                    index = this.caretPos - 1;\n                    if (index >= 0 && index < this.items.length) {\n                        option = this.options[this.items[index]];\n                        if (this.deleteSelection(e)) {\n                            this.setTextboxValue(options.text.apply(this, [option]));\n                            this.refreshOptions(true);\n                        }\n                        e.preventDefault();\n                        return;\n                    }\n                }\n                return original.apply(this, arguments);\n            };\n        })();\n    });\n\n\n    return Selectize;\n}));","/*! modernizr 3.2.0 (Custom Build) -> detect CSS animations | MIT *\r\n * http://modernizr.com/download/?-cssanimations !*/\r\n!function(e,n,t){function r(e,n){return typeof e===n}function o(){var e,n,t,o,s,i,a;for(var l in C)if(C.hasOwnProperty(l)){if(e=[],n=C[l],n.name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(t=0;t<n.options.aliases.length;t++)e.push(n.options.aliases[t].toLowerCase());for(o=r(n.fn,\"function\")?n.fn():n.fn,s=0;s<e.length;s++)i=e[s],a=i.split(\".\"),1===a.length?Modernizr[a[0]]=o:(!Modernizr[a[0]]||Modernizr[a[0]]instanceof Boolean||(Modernizr[a[0]]=new Boolean(Modernizr[a[0]])),Modernizr[a[0]][a[1]]=o),g.push((o?\"\":\"no-\")+a.join(\"-\"))}}function s(e){var n=_.className,t=Modernizr._config.classPrefix||\"\";if(S&&(n=n.baseVal),Modernizr._config.enableJSClass){var r=new RegExp(\"(^|\\\\s)\"+t+\"no-js(\\\\s|$)\");n=n.replace(r,\"$1\"+t+\"js$2\")}Modernizr._config.enableClasses&&(n+=\" \"+t+e.join(\" \"+t),S?_.className.baseVal=n:_.className=n)}function i(e,n){return!!~(\"\"+e).indexOf(n)}function a(){return\"function\"!=typeof n.createElement?n.createElement(arguments[0]):S?n.createElementNS.call(n,\"http://www.w3.org/2000/svg\",arguments[0]):n.createElement.apply(n,arguments)}function l(e){return e.replace(/([a-z])-([a-z])/g,function(e,n,t){return n+t.toUpperCase()}).replace(/^-/,\"\")}function f(e,n){return function(){return e.apply(n,arguments)}}function u(e,n,t){var o;for(var s in e)if(e[s]in n)return t===!1?e[s]:(o=n[e[s]],r(o,\"function\")?f(o,t||n):o);return!1}function d(e){return e.replace(/([A-Z])/g,function(e,n){return\"-\"+n.toLowerCase()}).replace(/^ms-/,\"-ms-\")}function c(){var e=n.body;return e||(e=a(S?\"svg\":\"body\"),e.fake=!0),e}function p(e,t,r,o){var s,i,l,f,u=\"modernizr\",d=a(\"div\"),p=c();if(parseInt(r,10))for(;r--;)l=a(\"div\"),l.id=o?o[r]:u+(r+1),d.appendChild(l);return s=a(\"style\"),s.type=\"text/css\",s.id=\"s\"+u,(p.fake?p:d).appendChild(s),p.appendChild(d),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(n.createTextNode(e)),d.id=u,p.fake&&(p.style.background=\"\",p.style.overflow=\"hidden\",f=_.style.overflow,_.style.overflow=\"hidden\",_.appendChild(p)),i=t(d,e),p.fake?(p.parentNode.removeChild(p),_.style.overflow=f,_.offsetHeight):d.parentNode.removeChild(d),!!i}function m(n,r){var o=n.length;if(\"CSS\"in e&&\"supports\"in e.CSS){for(;o--;)if(e.CSS.supports(d(n[o]),r))return!0;return!1}if(\"CSSSupportsRule\"in e){for(var s=[];o--;)s.push(\"(\"+d(n[o])+\":\"+r+\")\");return s=s.join(\" or \"),p(\"@supports (\"+s+\") { #modernizr { position: absolute; } }\",function(e){return\"absolute\"==getComputedStyle(e,null).position})}return t}function h(e,n,o,s){function f(){d&&(delete P.style,delete P.modElem)}if(s=r(s,\"undefined\")?!1:s,!r(o,\"undefined\")){var u=m(e,o);if(!r(u,\"undefined\"))return u}for(var d,c,p,h,v,y=[\"modernizr\",\"tspan\"];!P.style;)d=!0,P.modElem=a(y.shift()),P.style=P.modElem.style;for(p=e.length,c=0;p>c;c++)if(h=e[c],v=P.style[h],i(h,\"-\")&&(h=l(h)),P.style[h]!==t){if(s||r(o,\"undefined\"))return f(),\"pfx\"==n?h:!0;try{P.style[h]=o}catch(g){}if(P.style[h]!=v)return f(),\"pfx\"==n?h:!0}return f(),!1}function v(e,n,t,o,s){var i=e.charAt(0).toUpperCase()+e.slice(1),a=(e+\" \"+b.join(i+\" \")+i).split(\" \");return r(n,\"string\")||r(n,\"undefined\")?h(a,n,o,s):(a=(e+\" \"+E.join(i+\" \")+i).split(\" \"),u(a,n,t))}function y(e,n,r){return v(e,t,t,n,r)}var g=[],C=[],w={_version:\"3.2.0\",_config:{classPrefix:\"\",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var t=this;setTimeout(function(){n(t[e])},0)},addTest:function(e,n,t){C.push({name:e,fn:n,options:t})},addAsyncTest:function(e){C.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=w,Modernizr=new Modernizr;var _=n.documentElement,S=\"svg\"===_.nodeName.toLowerCase(),x=\"Moz O ms Webkit\",b=w._config.usePrefixes?x.split(\" \"):[];w._cssomPrefixes=b;var E=w._config.usePrefixes?x.toLowerCase().split(\" \"):[];w._domPrefixes=E;var N={elem:a(\"modernizr\")};Modernizr._q.push(function(){delete N.elem});var P={style:N.elem.style};Modernizr._q.unshift(function(){delete P.style}),w.testAllProps=v,w.testAllProps=y,Modernizr.addTest(\"cssanimations\",y(\"animationName\",\"a\",!0)),o(),s(g),delete w.addTest,delete w.addAsyncTest;for(var z=0;z<Modernizr._q.length;z++)Modernizr._q[z]();e.Modernizr=Modernizr}(window,document);\r\n\r\n// matrix library\r\neval(function (p, a, c, k, e, r) {\r\n    e = function (c) {\r\n        return (c < a ? '' : e(parseInt(c / a))) + ((c = c % a) > 35 ? String.fromCharCode(c + 29) : c.toString(36))\r\n    };\r\n    if (!''.replace(/^/, String)) {\r\n        while (c--) r[e(c)] = k[c] || e(c);\r\n        k = [\r\n            function (e) {\r\n                return r[e]\r\n            }\r\n        ];\r\n        e = function () {\r\n            return '\\\\w+'\r\n        };\r\n        c = 1\r\n    }\r\n    ;\r\n    while (c--)\r\n        if (k[c]) p = p.replace(new RegExp('\\\\b' + e(c) + '\\\\b', 'g'), k[c]);\r\n    return p\r\n}('9 17={3i:\\'0.1.3\\',16:1e-6};l v(){}v.23={e:l(i){8(i<1||i>7.4.q)?w:7.4[i-1]},2R:l(){8 7.4.q},1u:l(){8 F.1x(7.2u(7))},24:l(a){9 n=7.4.q;9 V=a.4||a;o(n!=V.q){8 1L}J{o(F.13(7.4[n-1]-V[n-1])>17.16){8 1L}}H(--n);8 2x},1q:l(){8 v.u(7.4)},1b:l(a){9 b=[];7.28(l(x,i){b.19(a(x,i))});8 v.u(b)},28:l(a){9 n=7.4.q,k=n,i;J{i=k-n;a(7.4[i],i+1)}H(--n)},2q:l(){9 r=7.1u();o(r===0){8 7.1q()}8 7.1b(l(x){8 x/r})},1C:l(a){9 V=a.4||a;9 n=7.4.q,k=n,i;o(n!=V.q){8 w}9 b=0,1D=0,1F=0;7.28(l(x,i){b+=x*V[i-1];1D+=x*x;1F+=V[i-1]*V[i-1]});1D=F.1x(1D);1F=F.1x(1F);o(1D*1F===0){8 w}9 c=b/(1D*1F);o(c<-1){c=-1}o(c>1){c=1}8 F.37(c)},1m:l(a){9 b=7.1C(a);8(b===w)?w:(b<=17.16)},34:l(a){9 b=7.1C(a);8(b===w)?w:(F.13(b-F.1A)<=17.16)},2k:l(a){9 b=7.2u(a);8(b===w)?w:(F.13(b)<=17.16)},2j:l(a){9 V=a.4||a;o(7.4.q!=V.q){8 w}8 7.1b(l(x,i){8 x+V[i-1]})},2C:l(a){9 V=a.4||a;o(7.4.q!=V.q){8 w}8 7.1b(l(x,i){8 x-V[i-1]})},22:l(k){8 7.1b(l(x){8 x*k})},x:l(k){8 7.22(k)},2u:l(a){9 V=a.4||a;9 i,2g=0,n=7.4.q;o(n!=V.q){8 w}J{2g+=7.4[n-1]*V[n-1]}H(--n);8 2g},2f:l(a){9 B=a.4||a;o(7.4.q!=3||B.q!=3){8 w}9 A=7.4;8 v.u([(A[1]*B[2])-(A[2]*B[1]),(A[2]*B[0])-(A[0]*B[2]),(A[0]*B[1])-(A[1]*B[0])])},2A:l(){9 m=0,n=7.4.q,k=n,i;J{i=k-n;o(F.13(7.4[i])>F.13(m)){m=7.4[i]}}H(--n);8 m},2Z:l(x){9 a=w,n=7.4.q,k=n,i;J{i=k-n;o(a===w&&7.4[i]==x){a=i+1}}H(--n);8 a},3g:l(){8 S.2X(7.4)},2d:l(){8 7.1b(l(x){8 F.2d(x)})},2V:l(x){8 7.1b(l(y){8(F.13(y-x)<=17.16)?x:y})},1o:l(a){o(a.K){8 a.1o(7)}9 V=a.4||a;o(V.q!=7.4.q){8 w}9 b=0,2b;7.28(l(x,i){2b=x-V[i-1];b+=2b*2b});8 F.1x(b)},3a:l(a){8 a.1h(7)},2T:l(a){8 a.1h(7)},1V:l(t,a){9 V,R,x,y,z;2S(7.4.q){27 2:V=a.4||a;o(V.q!=2){8 w}R=S.1R(t).4;x=7.4[0]-V[0];y=7.4[1]-V[1];8 v.u([V[0]+R[0][0]*x+R[0][1]*y,V[1]+R[1][0]*x+R[1][1]*y]);1I;27 3:o(!a.U){8 w}9 C=a.1r(7).4;R=S.1R(t,a.U).4;x=7.4[0]-C[0];y=7.4[1]-C[1];z=7.4[2]-C[2];8 v.u([C[0]+R[0][0]*x+R[0][1]*y+R[0][2]*z,C[1]+R[1][0]*x+R[1][1]*y+R[1][2]*z,C[2]+R[2][0]*x+R[2][1]*y+R[2][2]*z]);1I;2P:8 w}},1t:l(a){o(a.K){9 P=7.4.2O();9 C=a.1r(P).4;8 v.u([C[0]+(C[0]-P[0]),C[1]+(C[1]-P[1]),C[2]+(C[2]-(P[2]||0))])}1d{9 Q=a.4||a;o(7.4.q!=Q.q){8 w}8 7.1b(l(x,i){8 Q[i-1]+(Q[i-1]-x)})}},1N:l(){9 V=7.1q();2S(V.4.q){27 3:1I;27 2:V.4.19(0);1I;2P:8 w}8 V},2n:l(){8\\'[\\'+7.4.2K(\\', \\')+\\']\\'},26:l(a){7.4=(a.4||a).2O();8 7}};v.u=l(a){9 V=25 v();8 V.26(a)};v.i=v.u([1,0,0]);v.j=v.u([0,1,0]);v.k=v.u([0,0,1]);v.2J=l(n){9 a=[];J{a.19(F.2F())}H(--n);8 v.u(a)};v.1j=l(n){9 a=[];J{a.19(0)}H(--n);8 v.u(a)};l S(){}S.23={e:l(i,j){o(i<1||i>7.4.q||j<1||j>7.4[0].q){8 w}8 7.4[i-1][j-1]},33:l(i){o(i>7.4.q){8 w}8 v.u(7.4[i-1])},2E:l(j){o(j>7.4[0].q){8 w}9 a=[],n=7.4.q,k=n,i;J{i=k-n;a.19(7.4[i][j-1])}H(--n);8 v.u(a)},2R:l(){8{2D:7.4.q,1p:7.4[0].q}},2D:l(){8 7.4.q},1p:l(){8 7.4[0].q},24:l(a){9 M=a.4||a;o(1g(M[0][0])==\\'1f\\'){M=S.u(M).4}o(7.4.q!=M.q||7.4[0].q!=M[0].q){8 1L}9 b=7.4.q,15=b,i,G,10=7.4[0].q,j;J{i=15-b;G=10;J{j=10-G;o(F.13(7.4[i][j]-M[i][j])>17.16){8 1L}}H(--G)}H(--b);8 2x},1q:l(){8 S.u(7.4)},1b:l(a){9 b=[],12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;b[i]=[];J{j=10-G;b[i][j]=a(7.4[i][j],i+1,j+1)}H(--G)}H(--12);8 S.u(b)},2i:l(a){9 M=a.4||a;o(1g(M[0][0])==\\'1f\\'){M=S.u(M).4}8(7.4.q==M.q&&7.4[0].q==M[0].q)},2j:l(a){9 M=a.4||a;o(1g(M[0][0])==\\'1f\\'){M=S.u(M).4}o(!7.2i(M)){8 w}8 7.1b(l(x,i,j){8 x+M[i-1][j-1]})},2C:l(a){9 M=a.4||a;o(1g(M[0][0])==\\'1f\\'){M=S.u(M).4}o(!7.2i(M)){8 w}8 7.1b(l(x,i,j){8 x-M[i-1][j-1]})},2B:l(a){9 M=a.4||a;o(1g(M[0][0])==\\'1f\\'){M=S.u(M).4}8(7.4[0].q==M.q)},22:l(a){o(!a.4){8 7.1b(l(x){8 x*a})}9 b=a.1u?2x:1L;9 M=a.4||a;o(1g(M[0][0])==\\'1f\\'){M=S.u(M).4}o(!7.2B(M)){8 w}9 d=7.4.q,15=d,i,G,10=M[0].q,j;9 e=7.4[0].q,4=[],21,20,c;J{i=15-d;4[i]=[];G=10;J{j=10-G;21=0;20=e;J{c=e-20;21+=7.4[i][c]*M[c][j]}H(--20);4[i][j]=21}H(--G)}H(--d);9 M=S.u(4);8 b?M.2E(1):M},x:l(a){8 7.22(a)},32:l(a,b,c,d){9 e=[],12=c,i,G,j;9 f=7.4.q,1p=7.4[0].q;J{i=c-12;e[i]=[];G=d;J{j=d-G;e[i][j]=7.4[(a+i-1)%f][(b+j-1)%1p]}H(--G)}H(--12);8 S.u(e)},31:l(){9 a=7.4.q,1p=7.4[0].q;9 b=[],12=1p,i,G,j;J{i=1p-12;b[i]=[];G=a;J{j=a-G;b[i][j]=7.4[j][i]}H(--G)}H(--12);8 S.u(b)},1y:l(){8(7.4.q==7.4[0].q)},2A:l(){9 m=0,12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;J{j=10-G;o(F.13(7.4[i][j])>F.13(m)){m=7.4[i][j]}}H(--G)}H(--12);8 m},2Z:l(x){9 a=w,12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;J{j=10-G;o(7.4[i][j]==x){8{i:i+1,j:j+1}}}H(--G)}H(--12);8 w},30:l(){o(!7.1y){8 w}9 a=[],n=7.4.q,k=n,i;J{i=k-n;a.19(7.4[i][i])}H(--n);8 v.u(a)},1K:l(){9 M=7.1q(),1c;9 n=7.4.q,k=n,i,1s,1n=7.4[0].q,p;J{i=k-n;o(M.4[i][i]==0){2e(j=i+1;j<k;j++){o(M.4[j][i]!=0){1c=[];1s=1n;J{p=1n-1s;1c.19(M.4[i][p]+M.4[j][p])}H(--1s);M.4[i]=1c;1I}}}o(M.4[i][i]!=0){2e(j=i+1;j<k;j++){9 a=M.4[j][i]/M.4[i][i];1c=[];1s=1n;J{p=1n-1s;1c.19(p<=i?0:M.4[j][p]-M.4[i][p]*a)}H(--1s);M.4[j]=1c}}}H(--n);8 M},3h:l(){8 7.1K()},2z:l(){o(!7.1y()){8 w}9 M=7.1K();9 a=M.4[0][0],n=M.4.q-1,k=n,i;J{i=k-n+1;a=a*M.4[i][i]}H(--n);8 a},3f:l(){8 7.2z()},2y:l(){8(7.1y()&&7.2z()===0)},2Y:l(){o(!7.1y()){8 w}9 a=7.4[0][0],n=7.4.q-1,k=n,i;J{i=k-n+1;a+=7.4[i][i]}H(--n);8 a},3e:l(){8 7.2Y()},1Y:l(){9 M=7.1K(),1Y=0;9 a=7.4.q,15=a,i,G,10=7.4[0].q,j;J{i=15-a;G=10;J{j=10-G;o(F.13(M.4[i][j])>17.16){1Y++;1I}}H(--G)}H(--a);8 1Y},3d:l(){8 7.1Y()},2W:l(a){9 M=a.4||a;o(1g(M[0][0])==\\'1f\\'){M=S.u(M).4}9 T=7.1q(),1p=T.4[0].q;9 b=T.4.q,15=b,i,G,10=M[0].q,j;o(b!=M.q){8 w}J{i=15-b;G=10;J{j=10-G;T.4[i][1p+j]=M[i][j]}H(--G)}H(--b);8 T},2w:l(){o(!7.1y()||7.2y()){8 w}9 a=7.4.q,15=a,i,j;9 M=7.2W(S.I(a)).1K();9 b,1n=M.4[0].q,p,1c,2v;9 c=[],2c;J{i=a-1;1c=[];b=1n;c[i]=[];2v=M.4[i][i];J{p=1n-b;2c=M.4[i][p]/2v;1c.19(2c);o(p>=15){c[i].19(2c)}}H(--b);M.4[i]=1c;2e(j=0;j<i;j++){1c=[];b=1n;J{p=1n-b;1c.19(M.4[j][p]-M.4[i][p]*M.4[j][i])}H(--b);M.4[j]=1c}}H(--a);8 S.u(c)},3c:l(){8 7.2w()},2d:l(){8 7.1b(l(x){8 F.2d(x)})},2V:l(x){8 7.1b(l(p){8(F.13(p-x)<=17.16)?x:p})},2n:l(){9 a=[];9 n=7.4.q,k=n,i;J{i=k-n;a.19(v.u(7.4[i]).2n())}H(--n);8 a.2K(\\'\\\\n\\')},26:l(a){9 i,4=a.4||a;o(1g(4[0][0])!=\\'1f\\'){9 b=4.q,15=b,G,10,j;7.4=[];J{i=15-b;G=4[i].q;10=G;7.4[i]=[];J{j=10-G;7.4[i][j]=4[i][j]}H(--G)}H(--b);8 7}9 n=4.q,k=n;7.4=[];J{i=k-n;7.4.19([4[i]])}H(--n);8 7}};S.u=l(a){9 M=25 S();8 M.26(a)};S.I=l(n){9 a=[],k=n,i,G,j;J{i=k-n;a[i]=[];G=k;J{j=k-G;a[i][j]=(i==j)?1:0}H(--G)}H(--n);8 S.u(a)};S.2X=l(a){9 n=a.q,k=n,i;9 M=S.I(n);J{i=k-n;M.4[i][i]=a[i]}H(--n);8 M};S.1R=l(b,a){o(!a){8 S.u([[F.1H(b),-F.1G(b)],[F.1G(b),F.1H(b)]])}9 d=a.1q();o(d.4.q!=3){8 w}9 e=d.1u();9 x=d.4[0]/e,y=d.4[1]/e,z=d.4[2]/e;9 s=F.1G(b),c=F.1H(b),t=1-c;8 S.u([[t*x*x+c,t*x*y-s*z,t*x*z+s*y],[t*x*y+s*z,t*y*y+c,t*y*z-s*x],[t*x*z-s*y,t*y*z+s*x,t*z*z+c]])};S.3b=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[1,0,0],[0,c,-s],[0,s,c]])};S.39=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[c,0,s],[0,1,0],[-s,0,c]])};S.38=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[c,-s,0],[s,c,0],[0,0,1]])};S.2J=l(n,m){8 S.1j(n,m).1b(l(){8 F.2F()})};S.1j=l(n,m){9 a=[],12=n,i,G,j;J{i=n-12;a[i]=[];G=m;J{j=m-G;a[i][j]=0}H(--G)}H(--12);8 S.u(a)};l 14(){}14.23={24:l(a){8(7.1m(a)&&7.1h(a.K))},1q:l(){8 14.u(7.K,7.U)},2U:l(a){9 V=a.4||a;8 14.u([7.K.4[0]+V[0],7.K.4[1]+V[1],7.K.4[2]+(V[2]||0)],7.U)},1m:l(a){o(a.W){8 a.1m(7)}9 b=7.U.1C(a.U);8(F.13(b)<=17.16||F.13(b-F.1A)<=17.16)},1o:l(a){o(a.W){8 a.1o(7)}o(a.U){o(7.1m(a)){8 7.1o(a.K)}9 N=7.U.2f(a.U).2q().4;9 A=7.K.4,B=a.K.4;8 F.13((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}1d{9 P=a.4||a;9 A=7.K.4,D=7.U.4;9 b=P[0]-A[0],2a=P[1]-A[1],29=(P[2]||0)-A[2];9 c=F.1x(b*b+2a*2a+29*29);o(c===0)8 0;9 d=(b*D[0]+2a*D[1]+29*D[2])/c;9 e=1-d*d;8 F.13(c*F.1x(e<0?0:e))}},1h:l(a){9 b=7.1o(a);8(b!==w&&b<=17.16)},2T:l(a){8 a.1h(7)},1v:l(a){o(a.W){8 a.1v(7)}8(!7.1m(a)&&7.1o(a)<=17.16)},1U:l(a){o(a.W){8 a.1U(7)}o(!7.1v(a)){8 w}9 P=7.K.4,X=7.U.4,Q=a.K.4,Y=a.U.4;9 b=X[0],1z=X[1],1B=X[2],1T=Y[0],1S=Y[1],1M=Y[2];9 c=P[0]-Q[0],2s=P[1]-Q[1],2r=P[2]-Q[2];9 d=-b*c-1z*2s-1B*2r;9 e=1T*c+1S*2s+1M*2r;9 f=b*b+1z*1z+1B*1B;9 g=1T*1T+1S*1S+1M*1M;9 h=b*1T+1z*1S+1B*1M;9 k=(d*g/f+h*e)/(g-h*h);8 v.u([P[0]+k*b,P[1]+k*1z,P[2]+k*1B])},1r:l(a){o(a.U){o(7.1v(a)){8 7.1U(a)}o(7.1m(a)){8 w}9 D=7.U.4,E=a.U.4;9 b=D[0],1l=D[1],1k=D[2],1P=E[0],1O=E[1],1Q=E[2];9 x=(1k*1P-b*1Q),y=(b*1O-1l*1P),z=(1l*1Q-1k*1O);9 N=v.u([x*1Q-y*1O,y*1P-z*1Q,z*1O-x*1P]);9 P=11.u(a.K,N);8 P.1U(7)}1d{9 P=a.4||a;o(7.1h(P)){8 v.u(P)}9 A=7.K.4,D=7.U.4;9 b=D[0],1l=D[1],1k=D[2],1w=A[0],18=A[1],1a=A[2];9 x=b*(P[1]-18)-1l*(P[0]-1w),y=1l*((P[2]||0)-1a)-1k*(P[1]-18),z=1k*(P[0]-1w)-b*((P[2]||0)-1a);9 V=v.u([1l*x-1k*z,1k*y-b*x,b*z-1l*y]);9 k=7.1o(P)/V.1u();8 v.u([P[0]+V.4[0]*k,P[1]+V.4[1]*k,(P[2]||0)+V.4[2]*k])}},1V:l(t,a){o(1g(a.U)==\\'1f\\'){a=14.u(a.1N(),v.k)}9 R=S.1R(t,a.U).4;9 C=a.1r(7.K).4;9 A=7.K.4,D=7.U.4;9 b=C[0],1E=C[1],1J=C[2],1w=A[0],18=A[1],1a=A[2];9 x=1w-b,y=18-1E,z=1a-1J;8 14.u([b+R[0][0]*x+R[0][1]*y+R[0][2]*z,1E+R[1][0]*x+R[1][1]*y+R[1][2]*z,1J+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*D[0]+R[0][1]*D[1]+R[0][2]*D[2],R[1][0]*D[0]+R[1][1]*D[1]+R[1][2]*D[2],R[2][0]*D[0]+R[2][1]*D[1]+R[2][2]*D[2]])},1t:l(a){o(a.W){9 A=7.K.4,D=7.U.4;9 b=A[0],18=A[1],1a=A[2],2N=D[0],1l=D[1],1k=D[2];9 c=7.K.1t(a).4;9 d=b+2N,2h=18+1l,2o=1a+1k;9 Q=a.1r([d,2h,2o]).4;9 e=[Q[0]+(Q[0]-d)-c[0],Q[1]+(Q[1]-2h)-c[1],Q[2]+(Q[2]-2o)-c[2]];8 14.u(c,e)}1d o(a.U){8 7.1V(F.1A,a)}1d{9 P=a.4||a;8 14.u(7.K.1t([P[0],P[1],(P[2]||0)]),7.U)}},1Z:l(a,b){a=v.u(a);b=v.u(b);o(a.4.q==2){a.4.19(0)}o(b.4.q==2){b.4.19(0)}o(a.4.q>3||b.4.q>3){8 w}9 c=b.1u();o(c===0){8 w}7.K=a;7.U=v.u([b.4[0]/c,b.4[1]/c,b.4[2]/c]);8 7}};14.u=l(a,b){9 L=25 14();8 L.1Z(a,b)};14.X=14.u(v.1j(3),v.i);14.Y=14.u(v.1j(3),v.j);14.Z=14.u(v.1j(3),v.k);l 11(){}11.23={24:l(a){8(7.1h(a.K)&&7.1m(a))},1q:l(){8 11.u(7.K,7.W)},2U:l(a){9 V=a.4||a;8 11.u([7.K.4[0]+V[0],7.K.4[1]+V[1],7.K.4[2]+(V[2]||0)],7.W)},1m:l(a){9 b;o(a.W){b=7.W.1C(a.W);8(F.13(b)<=17.16||F.13(F.1A-b)<=17.16)}1d o(a.U){8 7.W.2k(a.U)}8 w},2k:l(a){9 b=7.W.1C(a.W);8(F.13(F.1A/2-b)<=17.16)},1o:l(a){o(7.1v(a)||7.1h(a)){8 0}o(a.K){9 A=7.K.4,B=a.K.4,N=7.W.4;8 F.13((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}1d{9 P=a.4||a;9 A=7.K.4,N=7.W.4;8 F.13((A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2])}},1h:l(a){o(a.W){8 w}o(a.U){8(7.1h(a.K)&&7.1h(a.K.2j(a.U)))}1d{9 P=a.4||a;9 A=7.K.4,N=7.W.4;9 b=F.13(N[0]*(A[0]-P[0])+N[1]*(A[1]-P[1])+N[2]*(A[2]-(P[2]||0)));8(b<=17.16)}},1v:l(a){o(1g(a.U)==\\'1f\\'&&1g(a.W)==\\'1f\\'){8 w}8!7.1m(a)},1U:l(a){o(!7.1v(a)){8 w}o(a.U){9 A=a.K.4,D=a.U.4,P=7.K.4,N=7.W.4;9 b=(N[0]*(P[0]-A[0])+N[1]*(P[1]-A[1])+N[2]*(P[2]-A[2]))/(N[0]*D[0]+N[1]*D[1]+N[2]*D[2]);8 v.u([A[0]+D[0]*b,A[1]+D[1]*b,A[2]+D[2]*b])}1d o(a.W){9 c=7.W.2f(a.W).2q();9 N=7.W.4,A=7.K.4,O=a.W.4,B=a.K.4;9 d=S.1j(2,2),i=0;H(d.2y()){i++;d=S.u([[N[i%3],N[(i+1)%3]],[O[i%3],O[(i+1)%3]]])}9 e=d.2w().4;9 x=N[0]*A[0]+N[1]*A[1]+N[2]*A[2];9 y=O[0]*B[0]+O[1]*B[1]+O[2]*B[2];9 f=[e[0][0]*x+e[0][1]*y,e[1][0]*x+e[1][1]*y];9 g=[];2e(9 j=1;j<=3;j++){g.19((i==j)?0:f[(j+(5-i)%3)%3])}8 14.u(g,c)}},1r:l(a){9 P=a.4||a;9 A=7.K.4,N=7.W.4;9 b=(A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2];8 v.u([P[0]+N[0]*b,P[1]+N[1]*b,(P[2]||0)+N[2]*b])},1V:l(t,a){9 R=S.1R(t,a.U).4;9 C=a.1r(7.K).4;9 A=7.K.4,N=7.W.4;9 b=C[0],1E=C[1],1J=C[2],1w=A[0],18=A[1],1a=A[2];9 x=1w-b,y=18-1E,z=1a-1J;8 11.u([b+R[0][0]*x+R[0][1]*y+R[0][2]*z,1E+R[1][0]*x+R[1][1]*y+R[1][2]*z,1J+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*N[0]+R[0][1]*N[1]+R[0][2]*N[2],R[1][0]*N[0]+R[1][1]*N[1]+R[1][2]*N[2],R[2][0]*N[0]+R[2][1]*N[1]+R[2][2]*N[2]])},1t:l(a){o(a.W){9 A=7.K.4,N=7.W.4;9 b=A[0],18=A[1],1a=A[2],2M=N[0],2L=N[1],2Q=N[2];9 c=7.K.1t(a).4;9 d=b+2M,2p=18+2L,2m=1a+2Q;9 Q=a.1r([d,2p,2m]).4;9 e=[Q[0]+(Q[0]-d)-c[0],Q[1]+(Q[1]-2p)-c[1],Q[2]+(Q[2]-2m)-c[2]];8 11.u(c,e)}1d o(a.U){8 7.1V(F.1A,a)}1d{9 P=a.4||a;8 11.u(7.K.1t([P[0],P[1],(P[2]||0)]),7.W)}},1Z:l(a,b,c){a=v.u(a);a=a.1N();o(a===w){8 w}b=v.u(b);b=b.1N();o(b===w){8 w}o(1g(c)==\\'1f\\'){c=w}1d{c=v.u(c);c=c.1N();o(c===w){8 w}}9 d=a.4[0],18=a.4[1],1a=a.4[2];9 e=b.4[0],1W=b.4[1],1X=b.4[2];9 f,1i;o(c!==w){9 g=c.4[0],2l=c.4[1],2t=c.4[2];f=v.u([(1W-18)*(2t-1a)-(1X-1a)*(2l-18),(1X-1a)*(g-d)-(e-d)*(2t-1a),(e-d)*(2l-18)-(1W-18)*(g-d)]);1i=f.1u();o(1i===0){8 w}f=v.u([f.4[0]/1i,f.4[1]/1i,f.4[2]/1i])}1d{1i=F.1x(e*e+1W*1W+1X*1X);o(1i===0){8 w}f=v.u([b.4[0]/1i,b.4[1]/1i,b.4[2]/1i])}7.K=a;7.W=f;8 7}};11.u=l(a,b,c){9 P=25 11();8 P.1Z(a,b,c)};11.2I=11.u(v.1j(3),v.k);11.2H=11.u(v.1j(3),v.i);11.2G=11.u(v.1j(3),v.j);11.36=11.2I;11.35=11.2H;11.3j=11.2G;9 $V=v.u;9 $M=S.u;9 $L=14.u;9 $P=11.u;', 62, 206, '||||elements|||this|return|var||||||||||||function|||if||length||||create|Vector|null|||||||||Math|nj|while||do|anchor||||||||Matrix||direction||normal||||kj|Plane|ni|abs|Line|ki|precision|Sylvester|A2|push|A3|map|els|else||undefined|typeof|contains|mod|Zero|D3|D2|isParallelTo|kp|distanceFrom|cols|dup|pointClosestTo|np|reflectionIn|modulus|intersects|A1|sqrt|isSquare|X2|PI|X3|angleFrom|mod1|C2|mod2|sin|cos|break|C3|toRightTriangular|false|Y3|to3D|E2|E1|E3|Rotation|Y2|Y1|intersectionWith|rotate|v12|v13|rank|setVectors|nc|sum|multiply|prototype|eql|new|setElements|case|each|PA3|PA2|part|new_element|round|for|cross|product|AD2|isSameSizeAs|add|isPerpendicularTo|v22|AN3|inspect|AD3|AN2|toUnitVector|PsubQ3|PsubQ2|v23|dot|divisor|inverse|true|isSingular|determinant|max|canMultiplyFromLeft|subtract|rows|col|random|ZX|YZ|XY|Random|join|N2|N1|D1|slice|default|N3|dimensions|switch|liesIn|translate|snapTo|augment|Diagonal|trace|indexOf|diagonal|transpose|minor|row|isAntiparallelTo|ZY|YX|acos|RotationZ|RotationY|liesOn|RotationX|inv|rk|tr|det|toDiagonalMatrix|toUpperTriangular|version|XZ'.split('|'), 0, {}))\r\n\r\n// transformation matrix calculation\r\nvar _T = {\r\n    rotate: function (deg) {\r\n        var rad = parseFloat(deg) * (Math.PI / 180),\r\n            costheta = Math.cos(rad),\r\n            sintheta = Math.sin(rad);\r\n\r\n        var a = costheta,\r\n            b = sintheta,\r\n            c = -sintheta,\r\n            d = costheta;\r\n\r\n        return $M([\r\n            [a, c, 0],\r\n            [b, d, 0],\r\n            [0, 0, 1]\r\n        ]);\r\n    },\r\n\r\n    skew: function (dx, dy) {\r\n        var radX = parseFloat(dx) * (Math.PI / 180),\r\n            radY = parseFloat(dy) * (Math.PI / 180),\r\n            c = Math.tan(radX),\r\n            b = Math.tan(radY);\r\n\r\n\r\n        return $M([\r\n            [1, c, 0],\r\n            [b, 1, 0],\r\n            [0, 0, 1]\r\n        ]);\r\n    },\r\n\r\n    translate: function (x, y) {\r\n        var e = x || 0,\r\n            f = y || 0;\r\n\r\n        return $M([\r\n            [1, 0, e],\r\n            [0, 1, f],\r\n            [0, 0, 1]\r\n        ]);\r\n    },\r\n\r\n    scale: function (x, y) {\r\n        var a = x || 0,\r\n            d = y || 0;\r\n\r\n        return $M([\r\n            [a, 0, 0],\r\n            [0, d, 0],\r\n            [0, 0, 1]\r\n        ]);\r\n    },\r\n\r\n    toString: function (m) {\r\n        var s = 'matrix(',\r\n            r, c;\r\n\r\n        for (c = 1; c <= 3; c++) {\r\n            for (r = 1; r <= 2; r++)\r\n                s += m.e(r, c) + ', ';\r\n        }\r\n\r\n        s = s.substr(0, s.length - 2) + ')';\r\n\r\n        return s;\r\n    },\r\n\r\n    fromString: function (s) {\r\n        var t = /^matrix\\((\\S*), (\\S*), (\\S*), (\\S*), (\\S*), (\\S*)\\)$/g.exec(s),\r\n            a = parseFloat(!t ? 1 : t[1]),\r\n            b = parseFloat(!t ? 0 : t[2]),\r\n            c = parseFloat(!t ? 0 : t[3]),\r\n            d = parseFloat(!t ? 1 : t[4]),\r\n            e = parseFloat(!t ? 0 : t[5]),\r\n            f = parseFloat(!t ? 0 : t[6]);\r\n\r\n        return $M([\r\n            [a, c, e],\r\n            [b, d, f],\r\n            [0, 0, 1]\r\n        ]);\r\n    }\r\n};\r\n\r\n/**\r\n * Awesome Panel library\r\n *\r\n * Usage example:\r\n *\r\n * HTML - Insert unique plugin-wide {ID}\r\n * --------\r\n * <div class=\"a-slide-panel\" id=\"a-slide-panel-{ID}\">\r\n *    <div id=\"a-slide-panel-spinner\" class=\"a-spinner at-transition\"></div>\r\n * </div>\r\n *\r\n * CSS - Insert correct path to spinner image\r\n * --------\r\n * .a-slide-panel .a-spinner{\r\n *    background: url(\"/wp-content/plugins/{PLUGIN}/admin/img/loading.svg\") center center transparent no-repeat;\r\n * }\r\n *\r\n * JS - params Object\r\n * -------- *\r\n * id               string      |   panel unique ID\r\n * item_id          int         |   model item ID\r\n * model_name       string      |   model name (for example custom post type name)\r\n * html             string      |   DOM element #id to insert into panel\r\n * direction        string      |   [right|left|top|bottom] direction for slide\r\n * width            string      |   panel width in px / %\r\n * height           string      |   panel height in px / %\r\n * load_model       callback    |   function to load some data from DB into JS (Backbone etc) model. Must return Deferred object\r\n * callback_open    callback    |   called after panel initialized\r\n * callback_close   callback    |   called after panel closed\r\n *\r\n */\r\n\r\nvar AwesomePanel = function (options) {\r\n    'use strict';\r\n\r\n    var $ = jQuery; // enable jQuery\r\n    var self = this;\r\n\r\n    // Data\r\n    self.options = options;\r\n    self.id = options.id;\r\n    self.item_id = options.item_id; // model item ID passed from page\r\n    self.model_name = options.model_name; // model name passed from page\r\n    self.content_url = options.content_url; // model name passed from page\r\n    self.overlayvisible = true; // store click on overlay to close panel\r\n\r\n    // todo: do this calculations and caching once\r\n    var $body = $('body');\r\n    var $win = $(window);\r\n    var $html = $('html');\r\n    var isIE = /msie|trident.*rv\\:11\\./.test(navigator.userAgent.toLowerCase());\r\n    var isFF = /firefox/.test(navigator.userAgent.toLowerCase());\r\n    var transProp = getVendorPropertyName('transform');\r\n    var translation = _T.translate((self.direction === 'left' ? parseInt(self.width) : -parseInt(self.width)), 0);\r\n    var defTranslationStr = _T.toString(_T.translate(0, 0));\r\n    var htmlMargins = {\r\n        top: parseInt($html.css('marginTop')),\r\n        bottom: parseInt($html.css('marginBottom'))\r\n    }\r\n\r\n    // View\r\n    self.panel = $('<div class=\"a-slide-panel\" id=\"a-slide-panel-' + self.id + '\"></div>'); // panel instance\r\n    self.overlay = $('<div></div>').addClass('a-slide-panel-overlay');\r\n    self.spinner = $('<div class=\"a-slide-panel-spinner a-spinner at-transition\"></div>');\r\n\r\n    self.parent = options.parent || 'body'; // panel parent element\r\n    self.position = self.parent == 'body' ? 'fixed' : 'absolute';\r\n\r\n\r\n    self.direction = options.direction || 'left';\r\n    self.animation = options.animation || 'over';\r\n    self.width = options.width || '100%';\r\n    self.height = options.height || '100%';\r\n\r\n    // Show spinner animation\r\n    self.animation_start = function () {\r\n        // show spinner animation\r\n        self.spinner.addClass('fade-animation-in');\r\n    };\r\n\r\n    // Hide spinner animation\r\n    self.animation_end = function () {\r\n        self.spinner.removeClass('fade-animation-in'); // hide spinner animation\r\n    };\r\n\r\n    // Hide panel content\r\n    self.hide_content = function () {\r\n        self.panel.find('.a-slide-panel-content-wrapper').removeClass('fade-animation-in');\r\n    };\r\n\r\n    // Show panel content\r\n    self.show_content = function () {\r\n        self.panel.find('.a-slide-panel-content-wrapper').addClass('fade-animation-in');\r\n    };\r\n\r\n    // Open Panel\r\n    self.open = function () {\r\n        var $parent = $(self.parent);\r\n\r\n        window[self.id + '_panel_openinig'] = true;\r\n        window[self.id + '_overlayvisible'] = true;\r\n\r\n        $parent.append(self.overlay);\r\n        $parent.addClass('a-slide-panel-parent');\r\n\r\n        //create panel\r\n        window[self.id + '_panel_object'] = self;\r\n        window[self.id + '_panel'] = self.panel;\r\n        $parent.append(self.panel);\r\n\r\n        self.panel.css('width', self.width);\r\n        self.panel.css('height', self.height);\r\n\r\n        self.panel.addClass('a-slide-to-' + self.direction);\r\n        setTimeout(function () {\r\n            if (self.animation == 'push') {\r\n                var translate = self.direction == 'left' ? '-' + self.width : self.width;\r\n                var style = '<style type=\"text/css\" id=\"a-slide-panel-styles\">\\\r\n                            .a-slide-panel-push > *{\\\r\n                            -webkit-transform:translateX(' + translate + ');\\\r\n                            -moz-transform:translateX(' + translate + ');\\\r\n                            -ms-transform:translateX(' + translate + ');\\\r\n                            -o-transform:translateX(' + translate + ');\\\r\n                            transform:translateX(' + translate + ');\\\r\n                            }\\\r\n                            </style>';\r\n                $parent.append(style);\r\n            }\r\n\r\n            $parent.addClass('a-slide-panel-' + self.animation);\r\n            self.panel.addClass('a-slide-panel-active');\r\n            $(self.overlay).addClass('open');\r\n            $(self.overlay).css('position', self.position);\r\n\r\n            if (self.animation == 'push') {\r\n                var scroll_top = $win.scrollTop();\r\n                var scroll_left = $win.scrollLeft();\r\n                if (self.direction == 'left' || self.direction == 'right') {\r\n                    scroll_left = +scroll_left;\r\n                }\r\n                $parent.find('*').each(function (i, el) {\r\n                    if (!$(el).hasClass('a-slide-panel') &&\r\n                        !$(el).hasClass('a-slide-panel-overlay') &&\r\n                        !$(el).parent().is($(self.parent)) &&\r\n                        $(el).closest('.a-slide-panel').length === 0) {\r\n                        shiftFixed(i, el, scroll_top, scroll_left);\r\n                    }\r\n                });\r\n            }\r\n\r\n            setTimeout(function () {\r\n                window[self.id + '_panel_openinig'] = false;\r\n\r\n                $parent.addClass('at-overflow-hidden');\r\n                if ($(window).height() < $(document).height()) {\r\n                    $parent.addClass('at-overflow-hidden-' + self.direction);\r\n                }\r\n            }, 400);\r\n        }, 14); // dirty hack to wait css class assign\r\n    };\r\n\r\n    // Close Panel\r\n    self.close = function () {\r\n        $('.close-panel', $(self.parent)).off('click');\r\n        if (self.animation == 'push') {\r\n            var $fixed = $('.at_fixed_inner_el');\r\n            $fixed.each(function (i, el) {\r\n                unshiftFixed(i, el);\r\n            });\r\n        }\r\n        if (Modernizr.cssanimations) {\r\n            $(self.overlay).remove(); // if IE => just remove overlay\r\n            window[self.id + '_overlayvisible'] = false;\r\n        } else { // else remove after animation ends\r\n            $(self.parent).find(self.overlay)\r\n                .one('webkitAnimationEnd oanimationend msAnimationEnd animationend', function () {\r\n                    $(self.overlay).remove();\r\n                }).addClass('remove-overlay');\r\n        }\r\n\r\n        self.panel.removeClass('a-slide-panel-active');\r\n        $(self.parent).removeClass('a-slide-panel-' + self.animation);\r\n\r\n        $(self.parent).removeClass('at-overflow-hidden');\r\n        $(self.parent).removeClass('at-overflow-hidden-' + self.direction);\r\n\r\n        if (typeof self.options.callback_close === 'function') {\r\n            self.options.callback_close(); // close panel callback\r\n        }\r\n\r\n        setTimeout(function () {\r\n            if (self.animation == 'push') {\r\n                $('#a-slide-panel-styles', self.parent).remove();\r\n            }\r\n            $(self.parent).removeClass('a-slide-panel-parent');\r\n            if ($(self.html_pool)) {\r\n                $(self.html_pool).append($(self.html)); // return panel content back to hidden div (aka pool)\r\n            }\r\n            self.hide_content();\r\n            $(self.panel).remove();\r\n            delete window[self.id + '_panel'];\r\n        }, 500);\r\n    };\r\n\r\n    // Append HTML\r\n    self.appendHTML = function () {\r\n        self.html = self.html || options.html; // HTML to append\r\n        self.html_pool = $(self.html).parent();\r\n        var $html = $(self.html) || self.html; // get panel content as jQuery object\r\n        self.panel.append($html); // append panel content\r\n\r\n        self.panel.append(self.spinner); // append spinner\r\n        self.animation_start(); // show loading animation\r\n        self.hide_content(); // hide it temporary (until model is loaded)\r\n    };\r\n\r\n    self.showHTML = function () {\r\n        self.animation_end(); // hide loading animation\r\n        self.show_content(); // show panel content\r\n        if (typeof self.options.callback_open === 'function') {\r\n            self.options.callback_open();\r\n        }\r\n    }\r\n\r\n    // Bind Actions to buttons\r\n    self.bindActions = function () {\r\n        var $parent = $(self.parent);\r\n\r\n        $(self.overlay, $parent).on('click', function () {\r\n            if (window[self.id + '_overlayvisible']) {\r\n                self.close();\r\n            }\r\n        });\r\n        $('.close-panel', $parent).on('click', function () {\r\n            if (window[self.id + '_overlayvisible']) {\r\n                self.close();\r\n            }\r\n        });\r\n    };\r\n\r\n    function shiftFixed(i, el, scrollTop, scrollLeft, bh, wh) {\r\n        var $t = $(el);\r\n        var $offsetP;\r\n        var t;\r\n        var nu;\r\n        var offset;\r\n        var oLeft;\r\n        var oTop;\r\n        var coords;\r\n        var newCSS;\r\n        var _b;\r\n        var transf;\r\n\r\n        if ($t.css('position') === 'fixed') {\r\n\r\n            $t.addClass('at_fixed_inner_el')\r\n\r\n            if (isIE) {\r\n\r\n                t = $t.css(transProp);\r\n\r\n                if (t !== 'none') {\r\n                    $t.attr('ncf-old-matrix', t);\r\n                    t = _T.fromString(t);\r\n                    nu = t.x(translation); // add translation\r\n                    $t.css(transProp, _T.toString(nu)).attr('ncf-transformed', 1);\r\n                } else {\r\n                    $t.css(transProp, _T.toString(translation)/*, transition: trans + 'transform 0.5s cubic-bezier(0.645, 0.045, 0.355, 1)', transitionDelay: '90ms'*/).attr('ncf-transformed', 1);\r\n                }\r\n\r\n            } else {\r\n\r\n                $offsetP = $t;\r\n\r\n                while ($offsetP = $offsetP.parent()) {\r\n                    transf = $offsetP.css(transProp);\r\n                    if ((transf && transf !== 'none') || $offsetP.is('body')) {\r\n                        break\r\n                    }\r\n                }\r\n\r\n                offset = $offsetP.offset();\r\n                oLeft = offset.left;\r\n                oTop = offset.top;\r\n\r\n                if (isFF && $t.is(':visible')) {\r\n                    $t.hide().attr('ncf-ff-hidden', 1);\r\n                }\r\n\r\n                coords = {\r\n                    left: $t.css('left'),\r\n                    right: $t.css('right'),\r\n                    top: $t.css('top'),\r\n                    bottom: $t.css('bottom'),\r\n                    transition: window.getComputedStyle($t.get(0)).transition\r\n                }\r\n\r\n                if (isFF && $t.attr('ncf-ff-hidden')) $t.show();\r\n\r\n                newCSS = {};\r\n                _b = parseInt(coords.bottom);\r\n                _b = isNaN(_b) ? 0 : _b;\r\n\r\n                if (coords.left !== 'auto') {\r\n                    coords.toChangeHor = 'left';\r\n                    newCSS[coords.toChangeHor] = '-=' + (oLeft - scrollLeft);\r\n                } else if (coords.right !== 'auto') {\r\n                    coords.toChangeHor = 'right';\r\n                    newCSS[coords.toChangeHor] = '-=' + (oLeft - scrollLeft);\r\n                } else {\r\n                    coords.toChangeHor = 'left'\r\n                }\r\n\r\n                if (coords.top !== 'auto') {\r\n                    coords.toChangeVert = 'top';\r\n                    newCSS[coords.toChangeVert] = oTop - scrollTop > 0 ? parseInt(coords.top) - (oTop - scrollTop) : parseInt(coords.top) + (scrollTop - oTop);\r\n                } else if (coords.bottom !== 'auto') {\r\n                    coords.toChangeVert = 'bottom';\r\n                    newCSS[coords.toChangeVert] = $body.height() + htmlMargins.top + htmlMargins.bottom + _b - $win.height() - scrollTop + 'px';\r\n                } else {\r\n                    coords.toChangeVert = 'top';\r\n                    newCSS[coords.toChangeVert] = scrollTop;\r\n                }\r\n\r\n                newCSS['transitionProperty'] = 'none';\r\n                $t.css(newCSS).attr('ncf-old-pos', JSON.stringify(coords))\r\n                $t.css('tra')\r\n            }\r\n        }\r\n    }\r\n\r\n    function unshiftFixed(i, el) {\r\n        var $el = $(el);\r\n        var coords;\r\n        var newCss;\r\n        if (isIE) {\r\n            setTimeout(function () {\r\n                $el.removeClass('at_fixed_inner_el');\r\n            }, 500);\r\n            if ($el.attr('ncf-old-matrix')) {\r\n                $el.css(transProp, $el.attr('ncf-old-matrix')).attr('ncf-old-matrix', '');\r\n            } else {\r\n                $el.css(transProp, defTranslationStr).attr('ncf-transformed', '');\r\n            }\r\n        } else {\r\n            setTimeout(function () {\r\n                $el.removeClass('at_fixed_inner_el');\r\n                coords = JSON.parse($el.attr('ncf-old-pos'));\r\n                newCss = {};\r\n                if (coords) {\r\n                    newCss[coords.toChangeHor] = coords[coords.toChangeHor];\r\n                    newCss[coords.toChangeVert] = coords[coords.toChangeVert];\r\n                    //newCss['transitionProperty'] = '';\r\n                    if (coords.toChangeVert === 'bottom') newCss['top'] = '';\r\n                    $el.css(newCss);\r\n                    $el.attr('ncf-old-pos', '');\r\n                } else {\r\n                    $el.css({left: '', top: '', bottom: '', right: '', 'transitionProperty': ''})\r\n                }\r\n            }, 500);\r\n            setTimeout(function () {\r\n                $el.css('transition', coords.transition);\r\n            }, 700);\r\n        }\r\n    }\r\n\r\n    function getVendorPropertyName(prop) {\r\n\r\n        var prefixes = ['Moz', 'Webkit', 'O', 'ms'],\r\n            vendorProp, i,\r\n            div = document.createElement('div'),\r\n            prop_ = prop.charAt(0).toUpperCase() + prop.substr(1);\r\n\r\n        if (prop in div.style) {\r\n            return prop;\r\n        }\r\n\r\n        for (i = 0; i < prefixes.length; ++i) {\r\n\r\n            vendorProp = prefixes[i] + prop_;\r\n\r\n            if (vendorProp in div.style) {\r\n                return vendorProp;\r\n            }\r\n\r\n        }\r\n\r\n        // Avoid memory leak in IE.\r\n        this.div = null;\r\n    };\r\n\r\n\r\n    // Init Panel\r\n    self.init = function () {\r\n        self.open(); // create panel HTML\r\n        self.bindActions(); // bind close button & overlay clicks\r\n        // load backbone model if arg passed\r\n        if (typeof self.options.load_model === 'function') {\r\n            self.appendHTML();\r\n\r\n            self.options.load_model(self.item_id, self.model_name).then(function () {\r\n                self.showHTML();\r\n            });\r\n            return;\r\n        }\r\n        if (typeof self.options.load_content === 'object') {\r\n            self.panel.append(self.spinner); // append spinner\r\n            self.animation_start(); // show loading animation\r\n\r\n            self.options.load_content.then(function (data) {\r\n                self.html = data;\r\n                self.appendHTML();\r\n                self.showHTML();\r\n            });\r\n            return;\r\n        }\r\n        self.appendHTML(); // append panel to DOM\r\n        self.showHTML();\r\n    };\r\n};","/**\r\n * Ajax functions, used in Panel\r\n */\r\n\r\nvar ATS_Ajax = function(){\r\n    'use strict';\r\n\r\n    var $ = jQuery; // enable jQuery\r\n    var prefix = 'ats';\r\n    var a_ajax = new AwesomeAjax(prefix);\r\n    var self = this;\r\n\r\n    self.result = {};\r\n\r\n    // load model to panel\r\n    self.load_model = function(item_id, model_name){\r\n        if($.isNumeric(item_id)){\r\n            return a_ajax.load_model(\r\n                model_name,\r\n                item_id,\r\n                function (data) {\r\n                    window.model = new AwesomeModel(data); // set window model to Backbone model\r\n                }\r\n            );\r\n        }\r\n        if(item_id == '#'){\r\n            if(model_name == 'team'){\r\n                return a_ajax.ajax({\r\n                    action: prefix + '_get_team_defaults',\r\n                    success_handler: function (data) {\r\n                        window.model = new AwesomeModel(data); // set window model to Backbone model\r\n                    }\r\n                });\r\n            }\r\n            if(model_name == 'employer'){\r\n                return a_ajax.ajax({\r\n                    action: prefix + '_get_employer_defaults',\r\n                    success_handler: function (data) {\r\n                        window.model = new AwesomeModel(data); // set window model to Backbone model\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    // Fill team layout html\r\n    self.fill_team_layout_html = function (container, key, value) {\r\n        //container.find('#team-preview').html(value);\r\n    };\r\n\r\n    self.fill_blocks_order = function (container, key, value) {\r\n        var order = JSON.stringify(value);\r\n        container.find('[name=\"team_' + key + '\"]').val(order);\r\n    };\r\n\r\n    self.fill_team_grid_blocks_order = self.fill_blocks_order.bind(self);\r\n    self.fill_team_table_blocks_order = self.fill_blocks_order.bind(self);\r\n\r\n    // Fill team employers list (employer round avatars)\r\n    self.fill_team_employers = function(container, key, employers){\r\n        var html = '';\r\n        var ids = [];\r\n        $.each(employers, function(index, item){\r\n            ids.push(item.ID);\r\n            var foto = item.foto ? '<img width=\"40\" height=\"40\" src=\"' + item.foto + '\">' : '<img src=\"' + window[prefix + '_localize']['default_avatar'] + '\" alt=\"\" />';\r\n\r\n            /* jshint multistr: true */\r\n            var template = '\\\r\n                <li data-action=\"edit-employer\" class=\"clearfix\" employer-id=\"{ID}\" title=\"{name}\">\\\r\n                    <div class=\"foto\" data-wr_replaced=\"true\">\\\r\n                        {foto}\\\r\n                    </div>\\\r\n                    <span class=\"name\">{name}</span>\\\r\n                    <span class=\"position\">{position}</span>\\\r\n                    <div class=\"teams\"><span class=\"teams_count\">{teams_count}</span> Teams</div>\\\r\n                    <button class=\"btn-action remove-employer at-transition at-transition-fast\" title=\"Remove\" data-action=\"remove-employer\">\\\r\n                        <svg viewBox=\"0 0 20 20\">\\\r\n                            <use xlink:href=\"#icon-delete\"></use>\\\r\n                        </svg>\\\r\n                    </button>\\\r\n                </li>';\r\n            html += template.replace_all('{name}', _.escape(item.post_title))\r\n                .replace_all('{foto}', foto)\r\n                .replace_all('{ID}', item.ID)\r\n                .replace_all('{position}', _.escape(item.position))\r\n                .replace_all('{teams_count}', item.teams_count);\r\n        });\r\n\r\n        $(container).find('#team-employers').val(JSON.stringify(ids));\r\n        $(container).find('#team-sortable').html('').append(html);\r\n    };\r\n\r\n    // fill colorpicker\r\n    self.fill_color = function (container, key, value) {\r\n        key = key.replace_all('team_', '');\r\n        $(container).find('.' + key).find('input').val(value);\r\n        $(container).find('.' + key).find('span.color > i').css('background-color', value);\r\n    };\r\n\r\n    // fill colorpickers\r\n    self.fill_team_button_color = self.fill_color.bind(self);\r\n    self.fill_team_button_hover_color = self.fill_color.bind(self);\r\n    self.fill_team_button_text_color = self.fill_color.bind(self);\r\n    self.fill_team_button_text_hover_color = self.fill_color.bind(self);\r\n    self.fill_team_base_color = self.fill_color.bind(self);\r\n    self.fill_team_card_base_color = self.fill_color.bind(self);\r\n    self.fill_team_card_border_color = self.fill_color.bind(self);\r\n    self.fill_team_card_divider_color = self.fill_color.bind(self);\r\n    self.fill_team_card_shadow_color = self.fill_color.bind(self);\r\n    self.fill_team_card_even_row_color = self.fill_color.bind(self);\r\n    self.fill_team_panel_color = self.fill_color.bind(self);\r\n\r\n    // fill team avatar shape select (formstone)\r\n    self.fill_team_photo_shape = function(container, key, value){\r\n        //$(container).find('[name=\"team_photo_shape\"]').val(value).trigger('change');\r\n    };\r\n\r\n    // fill team avatar size select (formstone)\r\n    self.fill_team_photo_size = function(container, key, value){\r\n        //$(container).find('[name=\"team_photo_size\"]').val(value).trigger('change');\r\n    };\r\n\r\n    // fill blocks visibility\r\n    self.fill_visibility = function(container, key, value){\r\n        $(container).find('[name=\"' + key + '\"]').attr('data-checked', value).val(value);\r\n    };\r\n\r\n    // fill team block visibility\r\n    self.fill_team_slider = self.fill_visibility.bind(self);\r\n    self.fill_team_slider_autoplay = self.fill_visibility.bind(self);\r\n    self.fill_team_slider_adaptive = self.fill_visibility.bind(self);\r\n    self.fill_team_filter = self.fill_visibility.bind(self);\r\n    self.fill_team_panel = self.fill_visibility.bind(self);\r\n    self.fill_team_panel_contacts_visible = self.fill_visibility.bind(self);\r\n    self.fill_team_panel_social_visible = self.fill_visibility.bind(self);\r\n    self.fill_team_reveal = self.fill_visibility.bind(self);\r\n    self.fill_team_body_visible = self.fill_visibility.bind(self);\r\n    self.fill_team_photo_visible = self.fill_visibility.bind(self);\r\n    self.fill_team_name_visible = self.fill_visibility.bind(self);\r\n    self.fill_team_divider_visible = self.fill_visibility.bind(self);\r\n    self.fill_team_position_visible = self.fill_visibility.bind(self);\r\n    self.fill_team_short_bio_visible = self.fill_visibility.bind(self);\r\n    self.fill_team_phone_visible = self.fill_visibility.bind(self);\r\n    self.fill_team_email_visible = self.fill_visibility.bind(self);\r\n    self.fill_team_skype_visible = self.fill_visibility.bind(self);\r\n    self.fill_team_link_visible = self.fill_visibility.bind(self);\r\n    self.fill_team_location_visible = self.fill_visibility.bind(self);\r\n    self.fill_team_social_visible = self.fill_visibility.bind(self);\r\n    self.fill_team_skills_visible = self.fill_visibility.bind(self);\r\n\r\n    // fill employer photo\r\n    self.fill_employer_foto = function(container, key, value){\r\n        $('#employer-form-foto-remove', ats_panel).show();\r\n        if(value === ''){\r\n            $('#employer-form-foto-remove', ats_panel).hide();\r\n        }\r\n        var img = $('<img />').attr('src', value);\r\n        $(container).find('#employer-form-foto').html('').append(img);\r\n    };\r\n\r\n    self.fill_employer_panel_text = function(container, key, value) {\r\n        window.employer_panel_text_dfd = $.Deferred();\r\n        a_ajax.ajax({\r\n            action: prefix + '_get_tiny_mce',\r\n            data: {\r\n                id: key,\r\n                content: value\r\n            },\r\n            success_handler: function (result) {\r\n                $('.' + key, container).html(result);\r\n                if(tinyMCE.get(key)){\r\n                    tinymce.editors = [];\r\n                }\r\n                tinyMCEPreInit.mceInit[key].setup = function(editor) {\r\n                    editor.on('init', function(e) {\r\n                        employer_panel_text_dfd.resolve('tinymce init');\r\n                    });\r\n                    editor.on('change', function (e) {\r\n                        model.set('custom_fields.panel_text', editor.getContent())\r\n                    });\r\n                    editor.on('PostRender')\r\n                }\r\n                tinyMCE.init(tinyMCEPreInit.mceInit[key]);\r\n                quicktags( tinyMCEPreInit.qtInit[key] );\r\n            }\r\n        });\r\n    }\r\n\r\n    // fill team blocks preview checkboxes\r\n    self.fill_checkbox = function (container, key, value) {\r\n        if(key == 'team_name_bold'){\r\n        }\r\n        $(container).find('[name=\"' + key + '\"]').attr('data-checked', value).val(value);\r\n    };\r\n\r\n    // fill team preview checkboxes (is_bold)\r\n    self.fill_team_filter_bold = self.fill_checkbox.bind(self);\r\n    self.fill_team_name_bold = self.fill_checkbox.bind(self);\r\n    self.fill_team_position_bold = self.fill_checkbox.bind(self);\r\n    self.fill_team_short_bio_bold = self.fill_checkbox.bind(self);\r\n    self.fill_team_contacts_bold = self.fill_checkbox.bind(self);\r\n\r\n    // fill team preview checkboxes (is_italic)\r\n    self.fill_team_filter_italic = self.fill_checkbox.bind(self);\r\n    self.fill_team_name_italic = self.fill_checkbox.bind(self);\r\n    self.fill_team_position_italic = self.fill_checkbox.bind(self);\r\n    self.fill_team_short_bio_italic = self.fill_checkbox.bind(self);\r\n    self.fill_team_contacts_italic = self.fill_checkbox.bind(self);\r\n\r\n\r\n    self.fill_select = function(container, key, value){\r\n        $(container).find('[name=\"' + key + '\"]').val(value);\r\n        $(container).find('[name=\"' + key + '\"]').dropdown('update');\r\n    };\r\n\r\n    // fill team layout select (formstone)\r\n    self.fill_team_layout = self.fill_select.bind(self);\r\n    self.fill_team_order_by = self.fill_select.bind(self);\r\n    self.fill_team_hover = self.fill_select.bind(self);\r\n    self.fill_team_panel_theme = self.fill_select.bind(self);\r\n\r\n    // fill team template\r\n    self.fill_team_template = function (container, key, value) {\r\n        var html = '';\r\n        var layout = window.model.get('layout');\r\n        $.each(window.templates.get(layout), function(index, template){\r\n            html += '<option value=\"' + index + '\">' + template.label + '</option>';\r\n        });\r\n        $(container).find('[name=\"' + key + '\"]').html('').html(html).val(value);\r\n        $(container).find('[name=\"' + key + '\"]').dropdown('update');\r\n    };\r\n\r\n    self.set_employer_photo = function (id, size, callback) {\r\n        return a_ajax.ajax({\r\n            action: prefix + '_get_team_preview_photo',\r\n            data: {\r\n                'id': id,\r\n                'size': size,\r\n            },\r\n            success_handler: function (result) {\r\n                var img = result !== '' ? result : '<img src=\"' + window[prefix + '_localize']['default_avatar'] + '\"/>';\r\n                callback(img);\r\n            }\r\n        });\r\n    }\r\n\r\n    self.set_team_employers = function (ids, size, callback) {\r\n        return a_ajax.ajax({\r\n            action: prefix + '_get_team_employers_photos',\r\n            data: {\r\n                'ids': ids,\r\n                'size': size,\r\n            },\r\n            success_handler: function (result) {\r\n                callback(result);\r\n            }\r\n        });\r\n    };\r\n\r\n    // get templates\r\n    self.get_templates = function () {\r\n        return a_ajax.ajax({\r\n            action: prefix + '_get_templates',\r\n            success_handler: function (result) {\r\n                window.templates = new Backbone.NestedModel(result);\r\n            }\r\n        });\r\n    }\r\n\r\n    // init employer departmets\r\n    self.init_departments = function () {\r\n        return a_ajax.ajax({\r\n            action: prefix + '_get_taxonomy_terms',\r\n            data: {\r\n                taxonomy: prefix + '-employer-taxonomy'\r\n            },\r\n            success_handler: function (result) {\r\n                window.ats_employers_taxonomy_terms = result;\r\n            }\r\n        });\r\n    }\r\n\r\n    self.get_employer_form = function (callback) {\r\n        return a_ajax.ajax({\r\n            action: prefix + '_get_employer_form',\r\n            data: {\r\n\r\n            },\r\n            success_handler: function (result) {\r\n                callback(result);\r\n            }\r\n        });\r\n    }\r\n};","/**\r\n * jQuery UI Drag & Drop\r\n */\r\n\r\nvar AwesomeDrag = function () {\r\n    'use strict';\r\n\r\n    var $ = jQuery; // enable jQuery\r\n    var self = this;\r\n    self.sortableEl = '.connected-sortable';\r\n    self.employers_panel = '#panel-employers';\r\n\r\n    // Pop up employers list for Edit Team panel\r\n    self.cloneEmployers = function () {\r\n        // add class for z-index\r\n        var $clone = $(self.employers_panel).clone().removeAttr('id').attr('panel', 'employers-clone').addClass('at-transition');\r\n        window.ats_employers_clone = ats_employers.clone();\r\n\r\n        setTimeout(function () {\r\n            $(self.employers_panel).fadeOut();\r\n        }, 100);\r\n\r\n        var all_employers = $clone.find('li');\r\n        var model_employers = model.get('employers') || [];\r\n\r\n        // Hide employers that already exist in team\r\n        $.each(all_employers, function () {\r\n            var id = parseInt($(this).attr('employer-id'));\r\n            if (AwesomeUtil.find_in_array_of_objects(model_employers, 'ID', id)) {\r\n                var model = ats_employers_clone.findWhere({id: id});\r\n                $(this, $clone).remove();\r\n                ats_employers_clone.remove(model);\r\n            }\r\n        });\r\n\r\n        var $push_all_btn = $('<li><button data-action=\"push-all-employers\"><span title=\"Push all\">Push all</span></button></li>');\r\n        $clone.find('.panel-heading .panel-actions').prepend($push_all_btn);\r\n\r\n        $('.employers-list', ats_panel).html($clone);\r\n        self.bind_clone();\r\n\r\n        $(document).on('click', '[data-action=\"remove-employer\"]', function(){\r\n            var $item = $(this).parents('li[employer-id]'),\r\n                id = +$item.attr('employer-id'),\r\n                model = ats_employers.findWhere({id:id});\r\n            $('#employers-list', ats_panel).append($item);\r\n            ats_employers_clone.add(model);\r\n            self.updateElements();\r\n        });\r\n    };\r\n\r\n    // Bind highlight for drop zone on employer hover\r\n    self.bind_clone = function () {\r\n        $(document).on('mouseenter', \".panel-pop-up #employers-list\", function () {\r\n            $('#team-sortable', ats_panel).addClass('pulsate');\r\n        });\r\n        $(document).on('mouseleave', \".panel-pop-up #employers-list\", function () {\r\n            $('#team-sortable', ats_panel).removeClass('pulsate');\r\n        });\r\n        $(document).on('click', '[data-action=\"push-all-employers\"]', function () {\r\n            ats_employers_clone.reset();\r\n            var employers = $('ul.employers-list > li', ats_panel);\r\n            var employers_ids = _.clone(model.get('employers_ids'));\r\n            $.each(employers, function (index, item) {\r\n                $('#team-sortable', ats_panel).append(item);\r\n                var id = parseInt($(item).attr('employer-id'));\r\n                employers_ids.push(id);\r\n            });\r\n            model.set('employers_ids', employers_ids);\r\n        });\r\n        $(document).on('click', '[data-action=\"remove-all-employers\"]', function () {\r\n            var employers = $('#team-sortable > li', ats_panel);\r\n            $.each(employers, function (index, item) {\r\n                $('ul.employers-list', ats_panel).append(item);\r\n                var id = parseInt($(item).attr('employer-id'));\r\n                var model = ats_employers.findWhere({id: id});\r\n                ats_employers_clone.add(model);\r\n            });\r\n            model.set('employers_ids', []);\r\n        });\r\n    }\r\n\r\n    // Init employers drag & drop between two panels\r\n    self.initSortable = function () {\r\n        $(self.sortableEl).addClass('sortable-placeholder');\r\n        $('#team-sortable, #employers-list').sortable({\r\n            appendTo: 'body',\r\n            zIndex: 99999,\r\n            connectWith: self.sortableEl,\r\n            forcePlaceholderSize: true,\r\n            placeholder: 'sortable-placeholder-inner',\r\n            cursor: 'move',\r\n            cursorAt: {top: 25, left: 25},\r\n            helper: function (event, ui) { // clone employer photo to drag\r\n                var img = $(ui).find('.foto').clone();\r\n                var $clone = $('<li class=\"item\"></li>').append(img);\r\n                return $clone;\r\n            },\r\n            create: function (event, ui) {\r\n            },\r\n            start: function (event, ui) {\r\n                $(ui.helper).addClass('pop-up'); // add border to helper element\r\n                $('.a-slide-panel #team-sortable').addClass('drop-highlight'); // highlight drop zone\r\n            },\r\n            stop: function (event, ui) {\r\n                $('.a-slide-panel #team-sortable').removeClass('drop-highlight'); // stop drop zone highlighting\r\n            },\r\n            update: function (event, ui) {\r\n                $(ui.item).attr('style', ''); // remove pop-up class on drop event to remove border\r\n                var parent = $(ui.item[0].parentElement).attr('id');\r\n                var id = parseInt($(ui.item[0]).attr('employer-id'));\r\n                var model = ats_employers.findWhere({id:id});\r\n\r\n                if(parent == 'team-sortable'){\r\n                    ats_employers_clone.remove(model);\r\n                }else if(parent == 'employers-list'){\r\n                    ats_employers_clone.add(model);\r\n                }\r\n                self.updateElements();\r\n            }\r\n        });\r\n    };\r\n\r\n    // on every drag end save employers order and IDs to hidden field\r\n    self.updateElements = function () {\r\n        var $employers_field = $('#team-employers', ats_panel);\r\n        $employers_field.val('');\r\n        var employers = [];\r\n        var employers_ids = [];\r\n        $('#team-sortable li', ats_panel).each(function () {\r\n            var id = parseInt($(this).attr('employer-id'));\r\n            var foto = $(this).find('img').attr('src');\r\n            var name = $(this).find('.name').html();\r\n\r\n            var position = $(this).find('.position').html();\r\n            var teams_count = $(this).find('.teams_count').html();\r\n            employers_ids.push(id);\r\n            employers.push({\r\n                ID: id,\r\n                foto: foto,\r\n                post_title: name,\r\n                position: position,\r\n                teams_count: teams_count\r\n            });\r\n        });\r\n\r\n        var result = JSON.stringify(employers_ids);\r\n        $employers_field.val(result);\r\n        model.set('employers_ids', employers_ids);\r\n        model.set('employers', employers);\r\n    };\r\n\r\n    // destory drag & drop\r\n    self.destroy = function () {\r\n        $(self.employers_panel).show();\r\n        $('.panel.panel-pop-up').remove();\r\n        $('.connected-sortable').removeClass('sortable-placeholder');\r\n        $('#employers-list').sortable({\r\n            disabled: true\r\n        });\r\n        $('.employers-list', ats_panel).html('');\r\n        $('.panel-pop-up #employers-list').off();\r\n    };\r\n\r\n    // init drag & drop\r\n    self.init = function () {\r\n        self.cloneEmployers(); // clone employers panel and hide employers that already exists in team\r\n        self.updateElements();\r\n        self.initSortable();\r\n    };\r\n};","(function ($) {\r\n// Backbone View for edit team form\r\n    EmployerForm = Backbone.View.extend({\r\n        defaults: {\r\n            skill: {\r\n                star_options: [\r\n                    {\r\n                        value: '1',\r\n                        label: 'One'\r\n                    },\r\n                    {\r\n                        value: '2',\r\n                        label: 'Two',\r\n                    },\r\n                    {\r\n                        value: '3',\r\n                        label: 'Three',\r\n                    },\r\n                    {\r\n                        value: '4',\r\n                        label: 'Four',\r\n                    },\r\n                    {\r\n                        value: '5',\r\n                        label: 'Five',\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        template: {\r\n            skill: {\r\n                add: {\r\n                    body: _.template('\\\r\n                    <div class=\"input-group form-group\">\\\r\n                        <div class=\"display-table\">\\\r\n                            <div class=\"display-table-cell name\">\\\r\n                                <div class=\"input-group form-group\">\\\r\n                                    <span class=\"input-group-addon\">Skill:</span>\\\r\n                                    <input type=\"text\" class=\"form-control\" name=\"employer_skill_name\" placeholder=\"e.g. Photoshop\" value=\"<%= name %>\">\\\r\n                                </div>\\\r\n                            </div>\\\r\n                            <div class=\"display-table-cell value\">\\\r\n                                <%= value %>\\\r\n                            </div>\\\r\n                        </div>\\\r\n                        <div data-type=\"skill-alert\" class=\"skill-alert\"></div>\\\r\n                        <div class=\"buttons\">\\\r\n                            <%= buttons %>\\\r\n                        </div>\\\r\n                    </div>\\\r\n                    '),\r\n                    type: _.template('\\\r\n                    <div class=\"btn-group filter_text_transform btn-group-text-transform btn-group-radio model-field\" data-field-name=\"skill_type\">\\\r\n                        <label type=\"button\" class=\"btn btn-default <% if(percent_active){ %> active <% } %> skill_type\" data-option-name=\"skill_type\">\\\r\n                            <input type=\"radio\" style=\"display: none;\" name=\"employer_skill_type\" checked data-value=\"percent\" />\\\r\n                            <svg class=\"icon icon-percent\" viewBox=\"0 0 320 320\">\\\r\n                                <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#icon-percent\"></use>\\\r\n                            </svg>\\\r\n                        </label>\\\r\n                        <label type=\"button\" class=\"btn btn-default <% if(star_active){ %> active <% } %> skill_type\" data-option-name=\"skill_type\">\\\r\n                            <input type=\"radio\" style=\"display: none;\" name=\"employer_skill_type\" data-value=\"star\"/>\\\r\n                            <svg class=\"icon icon-star\" viewBox=\"0 0 1024 1024\">\\\r\n                                <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#icon-star-full\"></use>\\\r\n                            </svg>\\\r\n                        </label>\\\r\n                    </div>'),\r\n                    value: _.template('\\\r\n                        <div class=\"input-group model-field skill-value-percent\">\\\r\n                            <span class=\"input-group-addon\">% of 100:</span>\\\r\n                            <input type=\"text\" class=\"form-control\" name=\"employer_skill_value\" placeholder=\"\" value=\"<%= value %>\"/>\\\r\n                        </div>'),\r\n                    buttons: {\r\n                        add: _.template('\\\r\n                        <button class=\"btn btn-default\" type=\"button\" data-action=\"add-skill\">\\\r\n                            Add Skill\\\r\n                        </button>'),\r\n                        edit: _.template('\\\r\n                        <button class=\"btn btn-sm btn-default\" type=\"button\" data-action=\"save-skill\">\\\r\n                            <div class=\"a-slide-panel-spinner a-spinner\" data-wr_replaced=\"true\"  style=\"display: none;\">\\\r\n                                <div class=\"bounce1\"></div>\\\r\n                                <div class=\"bounce2\"></div>\\\r\n                                <div class=\"bounce3\"></div>\\\r\n                            </div>\\\r\n                            <span class=\"text\">Save Skill</span>\\\r\n                        </button>\\\r\n                        <button class=\"btn btn-sm btn-default\" type=\"button\" data-action=\"cancel-skill-edit\">\\\r\n                            Cancel\\\r\n                        </button>')\r\n                    }\r\n\r\n                },\r\n                body: _.template('\\\r\n                <li id=\"skill-<%= id %>\" class=\"skill\">\\\r\n                    <div class=\"skill-box\">\\\r\n                    <%= value %>\\\r\n                    <%= name %>\\\r\n                        <span class=\"actions\">\\\r\n                            <button class=\"svg\" data-action=\"edit-skill\" title=\"Edit skill\">\\\r\n                                <svg class=\"icon\" viewBox=\"0 0 28 28\">\\\r\n                                    <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#icon-pen\"></use>\\\r\n                                </svg>\\\r\n                            </button>\\\r\n                            <button class=\"svg\" data-action=\"delete-skill\" title=\"Delete skill\">\\\r\n                                <svg class=\"icon\" viewBox=\"0 0 28 28\">\\\r\n                                    <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#icon-trash\"></use>\\\r\n                                </svg>\\\r\n                            </button>\\\r\n                        </span>\\\r\n                    </div>\\\r\n                </li>'),\r\n                value: _.template('<span class=\"value\"><%= value %></span>'),\r\n                star: '<svg class=\"icon icon-star\" viewBox=\"0 0 1024 1024\">\\\r\n                <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#icon-star-full\"></use>\\\r\n                </svg>',\r\n                name: _.template('<span class=\"name\"><%= name %></span>')\r\n            }\r\n        },\r\n\r\n        initialize: function () {\r\n            var value = this.template.skill.add.value({\r\n                value: 0\r\n            });\r\n            var buttons = this.template.skill.add.buttons.add();\r\n            var template = this.template.skill.add.body({\r\n                name: '',\r\n                value: value,\r\n                buttons: buttons\r\n            });\r\n            $('.skill-form', ats_panel).html(template);\r\n            $('select[name=\"employer_skill_value\"]', ats_panel).dropdown();\r\n        },\r\n\r\n        edit_skill: function (index) {\r\n            var skills = model.get('custom_fields.skills');\r\n            var skill = skills[index];\r\n\r\n            var value = this.template.skill.add.value({\r\n                value: skill.type == 'percent' ? skill.value : ''\r\n            });\r\n            var buttons = this.template.skill.add.buttons.edit();\r\n            var template = this.template.skill.add.body({\r\n                name: skill.name,\r\n                value: value,\r\n                buttons: buttons\r\n            });\r\n            var template = $('<div class=\"skill-form skill-inline-form\" data-form=\"edit-skill\">' + template + '</div>');\r\n\r\n            // hide all other forms\r\n            $('.skills-list .skill-inline-form', ats_panel).remove();\r\n            $('.skills-list li.skill .skill-box').show();\r\n\r\n            $('.skills-list li#skill-' + index + ' .skill-box').hide();\r\n\r\n            var select_value = skill.type == 'star' ? skill.value : 1;\r\n\r\n            $('.skills-list li#skill-' + index, ats_panel).prepend(template);\r\n            $('select[name=\"employer_skill_value\"]', ats_panel).val(select_value);\r\n            $('select[name=\"employer_skill_value\"]', ats_panel).dropdown();\r\n        },\r\n\r\n        bindings: function () { // bindings for input fields\r\n            var result = {};\r\n            var cf = 'custom_fields.';\r\n\r\n            result['[name=\"employer_name\"]']            = 'name';\r\n            result['[name=\"employer_department\"]']      = 'department';\r\n            result['[name=\"employer_short_bio\"]']       = 'short_bio';\r\n\r\n            result['[name=\"employer_position\"]']        = cf + 'position';\r\n            result['[name=\"employer_thumbnail_id\"]']    = cf + 'thumbnail_id';\r\n            result['[name=\"employer_panel_text\"]']      = cf + 'panel_text';\r\n\r\n            result['[name=\"employer_email\"]']           = cf + 'email';\r\n            result['[name=\"employer_phone\"]']           = cf + 'phone';\r\n            result['[name=\"employer_skype\"]']           = cf + 'skype';\r\n            result['[name=\"employer_link\"]']            = cf + 'link';\r\n            result['[name=\"employer_link_text\"]']       = cf + 'link_text';\r\n            result['[name=\"employer_location\"]']        = cf + 'location';\r\n            result['[name=\"employer_profile\"]']         = cf + 'profile';\r\n            result['[name=\"employer_facebook\"]']        = cf + 'facebook';\r\n            result['[name=\"employer_twitter\"]']         = cf + 'twitter';\r\n            result['[name=\"employer_linkedin\"]']        = cf + 'linkedin';\r\n            result['[name=\"employer_google\"]']          = cf + 'google';\r\n            result['[name=\"employer_instagram\"]']       = cf + 'instagram';\r\n            result['[name=\"employer_pinterest\"]']       = cf + 'pinterest';\r\n            result['[name=\"employer_youtube\"]']         = cf + 'youtube';\r\n            result['[name=\"employer_vimeo\"]']           = cf + 'vimeo';\r\n            result['[name=\"employer_dribble\"]']         = cf + 'dribble';\r\n            result['[name=\"employer_flickr\"]']          = cf + 'flickr';\r\n            result['[name=\"employer_github\"]']          = cf + 'github';\r\n\r\n            result['.skills-list'] = {\r\n                observe: 'custom_fields.skills',\r\n                update: function ($el, val, model, options) {\r\n                    var self = this;\r\n                    var order = model.get('custom_fields.skills_order');\r\n\r\n                    var skills_ordered = [];\r\n                    _.each(order, function (item, index) {\r\n                        skills_ordered[index] = val[item];\r\n                    })\r\n\r\n                    $el.html('');\r\n\r\n                    if (val.length === 0) {\r\n                        return;\r\n                    }\r\n                    $.each(skills_ordered, function (index, item) {\r\n                        var name = self.template.skill.name({name: item.name});\r\n                        var value = item.value || 0;\r\n                        value = value + '%';\r\n                        if (item.type == 'star') {\r\n                            value = '';\r\n                            for (var i = 0; i < parseInt(item.value); i++) {\r\n                                value += self.template.skill.star;\r\n                            }\r\n                        }\r\n                        var value = self.template.skill.value({value: value});\r\n                        var skill = {\r\n                            id: order[index],\r\n                            value: value,\r\n                            name: name\r\n                        };\r\n                        var body = self.template.skill.body(skill);\r\n                        $el.append(body);\r\n                    });\r\n\r\n                    var employer_view = new AwesomeEmployer();\r\n                    employer_view.update_skill_order();\r\n                }\r\n            };\r\n\r\n            return result;\r\n        },\r\n        render: function () {\r\n            this.stickit();\r\n            return this;\r\n        }\r\n    });\r\n})(jQuery);\r\n","/**\r\n * Tooltip library\r\n */\r\n\r\nvar AwesomeTooltip = function (args) {\r\n    'use strict';\r\n    var self = this;\r\n    var $ = jQuery;\r\n    var $container = $(args.container); // parent container\r\n    var $content = $(args.content); // tooltip content\r\n    var direction = args.direction || 'top'; // tooltip direction\r\n    var data = args.data; // variables to replace tags in template\r\n    self.viewport = $(args.viewport || '#wpbody');\r\n    self.args = args;\r\n\r\n    // replace tags in template with values from [data] variables\r\n    self.replace_tags = function () {\r\n        var html = $content.prop('outerHTML');\r\n        $.each(data, function (key, value) {\r\n            html = html.replace_all('{{' + key + '}}', value);\r\n        });\r\n        return html;\r\n    };\r\n\r\n    self.show_field = function ($tooltip) {\r\n        var blocks = model.get('styles.' + model.get('layout'));\r\n\r\n        $('.model-field', $tooltip).hide();\r\n        $.each(blocks, function (key, value) {\r\n            if(value === null){\r\n                return;\r\n            }\r\n            $('.' + key, $tooltip).show(); // show field block\r\n        });\r\n    };\r\n\r\n    // create tooltip\r\n    self.open = function () {\r\n        /* jshint multistr: true */\r\n        var template = '<div class=\"a-tooltip-wrapper at-transition at-transition-fast\" data-field=\"##field##\">\\\r\n            <div class=\"a-tooltip a-tooltip-arrow\">\\\r\n            <div class=\"a-tooltip-content\">\\\r\n            ##content##\\\r\n            </div>\\\r\n            </div>\\\r\n            </div>';\r\n        var html = self.replace_tags();\r\n\r\n        html = template.replace(/##content##/g, html);\r\n        html = html.replace(/##field##/g, data.field_name);\r\n        var $tooltip = $(html);\r\n\r\n        $container.append($tooltip);\r\n\r\n        if(typeof window.model !== 'undefined'){\r\n            self.show_field($tooltip);\r\n        }\r\n\r\n        if(self.args.center){\r\n            var left = (ats_panel.width() - $tooltip.width())/2 - 30;\r\n            $tooltip.css('left', left + 'px');\r\n        }\r\n\r\n        if($tooltip.length === 0){\r\n            return;\r\n        }\r\n\r\n        $tooltip.addClass('tooltip-' + direction);\r\n    };\r\n\r\n    // destroy tooltip\r\n    self.destroy = function () {\r\n        $container.find('.a-tooltip-wrapper').remove();\r\n    };\r\n\r\n    // init tooltip\r\n    self.init = function () {\r\n        self.open();\r\n    };\r\n};","var ATS_Animation = function () {\r\n    var self = this;\r\n    var $ = jQuery;\r\n\r\n    self.delete = function ($el) {\r\n        var dfd = $.Deferred();\r\n        if($.browser.msie && parseInt($.browser.version, 10) <= 9){\r\n            $el.remove();\r\n            dfd.resolve();\r\n        }else{\r\n            $el.one('webkitAnimationEnd oanimationend msAnimationEnd animationend', function(e) {\r\n                dfd.resolve();\r\n                $el.remove();\r\n            }).addClass('removed-item');\r\n        }\r\n        return dfd;\r\n    }\r\n\r\n    self.delete_model = function ($el, model_name) {\r\n        var panel = $('#panel-' + model_name + 's');\r\n\r\n        self.delete($el);\r\n\r\n        // show notice 'No models found'\r\n        setTimeout(function () {\r\n            var count = $('#' + model_name + 's-list > li').length;\r\n            if(count === 0) {\r\n                var notice = panel.find('.empty-model');\r\n                notice.css('display', 'block').addClass('at-transition');\r\n                setTimeout(function () {\r\n                    notice.css('visibility', 'visible')\r\n                        .css('opacity', '1');\r\n                }, 1);\r\n                // update models count in panel heading\r\n                panel.find('.panel-heading span').remove();\r\n                return;\r\n            }\r\n            panel.find('> .panel-heading span').html('(' + count +')');\r\n        }, 500);\r\n    }\r\n}","/**\r\n * Team-related actions\r\n */\r\n(function( $ ) {\r\n    'use strict';\r\n\r\n    $(function() {\r\n        var model_team = 'team';\r\n        var drag = new AwesomeDrag();\r\n        var a_ajax = new AwesomeAjax('ats');\r\n        var ats_ajax = new ATS_Ajax();\r\n        var ats_animation = new ATS_Animation();\r\n\r\n        // Add New Team Button\r\n        $('[data-action=\"add-team\"]').on('click', function(){\r\n            var args = {\r\n                id: 'ats',\r\n                item_id: '#',\r\n                parent: '#wpcontent',\r\n                html: '#team-add-wrap',\r\n                model_name: model_team,\r\n                direction: 'right',\r\n                width: '100%',\r\n                load_model: ats_ajax.load_model,\r\n                callback_open: add_team_open_callback,\r\n                callback_close: edit_team_close_callback\r\n            };\r\n            window.panel = new AwesomePanel(args);\r\n            panel.init();\r\n        });\r\n\r\n        function bind_template_change(){\r\n            $('[name=\"team_template\"]', ats_panel).on('change', function(e){\r\n                var layout = model.get('layout');\r\n                var template = $(this).val();\r\n\r\n                model.set('styles.' + layout, templates.get(layout)[template].styles);\r\n                model.set('styles.' + layout + '.template', template);\r\n\r\n                preview.destroy();\r\n                preview.init();\r\n            });\r\n        }\r\n\r\n        function bind_layout_change(){\r\n            $('[name=\"team_layout\"]', ats_panel).on('change', function(e){\r\n                model.set('layout', $(this).val());\r\n\r\n                preview.destroy();\r\n                preview.init();\r\n            });\r\n        }\r\n\r\n        // Add Team open callback\r\n        function add_team_open_callback(){\r\n            window.preview = new AwesomeTeam();\r\n            preview.init().done(function () {\r\n                bind_layout_change();\r\n                bind_template_change();\r\n                drag.init();\r\n            });\r\n            $('[data-action=\"shortcode-team\"]', ats_panel).hide();\r\n        }\r\n\r\n        // Edit Team open callback\r\n        function edit_team_open_callback(){\r\n            window.preview = new AwesomeTeam();\r\n            preview.init().done(function () {\r\n                bind_layout_change();\r\n                bind_template_change();\r\n            });\r\n            drag.init();\r\n            show_shortcode_button();\r\n        }\r\n\r\n        // Edit Team close callback\r\n        function edit_team_close_callback(){\r\n            preview.destroy();\r\n            drag.destroy();\r\n            $('select', ats_panel).dropdown('destroy');\r\n        }\r\n\r\n        // Call edit Team panel on team card button click\r\n        $('[data-action=\"edit-team\"]').on('click', function(){\r\n            var parent = $(this).parents('li[team-id]');\r\n            var id = parseInt($(parent).attr('team-id'));\r\n\r\n            var args = {\r\n                id: 'ats',\r\n                item_id: id,\r\n                parent: '#wpcontent',\r\n                html: '#team-edit-wrap',\r\n                model_name: model_team,\r\n                direction : 'right',\r\n                width: '100%',\r\n                load_model: ats_ajax.load_model,\r\n                callback_open: edit_team_open_callback,\r\n                callback_close: edit_team_close_callback\r\n            };\r\n            window.panel = new AwesomePanel(args);\r\n            panel.init();\r\n        });\r\n        \r\n        function set_team_employers_callback(images) {\r\n            var dfd = $.Deferred();\r\n            var ids = model.get('employers_ids');\r\n            var $employers = $('#teams-list li[team-id=\"' + model.get('id') + '\"] .team-members');\r\n            $.each(ids, function (index, id) {\r\n                $employers.append('<li><div class=\"foto\">' + images[index] + '</div>');\r\n            });\r\n            dfd.resolve();\r\n            return dfd;\r\n        }\r\n\r\n        // update team card after team save\r\n        function update_team_card(){\r\n            var dfd = $.Deferred();\r\n            var ids = model.get('employers_ids');\r\n            var $employers = $('#teams-list li[team-id=\"' + model.get('id') + '\"] .team-members');\r\n            $employers.find('li[class!=\"empty\"]').remove();\r\n            if(ids.length > 0){\r\n                ats_ajax.set_team_employers(ids, 'a-thumbnail', set_team_employers_callback).then(function(){\r\n                    dfd.resolve();\r\n                });\r\n            }else{\r\n                dfd.resolve();\r\n            }\r\n            $('#teams-list li[team-id=\"' + model.get('id') + '\"] span.name').html(model.get('name'));\r\n            return dfd;\r\n        }\r\n\r\n        // show shortcode button after create/update\r\n        function show_shortcode_button(){\r\n            var id = model.get('id');\r\n            if(id !== 0){\r\n                var result = '[a-team-showcase id=\"' + id + '\"]';\r\n                $('[data-action=\"shortcode-team\"]', ats_panel).find('input').val(result);\r\n                $('[data-action=\"shortcode-team\"]', ats_panel).show();\r\n            }\r\n        }\r\n\r\n        // Save Team\r\n        $('#team-edit-wrap .save-panel, #team-add-wrap .save-panel').on('click', function(){\r\n            if(window.model.locked){\r\n                return false; // prevent double click on save button\r\n            }\r\n\r\n            var form = $('[data-type=\"form\"]', ats_panel);\r\n            var model = $(form).attr('data-model');\r\n            var $alert = form.find('.alert');\r\n            $alert.attr('class', 'alert').hide();\r\n            window.model.locked = true;\r\n\r\n            window.panel.hide_content();\r\n            window.panel.animation_start(); // show animation\r\n\r\n            var team_model = window.model.clone();\r\n            team_model.unset('grid_html')\r\n            team_model.unset('table_html')\r\n            team_model.unset('widget_html')\r\n\r\n            a_ajax.ajax({\r\n                action: 'ats_update_or_new_' + model,\r\n                data: {\r\n                    data: team_model.toJSON(),\r\n                },\r\n                success_handler: function (data) {\r\n                    window.model.set('id', data);\r\n                    show_shortcode_button();\r\n                    update_team_card().then(function () {\r\n                        window.panel.show_content();\r\n                        window.panel.animation_end();\r\n                        window.model.locked = false;\r\n                    });\r\n                },\r\n                success_error_handler: function (errors) {\r\n                    var html = '';\r\n                    $.each(errors, function (index, value) {\r\n                        html += '<p>';\r\n                        html += value.message;\r\n                        html += '</p>';\r\n                    });\r\n                    $alert.addClass('alert-warning').show().html(html);\r\n                    window.panel.show_content();\r\n                    window.panel.animation_end();\r\n                    window.model.locked = false;\r\n                },\r\n                error_handler: function (data) {\r\n                    $alert.addClass('alert-warning').show().html(data);\r\n                    window.model.locked = false;\r\n                }\r\n            });\r\n        });\r\n\r\n        // Delete Team on team card button click\r\n        $('[data-action=\"delete-team\"]').on('click', function(){\r\n            var $parent = $(this).parents('li[team-id]');\r\n            var $spinner = $(this).find('.a-spinner');\r\n            var $icon = $(this).find('svg');\r\n            var id = parseInt($parent.attr('team-id'));\r\n            var model_name = model_team;\r\n\r\n            if(confirm('You really want to delete team?')) {\r\n                $icon.hide(); // hide icon\r\n                $spinner.show(); // show animation\r\n                a_ajax.delete_model(id, model_name).then(function () {\r\n                    ats_animation.delete_model($parent, model_name);\r\n                })\r\n            }\r\n        });\r\n\r\n        // Get Team Shortcode\r\n        $('[data-action=\"shortcode-team\"]').on({'mouseenter': function(){\r\n            var $tooltip = $(this).find('.a-tooltip-wrapper');\r\n            setTimeout(function(){\r\n                $tooltip.find('input').select();\r\n            },300);\r\n        },'mouseleave': function(){\r\n            $(this).find('.a-tooltip-wrapper');\r\n        }});\r\n\r\n        // Random team style\r\n        $('[data-action=\"random-team-style\"]').on('click', function () {\r\n            var colorpickers = ['base', 'card_base', 'card_border', 'card_divider', 'card_shadow', 'card_even_row', 'name', 'position', 'short_bio', 'contacts', 'social'];\r\n            model.random();\r\n            $.each(colorpickers, function (index, value) {\r\n                var field = value + '_color';\r\n                var layout = model.get('layout');\r\n                update_colorpicker(field, model.get('styles.' + layout + '.' + field));\r\n            });\r\n        });\r\n\r\n        var update_colorpicker = function (field, value) {\r\n            if(field == 'phone_color' || field == 'email_color' || field == 'skype_color'){\r\n                field = 'contacts_color';\r\n            }\r\n            if(typeof window['colorpicker_' + field] === 'object'){\r\n                window['colorpicker_' + field].colorpicker('setValue', value);\r\n            }\r\n        };\r\n\r\n        // call modal\r\n        /*$('[data-target]').on('click', function (e) {\r\n            e.preventDefault();\r\n            var target = $(this).attr('data-target');\r\n            $(target).modal();\r\n        });*/\r\n\r\n        $('[data-action=\"modal\"]').lightbox({\r\n            minWidth: 50,\r\n            minHeight: 100\r\n        });\r\n\r\n        // Custom CSS Spoiler\r\n        $('[data-toggle=\"collapse\"]').on('click', function () {\r\n            var target_id = $(this).attr('data-target');\r\n            $(target_id, ats_panel).toggleClass('in');\r\n        });\r\n\r\n    });\r\n})( jQuery );","/**\r\n * Employer-related actions\r\n */\r\n(function ($) {\r\n    'use strict';\r\n\r\n    $(function () {\r\n        var model_employer = 'employer';\r\n        var a_ajax = new AwesomeAjax('ats');\r\n        var ats_ajax = new ATS_Ajax();\r\n        var ats_animation = new ATS_Animation();\r\n\r\n        // Add New Employer Button\r\n        $('[data-action=\"add-employer\"]').on('click', function () {\r\n            var args = {\r\n                id: 'ats',\r\n                item_id: '#',\r\n                parent: '#wpcontent',\r\n                html: '#employer-add-wrap',\r\n                model_name: model_employer,\r\n                direction: 'right',\r\n                width: '67%',\r\n                load_model: employer_load_model,\r\n                callback_open: edit_employer_open_callback,\r\n                callback_close: edit_employer_close_callback\r\n            };\r\n            window.panel = new AwesomePanel(args);\r\n            panel.init();\r\n        });\r\n\r\n        function employer_load_model(id, model_name) {\r\n            return ats_ajax.load_model(id, model_name).then(function () { // wait until backbone model is loaded\r\n                return ats_ajax.init_departments().then(function () { // wait until all possible departments is loaded\r\n                    var dfd = $.Deferred();\r\n                    var dfd1 = $.Deferred();\r\n\r\n                    window.selectize_instance = $('[name=\"employer_department\"]', ats_panel).selectize({\r\n                        plugins: ['restore_on_backspace', 'remove_button'],\r\n                        delimiter: ',',\r\n                        addPrecedence: false,\r\n                        options: ats_employers_taxonomy_terms || [],\r\n                        items: model.get('department') || [],\r\n                        valueField: 'name',\r\n                        labelField: 'name',\r\n                        searchField: 'name',\r\n                        preload: true,\r\n\r\n                        onInitialize: function () {\r\n                            dfd1.resolve('selectize init'); // selectize is initialized => resolve promise\r\n                        },\r\n\r\n                        create: function (input) {\r\n                            return {\r\n                                value: input,\r\n                                name: input\r\n                            }\r\n                        },\r\n\r\n                        render: {\r\n                            option: function (item, escape) {\r\n                                return '<div>' + escape(item.name) + '</div>';\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                    ats_ajax.fill_employer_panel_text(ats_panel, 'employer_panel_text', model.get('custom_fields.panel_text'));\r\n\r\n                    $.when(dfd1, employer_panel_text_dfd).done(function (v1, v2) {\r\n                        dfd.resolve('both init');\r\n                    });\r\n\r\n                    return dfd;\r\n                });\r\n            })\r\n        }\r\n\r\n        function edit_employer_open_callback() {\r\n            $('#employer-form-foto-remove', ats_panel).hide(); // show \"remove\" button\r\n\r\n            window.preview = new AwesomeEmployer();\r\n            preview.init();\r\n        }\r\n\r\n        function edit_employer_close_callback() {\r\n            if (\r\n                typeof (selectize_instance) != 'undefined' &&\r\n                typeof (selectize_instance[0]) != 'undefined' &&\r\n                typeof (selectize_instance[0].selectize) != 'undefined'\r\n            ){\r\n                selectize_instance[0].selectize.destroy();\r\n            }\r\n            if(typeof preview != 'undefined'){\r\n                preview.destroy();\r\n            }\r\n            if(typeof tinyMCEPreInit !== 'indefined'){\r\n                tinyMCEPreInit.mceInit = {}\r\n                tinyMCEPreInit.qtInit = {}\r\n            }\r\n            $('div.employer_panel_text').html('');\r\n        }\r\n\r\n        // Edit Employer\r\n        $('[data-action=\"edit-employer\"]').on('click', function (e) {\r\n            var id = parseInt($(this).attr('employer-id'));\r\n\r\n            // if we hit on employer but not Delete button\r\n            if (\r\n                $(e.target).parents('button').attr('class') !== 'delete-employer' &&\r\n                $(e.target).attr('class') !== 'delete-employer'\r\n            ) {\r\n\r\n                var args = {\r\n                    id: 'ats',\r\n                    item_id: id,\r\n                    parent: '#wpcontent',\r\n                    html: '#employer-edit-wrap',\r\n                    model_name: model_employer,\r\n                    direction: 'right',\r\n                    width: '67%',\r\n                    load_model: employer_load_model,\r\n                    callback_open: edit_employer_open_callback,\r\n                    callback_close: edit_employer_close_callback\r\n                };\r\n\r\n                window.panel = new AwesomePanel(args);\r\n                panel.init();\r\n\r\n            }\r\n        });\r\n\r\n        function set_employer_photo_callback(img) {\r\n            $('#employers-list li[employer-id=\"' + model.get('id') + '\"] .foto').html(img);\r\n        }\r\n\r\n        function update_employer_card() {\r\n            var post_id = model.get('id');\r\n            ats_ajax.set_employer_photo(post_id, 'a-small', set_employer_photo_callback);\r\n            $('#employers-list li[employer-id=\"' + post_id + '\"] span.name').html(model.escape('name'));\r\n            $('#employers-list li[employer-id=\"' + post_id + '\"] span.position').html(model.escape('custom_fields.position'));\r\n        }\r\n\r\n        // Bind AJAX call on Form Submit Button\r\n        $('#employer-edit-wrap .save-panel, #employer-add-wrap .save-panel').on('click', function () {\r\n            var form = $('[data-type=\"form\"]', ats_panel);\r\n            var model = $(form).attr('data-model');\r\n            var $alert = form.find('[data-type=\"employer-alert\"]');\r\n            $alert.attr('class', 'alert').hide();\r\n\r\n            window.panel.hide_content();\r\n            window.panel.animation_start(); // show animation\r\n\r\n            a_ajax.ajax({\r\n                action: 'ats_update_or_new_' + model,\r\n                data: {\r\n                    data: window.model.toJSON()\r\n                },\r\n                success_handler: function (data) {\r\n                    window.model.set('id', data);\r\n                    update_employer_card();\r\n                    window.panel.show_content();\r\n                    window.panel.animation_end();\r\n                },\r\n                success_error_handler: function (errors) {\r\n                    var html = '';\r\n                    $.each(errors, function (index, value) {\r\n                        html += '<p>';\r\n                        html += value.message;\r\n                        html += '</p>';\r\n                    });\r\n                    $alert.addClass('alert-warning').show().html(html);\r\n                    window.panel.show_content();\r\n                    window.panel.animation_end();\r\n                },\r\n                error_handler: function () {\r\n                    $alert.addClass('alert-warning').show().html(data);\r\n                    window.panel.show_content();\r\n                    window.panel.animation_end();\r\n                }\r\n            });\r\n        });\r\n\r\n        // Delete Employer\r\n        $('button.delete-employer').on('click', function () {\r\n            var $parent = $(this).parents('li');\r\n            var id = parseInt($parent.attr('employer-id'));\r\n            var model_name = model_employer;\r\n\r\n            if (confirm('You really want to delete employer?')) {\r\n                a_ajax.delete_model(id, model_name).then(function () {\r\n                    ats_animation.delete_model($parent, model_name);\r\n                });\r\n            }\r\n        });\r\n\r\n    });\r\n})(jQuery);","var fields = {\r\n    gaps: {\r\n        type: 'group',\r\n        members: ['gaps', 'card_gaps', 'card_margin'],\r\n        field: {\r\n            type: 'size',\r\n            limits: [0, 10]\r\n        }\r\n    },\r\n\r\n    card_width: {\r\n        type: 'percent',\r\n        limits: [30, 100]\r\n    },\r\n\r\n    photo_shape: {\r\n        type: 'radio',\r\n        values: ['square', 'round']\r\n    },\r\n    photo_size: {\r\n        type: 'radio',\r\n        values: ['a-medium', 'a-thumbnail', 'a-small', 'custom']\r\n    },\r\n    photo_width: {\r\n        type: 'size',\r\n        limits: [50, 100]\r\n    },\r\n\r\n    // Colors\r\n    card_colors: {\r\n        type: 'group',\r\n        members: [\r\n            //'base_color',\r\n            'card_base_color',\r\n            'card_border_color',\r\n            'card_divider_color',\r\n            'card_shadow_color',\r\n            'card_even_row_color'\r\n        ],\r\n        field: {\r\n            group: 'card',\r\n            type: 'color'\r\n        }\r\n    },\r\n\r\n    text_colors: {\r\n        type: 'group',\r\n        members: [\r\n            'name_color',\r\n            'position_color',\r\n            'short_bio_color',\r\n            'contacts_color',\r\n            'social_color'\r\n        ],\r\n        field: {\r\n            group: 'text',\r\n            type: 'color'\r\n        }\r\n    },\r\n\r\n    text_transforms: {\r\n        type: 'group',\r\n        members: ['name_text_transform', 'position_text_transform', 'short_bio_text_transform'],\r\n        field: {\r\n            type: 'radio',\r\n            values: ['none', 'uppercase']\r\n        }\r\n    },\r\n\r\n    font_sizes: {\r\n        type: 'group',\r\n        members: ['name_font_size', 'position_font_size', 'short_bio_font_size'],\r\n        field: {\r\n            type: 'size',\r\n            limits: [12, 20]\r\n        }\r\n    },\r\n\r\n    bolds: {\r\n        type: 'group',\r\n        members: ['name_bold', 'position_bold', 'short_bio_bold'],\r\n        field: {\r\n            type: 'boolean'\r\n        }\r\n    },\r\n\r\n    italics: {\r\n        type: 'group',\r\n        members: ['name_italic', 'position_italic', 'short_bio_italic'],\r\n        field: {\r\n            type: 'boolean'\r\n        }\r\n    },\r\n\r\n    // Blocks margins\r\n    top_margins: {\r\n        type: 'group',\r\n        members: [\r\n            'photo_top_margin',\r\n            'name_top_margin',\r\n            'position_top_margin',\r\n            'divider_top_margin',\r\n            'short_bio_top_margin',\r\n            'contacts_top_margin',\r\n            'social_top_margin'\r\n        ],\r\n        field: {\r\n            type: 'size',\r\n            limits: [0, 15]\r\n        }\r\n    }\r\n};\r\n\r\nvar rules = {\r\n    grid: {\r\n        exclude: []\r\n    },\r\n    table: {\r\n        exclude: [\r\n            'name_color',\r\n            'position_color',\r\n            'short_bio_color',\r\n            'social_color'\r\n        ]\r\n    },\r\n    widget: {\r\n        exclude: [\r\n            'photo_size'\r\n        ]\r\n    },\r\n};\r\n\r\nvar AwesomeRandom = function () {\r\n    var self = this;\r\n    self.number = function (limit) {\r\n        if(limit.length > 2){\r\n            return;\r\n        }\r\n        var min = limit[0];\r\n        var max = limit[1];\r\n        return Math.floor(Math.random() * (max - min + 1) + min);\r\n    };\r\n\r\n    self.boolean = function () {\r\n        return this.number([0,1]);\r\n    };\r\n\r\n    self.size = function (limit) {\r\n        return this.number(limit) + 'px';\r\n    };\r\n\r\n    self.percent = function (limit) {\r\n        return this.number(limit) + '%';\r\n    };\r\n\r\n    self.radio = function (values) {\r\n        if(values.length < 1){\r\n            return;\r\n        }\r\n        return values[Math.floor(Math.random() * values.length)];\r\n    };\r\n\r\n    self.array = function (array) {\r\n        return _.shuffle(array);\r\n    };\r\n\r\n    self.color_delta = function (number, range) {\r\n        var min = parseInt(number) - range < 0 ? 0 : parseInt(number) - range;\r\n        var max = parseInt(number) + range > 255 ? 255 : parseInt(number) + range;\r\n        return [min, max];\r\n    };\r\n\r\n    self.invert_color = function (color) {\r\n        var r = 0xFF ^ color[0];\r\n        var g = 0xFF ^ color[1];\r\n        var b = 0xFF ^ color[2];\r\n        return [r,g,b];\r\n    };\r\n    \r\n    self.black_or_white = function (color) {\r\n        var lightness = color[0]*0.2126 + color[1]*0.7152 + color[2]*0.0722;\r\n        return lightness >= 127 ? [0, 0, 0] : [255, 255, 255];\r\n    };\r\n\r\n    self.color = function (seed_color) {\r\n        var limits = [];\r\n        if(seed_color === null){\r\n            limits[0] = [0, 255];\r\n            limits[1] = [0, 255];\r\n            limits[2] = [0, 255];\r\n        }else{\r\n            limits[0] = self.color_delta(seed_color[0], 10);\r\n            limits[1] = self.color_delta(seed_color[1], 10);\r\n            limits[2] = self.color_delta(seed_color[2], 10);\r\n        }\r\n        var r = Math.floor(this.number(limits[0]));\r\n        var g = Math.floor(this.number(limits[1]));\r\n        var b = Math.floor(this.number(limits[2]));\r\n        //var a = parseFloat(Math.random()).toFixed(2);\r\n        return [r,g,b];\r\n    };\r\n\r\n};\r\n\r\nvar AwesomeModel = Backbone.NestedModel.extend({\r\n    push: function (arg, val) {\r\n        if(typeof this.get(arg) == 'undefined'){\r\n            this.set(arg, []);\r\n        }\r\n        var arr = _.clone(this.get(arg));\r\n        arr.push(val);\r\n        this.set(arg, arr);\r\n    },\r\n\r\n    unset_array: function (arg, index) {\r\n        var arr = _.clone(this.get(arg));\r\n        arr.splice(index, 1);\r\n        this.set(arg, arr);\r\n    },\r\n\r\n    make_seed: function (args) {\r\n        var random = new AwesomeRandom();\r\n        var self = this;\r\n        var rules = args.rules;\r\n        var seed = args.seed;\r\n        var fields = args.fields;\r\n        var seed_card_color = args.seed_card_color;\r\n\r\n        if(seed_card_color === null) {\r\n            seed_card_color = random.color(seed_card_color);\r\n        }\r\n\r\n        $.each(fields, function (key, value) {\r\n            if(value.type == 'group'){\r\n                var fields = {};\r\n                $.each(value.members, function (index, inner_value) {\r\n                    fields[inner_value] = value.field;\r\n\r\n                });\r\n                seed = self.make_seed({\r\n                    fields: fields,\r\n                    seed: seed,\r\n                    seed_card_color: seed_card_color,\r\n                    //seed_text_color: seed_text_color\r\n                });\r\n            }else{\r\n                var field_value  = null;\r\n                switch (value.type){\r\n                    case 'number':\r\n                        field_value = random.number(value.limits);\r\n                        break;\r\n                    case 'boolean':\r\n                        field_value = random.boolean();\r\n                        break;\r\n                    case 'size':\r\n                        field_value = random.size(value.limits);\r\n                        break;\r\n                    case 'percent':\r\n                        field_value = random.percent(value.limits);\r\n                        break;\r\n                    case 'radio':\r\n                        field_value = random.radio(value.values);\r\n                        break;\r\n                    case 'array':\r\n                        field_value = random.array(value.values);\r\n                        break;\r\n                    case 'color':\r\n                        var alpha = null;\r\n                        if(value.group == 'card'){\r\n                            alpha = '0.' + random.number([0,99]);\r\n                            var color = random.color(seed_card_color);\r\n                            field_value = 'rgba(' + color.join(',') + ',' +  alpha + ')';\r\n                        }\r\n                        if(value.group == 'text'){\r\n                            alpha = '0.' + random.number([50,99]);\r\n                            if(seed_card_color === null) {\r\n                                return;\r\n                            }\r\n                            var inverted = random.black_or_white(seed_card_color);\r\n                            field_value = 'rgba(' + inverted.join(',') + ',' +  alpha + ')';\r\n                        }\r\n                        break;\r\n                }\r\n                seed[key] = field_value;\r\n            }\r\n        });\r\n        return seed;\r\n    },\r\n\r\n\r\n    random: function () {\r\n        var random_values = {};\r\n        var args = {\r\n            fields: fields,\r\n            seed: random_values,\r\n            seed_card_color: null,\r\n            //seed_text_color: null\r\n        };\r\n        var seed = this.make_seed(args);\r\n\r\n        var layout = model.get('layout');\r\n        var styles = model.get('styles.' + layout);\r\n\r\n        $.each(styles, function (key, value) {\r\n            if($.inArray(key, rules[layout].exclude) > -1){\r\n                return;\r\n            }\r\n            if(seed.hasOwnProperty(key)){\r\n                model.set('styles.' + layout + '.' + key, seed[key]);\r\n            }\r\n        });\r\n    }\r\n});","var Employer = Backbone.NestedModel.extend({\r\n\r\n});\r\n\r\nvar Employers = Backbone.Collection.extend({\r\n    model: Employer\r\n});\r\n\r\nwindow.ats_employers = new Employers();\r\nwindow.ats_employers_clone = new Employers();","/**\r\n * Team preview\r\n */\r\n\r\nvar AwesomeTeam = function (){\r\n    'use strict';\r\n    var $ = jQuery; // enable jQuery\r\n    var self = this;\r\n    var tooltip_hint = '<p class=\"hint\">Notice: style settings for Skype, Phone, Email and Website are common for all these fields.</p>';\r\n\r\n    self.preview = $('.team-preview', ats_panel);\r\n    self.employers_panel = '#panel-employers';\r\n    self.layout = model.get('layout');\r\n    self.colorpickers = [\r\n        'button',\r\n        'button_hover',\r\n        'button_text',\r\n        'button_text_hover',\r\n        'base',\r\n        'panel',\r\n        'card_base',\r\n        'card_border',\r\n        'divider',\r\n        'card_shadow',\r\n        'card_even_row',\r\n        'name',\r\n        'position',\r\n        'short_bio',\r\n        'contacts',\r\n        'social',\r\n        'skills_bar',\r\n        'skills_text'\r\n    ];\r\n    self.tooltips = {\r\n        photo: {\r\n            type: 'photo',\r\n            hint: ''\r\n        },\r\n        name: {\r\n            type: 'font',\r\n            hint: ''\r\n        },\r\n        position: {\r\n            type: 'font',\r\n            hint: ''\r\n        },\r\n        short_bio: {\r\n            type: 'font',\r\n            hint: ''\r\n        },\r\n        divider: {\r\n            type: 'divider',\r\n            hint: ''\r\n        },\r\n        social: {\r\n            type: 'social',\r\n            hint: ''\r\n        },\r\n        contacts: {\r\n            type: 'font',\r\n            hint: tooltip_hint\r\n        },\r\n        skills: {\r\n            type: 'skills',\r\n            hint: ''\r\n        }\r\n    };\r\n\r\n    self.labels = {\r\n        grid: {\r\n            name: 'Card',\r\n            card_divider_color: 'Divider'\r\n        },\r\n        table: {\r\n            name: 'Row',\r\n            card_divider_color: 'Separators'\r\n        },\r\n        widget: {\r\n            name: 'Widget',\r\n            card_divider_color: 'Separators'\r\n        },\r\n    };\r\n\r\n    // show personal style fields\r\n    self.show_fields = function(){\r\n        var dfd = $.Deferred();\r\n        var blocks = model.get('styles.' + model.get('layout') + '.blocks_order');\r\n        if(model.get('layout') == 'grid' && $.inArray('body', blocks) == -1){\r\n            blocks.push('body'); // add pseudo-block body for grid layout\r\n        }\r\n        $('.team-blocks-visibility .visible').hide();\r\n        $.each(blocks, function (index, item) {\r\n            $('.' + item + '_visible').show();\r\n        });\r\n\r\n        blocks = model.get('styles.' + model.get('layout'));\r\n\r\n        $('#team-form .model-field').hide();\r\n        $.each(blocks, function (key, value) {\r\n            $('#team-form .' + key).show(); // show field block\r\n            if(key in self.labels[model.get('layout')]){\r\n                $('#team-form .' + key + ' .input-group-addon', ats_panel).eq(0).html(self.labels[model.get('layout')][key]); // rename layout special fields labels if exist\r\n            }\r\n        });\r\n\r\n        //$('.interface-elements').show();\r\n        $('.interface-styling').show();\r\n\r\n        $('h5.card-label', ats_panel).html(self.labels[model.get('layout')].name + ' settings');\r\n        $('h5.layout-label', ats_panel).show();\r\n        if(model.get('layout') != 'grid'){\r\n            $('h5.layout-label', ats_panel).hide();\r\n        }\r\n        if(model.get('layout') == 'widget'){\r\n            //$('.interface-elements').hide();\r\n            $('.interface-styling').hide();\r\n        }\r\n        $('.empty-model .hint').html('Add at least one employee from the main plugins\\' screen.');\r\n        dfd.resolve();\r\n        return dfd;\r\n    };\r\n\r\n    self.insert_preview_html = function () {\r\n        var layout = model.get('layout');\r\n        var html = model.get(layout + '_html');\r\n        self.preview.html(html); // append preview based on current team layout option\r\n    };\r\n\r\n    // two way data bindings for edit team form\r\n    self.bind_form = function(){\r\n        var dfd = $.Deferred();\r\n\r\n        // layout align\r\n        $('.team-align .btn', ats_panel).on('click', function(e){\r\n            e.preventDefault();\r\n            var $el = $(this);\r\n            var $parent = $el.parent('.btn-group');\r\n            var $input = $el.find('input');\r\n            var value = $input.attr('data-value');\r\n            var model_field = 'styles.' + model.get('layout') + '.align';\r\n\r\n            $parent.find('.btn').removeClass('active');\r\n            model.set(model_field, value);\r\n            $el.addClass('active');\r\n        });\r\n\r\n        // preview blocks visibility\r\n        $('.toggle', ats_panel).on('click', function(e){\r\n            e.preventDefault();\r\n            var $el = $(this);\r\n            var $input = $el.find('input');\r\n            var field = $input.attr('name').split('team_').join('');\r\n            var model_field = 'styles.' + model.get('layout') + '.' + field;\r\n            $input.prop('checked', 'checked');\r\n            if($input.attr('data-checked') == 1){\r\n                model.set(model_field, '0');\r\n                $input.val('0');\r\n                $input.attr('data-checked', '0');\r\n            }else{\r\n                model.set(model_field, '1');\r\n                $input.val('1');\r\n                $input.attr('data-checked', '1');\r\n            }\r\n        });\r\n\r\n        // panels accordion\r\n        $('.panel-collapse-team .panel-heading').on('click', function () {\r\n            var opened = $(this).hasClass('a-collapse-head-open');\r\n            if(opened){\r\n                return false;\r\n            }\r\n            var group = $(this).parents('.panel-collapse-team').eq(0);\r\n            $('.panel-body', group).addClass('a-collapse');\r\n            $('.panel-heading', group).removeClass('a-collapse-head-open');\r\n            $(this).next('.panel-body').removeClass('a-collapse');\r\n            $(this).toggleClass('a-collapse-head-open');\r\n        });\r\n\r\n        window.team_form_view = new TeamForm({\r\n            model: window.model\r\n        });\r\n        team_form_view.setElement($('#team-form', ats_panel));\r\n        team_form_view.render();\r\n        dfd.resolve();\r\n        return dfd;\r\n    };\r\n\r\n    // two way data binding for team preview\r\n    self.bind_preview = function(){\r\n        var dfd = $.Deferred();\r\n        window.preview_view = new TeamPreview({\r\n            model: window.model\r\n        });\r\n        preview_view.setElement($('#team-form', ats_panel));\r\n        preview_view.render();\r\n        dfd.resolve();\r\n        return dfd;\r\n    };\r\n\r\n    // init jQuery UI drag & drop for preview blocks\r\n    self.init_sortable_fields = function(){\r\n        var dfd = $.Deferred();\r\n        var axis = model.get('layout') == 'table' ? 'x' : 'y';\r\n        var card = self.preview.find('ul li .sortable-box');\r\n        card.sortable({\r\n            axis: axis,\r\n            forcePlaceholderSize: true,\r\n            forceHelperSize: true,\r\n            placeholder: 'preview-placeholder',\r\n            helper: function(event, ui){\r\n                var $clone =  $(ui).clone();\r\n                var $wrap = $('<div></div>');\r\n                $clone.css('display', 'table-cell');\r\n                $wrap.css('display', 'table');\r\n                $wrap.css('vertical-align', 'middle');\r\n                $wrap.append($clone);\r\n                $wrap.css('margin-top', $(ui).css('margin-top'));\r\n                $wrap.css('width', '100%');\r\n                return $wrap;\r\n            },\r\n            start: function(event, ui){\r\n                ui.placeholder.height(ui.helper.height());\r\n                ui.placeholder.width(ui.helper.width());\r\n                ui.placeholder.css('margin-top', ui.helper.css('margin-top'));\r\n            },\r\n            update: function (event, ui) {\r\n                var blocks = card.find('.sortable');\r\n                var order = [];\r\n                $.each(blocks, function () {\r\n                    var block = $(this).attr('data-block-name');\r\n                    order.push(block);\r\n                });\r\n                $('[name=\"team_blocks_order\"]', ats_panel).val(JSON.stringify(order)); // set new blocks order to hidden field\r\n                model.set('styles.' + model.get('layout') + '.blocks_order', order);\r\n            }\r\n        });\r\n        dfd.resolve();\r\n        return dfd;\r\n    };\r\n\r\n    self.set_rgba_color = function (field, color) {\r\n        var model_base = 'styles.' + model.get('layout') + '.';\r\n        var rgba = color.toRGB();\r\n        color = 'rgba(' + rgba.r + ',' + rgba.g + ',' + rgba.b + ',' + rgba.a + ')';\r\n        model.set(model_base + field, color);\r\n    };\r\n\r\n    // init colorpickers\r\n    self.init_colorpicker = function () {\r\n        var dfd = $.Deferred();\r\n\r\n        // main form colorpickers\r\n        $.each(self.colorpickers, function (index, key) {\r\n            var $el = $('.' + key + '_color', ats_panel);\r\n            var colorpicker = 'colorpicker_' + key + '_color';\r\n            window[colorpicker] = $el.colorpicker({\r\n                container: $('.' + key + '_color .color', ats_panel),\r\n            }).on('changeColor.colorpicker', function (e) {\r\n                self.set_rgba_color(key + '_color', e.color);\r\n            });\r\n        });\r\n\r\n        return dfd;\r\n    };\r\n\r\n    // two way data binding for preview tooltips\r\n    self.bind_tooltips = function () {\r\n        $('.team-photo-settings select', ats_panel).on('change', function () {\r\n            var field = $(this).attr('data-field');\r\n            var val = $(this).val();\r\n            model.set('styles.' + model.get('layout') + '.' + field, val);\r\n        });\r\n\r\n        // bind some shit on photo size change\r\n        $('.team-photo-settings [name=\"team_photo_size_select\"]', ats_panel).on('change', function () {\r\n            var val = $(this).val();\r\n            var layout = model.get('layout');\r\n            var photo = $('.employer_photo img', ats_panel);\r\n\r\n            if(layout != 'grid'){\r\n                return false;\r\n            }\r\n\r\n            $('[name=\"team_photo_size\"]', ats_panel).val(val);\r\n        });\r\n\r\n        // handle btn group changes for radiobuttons-like inputs\r\n        $('.btn-group-radio .btn', ats_panel).on('click', function(e){\r\n            e.preventDefault();\r\n            var $el = $(this);\r\n            var node = $el.attr('data-model-node') || '';\r\n            var $parent = $el.parent('.btn-group');\r\n            var $input = $el.find('input');\r\n            var value = $input.attr('data-value');\r\n            var field_name = $parent.attr('data-field-name');\r\n            if(node == 'root'){\r\n                field_name = field_name;\r\n            }\r\n            if(node == 'form'){\r\n                field_name = node + '.' + field_name;\r\n            }\r\n            if(node == ''){\r\n                field_name = 'styles.' + model.get('layout') + '.' + field_name;\r\n            }\r\n            var option_name = $el.attr('data-option-name');\r\n\r\n            $input.prop('checked', 'checked');\r\n            $input.val(value);\r\n\r\n            $parent.find('.btn').removeClass('active');\r\n            model.set(field_name + '_' + option_name, value);\r\n            $el.addClass('active');\r\n        });\r\n\r\n        // handle btn group changes for checkbox-like inputs\r\n        $('.btn-group-checkbox .btn', ats_panel).on('click', function(e){\r\n            e.preventDefault();\r\n            var $el = $(this);\r\n            var $input = $el.find('input');\r\n            var field_name = $input.attr('name').split('team_').join('');\r\n            field_name = 'styles.' + model.get('layout') + '.' + field_name;\r\n\r\n            if(parseInt($input.val()) == 1){\r\n                model.set(field_name, '0');\r\n                $input.val('0');\r\n                $el.removeClass('active');\r\n            }else{\r\n                model.set(field_name, '1');\r\n                $input.val('1');\r\n                $el.addClass('active');\r\n            }\r\n        });\r\n\r\n        // show tooltip on A glyphicon click\r\n        $('[data-action=\"call-tooltip\"]', ats_panel).on('click', function (e) {\r\n            e.preventDefault();\r\n            var $this = $(this);\r\n            var field = $(this).parent().attr('data-tooltip-name');\r\n            var $toolptip = $('[data-field=\"' + field + '\"]', ats_panel);\r\n\r\n            $('.a-tooltip-wrapper', ats_panel).css('visibility', 'hidden').css('opacity', 0);\r\n            $toolptip.css('visibility', 'visible').css('opacity', 1);\r\n        });\r\n\r\n        // hide tooltip on document click anywhere outside tooltip\r\n        $(document).on('click', function (e) {\r\n            if(typeof ats_panel === 'undefined'){\r\n                return;\r\n            }\r\n            if( !$(e.target).parents('.a-tooltip-wrapper').length &&\r\n                !$(e.target).is('[data-action=\"call-tooltip\"]') &&\r\n                !$(e.target).parents('button').is('[data-action=\"call-tooltip\"]')\r\n                ){\r\n                    var $tooltip = $('.live-preview .a-tooltip-wrapper', ats_panel);\r\n                    if($tooltip.is(':visible')){\r\n                        $tooltip.css('visibility', 'hidden').css('opacity', 0);\r\n                    }\r\n                }\r\n        });\r\n\r\n        // Init Backbone views for tooltips\r\n        $.each(self.tooltips, function (key, value) {\r\n            var view_name = 'TeamTooltip' + value.type.capitalize();\r\n            var tooltip = 'view_tooltip_' + key;\r\n            window[tooltip] = new window[view_name]({\r\n                model: window.model,\r\n                el: $('.' + key + '_settings', ats_panel),\r\n                field_name: key // set current field name for data bindings\r\n            });\r\n            window[tooltip].render();\r\n        });\r\n    };\r\n\r\n    // init tooltips for each preview block (tooltips list stored in self.tooltips)\r\n    self.init_tooltips = function () {\r\n        var dfd = $.Deferred();\r\n        $.each(self.tooltips, function (key, value) {\r\n            var args = {\r\n                key: key,\r\n                width: value.width,\r\n                viewport: '.a-slide-panel',\r\n                direction: 'bottom',\r\n                container: $('#team-tooltips', ats_panel),\r\n                content: '#team-' + value.type + '-settings',\r\n                data: {\r\n                    field_name: key,\r\n                    hint: value.hint\r\n                }\r\n            };\r\n            window[key + '_tooltip'] = new AwesomeTooltip(args);\r\n            window[key + '_tooltip'].init();\r\n        });\r\n        self.bind_tooltips();\r\n        dfd.resolve();\r\n        return dfd;\r\n    };\r\n    \r\n    self.init_help = function () {\r\n        var dfd = $.Deferred();\r\n        var $clone = $('#preview-help').clone().removeAttr('id').attr('panel', 'preview-help').css({'zIndex': 4});\r\n        $('#team-form .col-md-4').append($clone.addClass('at-transition'));\r\n        dfd.resolve();\r\n        return dfd;\r\n    };\r\n\r\n    self.destroy_colorpickers = function () {\r\n        $.each(self.colorpickers, function (index, key) {\r\n            var colorpicker = 'colorpicker_' + key + '_color';\r\n            delete window[colorpicker];\r\n        });\r\n    };\r\n\r\n    // destroy preview\r\n    self.destroy = function(){\r\n        $('.toggle').off();\r\n        $('select', ats_panel).dropdown('destroy');\r\n        $('#team-tooltips', ats_panel).html('');\r\n        preview_view.close();\r\n        team_form_view.close();\r\n        $.each(self.tooltips, function (key, value) {\r\n            window['view_tooltip_' + key ].close();\r\n        });\r\n        $.each(self.tooltips, function (key, value) {\r\n            window[key + '_tooltip'].destroy();\r\n        });\r\n    };\r\n\r\n    self.reinit = function () {\r\n        var form = new AwesomeForm();\r\n        form.init(model.attributes); // refill form\r\n        self.show_fields();\r\n        self.bind_preview();\r\n        self.init_sortable_fields();\r\n    };\r\n    \r\n    // init preview\r\n    self.init = function(){\r\n        var form = new AwesomeForm();\r\n\r\n        //var def1 = self.init_help();\r\n        var def2 = form.init(model.attributes); // refill form\r\n        var def3 = self.show_fields();\r\n        var def4 = self.bind_form();\r\n        var def5 = self.bind_preview();\r\n        var def6 = self.init_tooltips();\r\n        var def7 = self.init_sortable_fields();\r\n\r\n        var dfd = $.Deferred();\r\n        $.when(def2, def3, def4, def5, def6, def7).then(function () {\r\n            self.init_colorpicker();\r\n            $('select', ats_panel).dropdown();\r\n            dfd.resolve();\r\n        });\r\n        return dfd;\r\n    };\r\n};","(function ($) {\r\n// toggle preview blocks visibility (show/hide)\r\n    var toggle_visibility = function ($el, val, model, options) {\r\n        $el.toggle(!!+val);\r\n    };\r\n\r\n    var photo_settings = function ($el, val, model, options) {\r\n        var layout = model.get('layout');\r\n        var $custom_width = $('.photo_width');\r\n        var $top_margin = $('.photo_top_margin');\r\n        var photo_sizes = {\r\n            'a-full': '100%',\r\n            /*'a-large': '600px',\r\n             'a-medium': '300px',\r\n             'a-thumbnail': '150px',\r\n             'a-small': '50px',*/\r\n        };\r\n\r\n        toggle_visibility($el, val[0], model, options); // is block visible?\r\n        var $wrapper = $el.find('.photo-wrapper');\r\n        var $shape = $el.find('.photo-shape');\r\n        var $photo = $el.find('.photo-container');\r\n\r\n        $custom_width.hide();\r\n        if ('round' == val[1]) {\r\n            $shape.addClass('ats-round');\r\n        }\r\n        if ('square' == val[1]) {\r\n            $shape.removeClass('ats-round');\r\n        }\r\n\r\n        if (layout == 'grid') {\r\n            if (val[2] == 'a-full') {\r\n                $el.css('margin', '0');\r\n                $shape.css('width', photo_sizes[val[2]]);\r\n                $photo.css('width', photo_sizes[val[2]]);\r\n                $photo.css('padding-bottom', photo_sizes[val[2]]);\r\n                $top_margin.hide();\r\n            }\r\n            if (val[2] == 'custom') {\r\n                $el.css('margin-top', AwesomeUtil.calc_size(val[4]));\r\n                $shape.css('width', AwesomeUtil.calc_size(val[3]));\r\n                $custom_width.show();\r\n                $top_margin.show();\r\n            }\r\n        }\r\n        if (layout == 'table') {\r\n            $el.css('width', AwesomeUtil.calc_size(val[3]));\r\n            $shape.css('width', AwesomeUtil.calc_size(val[3]));\r\n            $photo.css('width', AwesomeUtil.calc_size(val[3]));\r\n            $photo.css('padding-bottom', AwesomeUtil.calc_size(val[3]));\r\n            $custom_width.show();\r\n        }\r\n        if (layout == 'widget') {\r\n            $shape.css('width', AwesomeUtil.calc_size(val[3]));\r\n            $shape.css('min-width', AwesomeUtil.calc_size(val[3]));\r\n            $photo.css('width', AwesomeUtil.calc_size(val[3]));\r\n            $photo.css('padding-bottom', AwesomeUtil.calc_size(val[3]));\r\n            $custom_width.show();\r\n        }\r\n    };\r\n\r\n// handle preview block appearance on tooltip editor settings change\r\n    var font_settings = function ($el, val, model, options) {\r\n        var color_field = options.selector.replace_all('.employer_', '') + '_color';\r\n        toggle_visibility($el, val[0], model, options); // is block visible?\r\n        var $elc = $el.find('.team-field-content');\r\n        //reset styles\r\n        $elc.css('font-weight', 'normal');\r\n        $elc.css('font-style', 'normal');\r\n        $el.find('.font-style .btn').removeClass('active'); // reset font-style buttons\r\n\r\n        $elc.css('font-size', val[1]); // font size\r\n        $elc.css('color', val[2]); // text color\r\n\r\n        if (!!+val[3]) {\r\n            $el.find('[data-option-name=\"bold\"]').addClass('active'); // set button \"bold\" to active state\r\n            $elc.css('font-weight', 'bold');\r\n        }\r\n        if (!!+val[4]) {\r\n            $el.find('[data-option-name=\"italic\"]').addClass('active'); // set button \"italic\" to active state\r\n            $elc.css('font-style', 'italic');\r\n        }\r\n        $elc.css('text-transform', val[5]); // is uppercase\r\n        $elc.css('text-align', val[6]); //text align\r\n        $el.css('margin-top', AwesomeUtil.calc_size(val[7])); //margin-top\r\n    };\r\n\r\n    var card_body_settings = function ($el, color, border, shadow) {\r\n        $el.css('background-color', color);\r\n        $el.css('border', '1px solid ' + border);\r\n        if (shadow !== '') {\r\n            $el.css('-webkit-box-shadow', '0 0 5px 0 ' + shadow);\r\n            $el.css('-moz-box-shadow', '0 0 5px 0 ' + shadow);\r\n            $el.css('box-shadow', '0 0 5px 0 ' + shadow);\r\n        }\r\n    };\r\n\r\n// Backbone View for team preview\r\n    TeamPreview = Backbone.View.extend({\r\n        initialize: function (options) {\r\n            _.bindAll(this, 'before_render', 'render', 'after_render'); // create callbacks for 'before_render' and 'after_render' pseudo events\r\n            var _this = this;\r\n            this.render = _.wrap(this.render, function (render) {\r\n                _this.before_render();\r\n                render();\r\n                _this.after_render();\r\n                return _this;\r\n            });\r\n        },\r\n\r\n        // data bindings\r\n        bindings: function () {\r\n            var result = {};\r\n            var layout = model.get('layout');\r\n            var model_field = 'styles.' + layout + '.';\r\n\r\n            // team base gaps and background color\r\n            result['#team-preview .ats-layout'] = {\r\n                observe: model_field + 'hover',\r\n                update: function ($el, val, model, options) {\r\n                    if (val == 'off') {\r\n                        $el.attr('class', 'ats-layout-' + model.get('layout') + ' ats-layout ');\r\n                    } else {\r\n                        $el.attr('class', 'ats-layout-' + model.get('layout') + ' ats-layout ' + 'ats-effect-' + val);\r\n                    }\r\n                }\r\n            };\r\n\r\n\r\n            // team base gaps and background color\r\n            result['#team-preview ul.employers-box'] = {\r\n                observe: [\r\n                    model_field + 'gaps',\r\n                    model_field + 'base_color',\r\n                    model_field + 'align'\r\n                ],\r\n                update: function ($el, val, model, options) {\r\n                    if (model.get('layout') == 'grid') {\r\n                        $el.css('background-color', val[1]);\r\n                        $el.css('text-align', val[2]);\r\n                    }\r\n                }\r\n            };\r\n\r\n\r\n            // team card base color, border color, shadow color and gaps\r\n            result['#team-preview ul.employers-box > li > div'] = {\r\n                observe: [\r\n                    model_field + 'card_base_color',\r\n                    model_field + 'card_border_color',\r\n                    model_field + 'card_shadow_color',\r\n                    model_field + 'card_gaps',\r\n                    model_field + 'body_visible'\r\n                ],\r\n                update: function ($el, val, model, options) {\r\n                    $el.parent('li').css('padding', '0');\r\n                    //$el.parent('li').css('padding', '0');\r\n                    if (model.get('layout') == 'grid') {\r\n                        if (!!+val[4]) {\r\n                            card_body_settings($el, val[0], val[1], val[2]); // set card body bg, border and shadow\r\n                        } else {\r\n                            $el.css('background-color', 'transparent');\r\n                            $el.css('border', 'none');\r\n                            $el.css('-webkit-box-shadow', 'none');\r\n                            $el.css('-moz-box-shadow', 'none');\r\n                            $el.css('box-shadow', 'none');\r\n                        }\r\n                        if (model.get('styles.grid.photo_size') == 'a-full') {\r\n                            $el.css('padding', '0');\r\n                        }\r\n                    } else {\r\n                        $el.css('border-top-color', val[1]);\r\n                        $el.css('border-bottom-color', val[1]);\r\n                    }\r\n                }\r\n            };\r\n\r\n            // divider\r\n            result['.employer_divider'] = {\r\n                observe: [\r\n                    model_field + 'divider_visible',\r\n                    model_field + 'divider_color',\r\n                    model_field + 'divider_width',\r\n                    model_field + 'divider_top_margin',\r\n                ],\r\n                update: function ($el, val, model, options) {\r\n                    if (model.get('layout') == 'grid') {\r\n                        toggle_visibility($el, val[0], model, options); // divider visible\r\n                        $el.find('span').css('background-color', val[1]); // divider color\r\n                        $el.find('span').css('width', AwesomeUtil.calc_size(val[2])); // divider width\r\n                        $el.css('margin-top', AwesomeUtil.calc_size(val[3])); // divider top margin\r\n                    }\r\n                }\r\n            };\r\n\r\n            // team layout slider\r\n            result['.card_margin'] = {\r\n                observe: model_field + 'slider',\r\n                update: function ($el, val, model, options) {\r\n                    $el.hide();\r\n                    if (val === 0 && model.get('layout') == 'grid') {\r\n                        $el.show();\r\n                    }\r\n                }\r\n            };\r\n\r\n            // team layout align\r\n            result['.team-align'] = {\r\n                observe: model_field + 'align',\r\n                update: function ($el, val, model, options) {\r\n                    $el.find('.btn').removeClass('active');\r\n                    $el.find('.align-' + val).addClass('active');\r\n                }\r\n            };\r\n\r\n            // employer photo block settings\r\n            result['.employer_photo'] = {\r\n                observe: [\r\n                    model_field + 'photo_visible',\r\n                    model_field + 'photo_shape',\r\n                    model_field + 'photo_size',\r\n                    model_field + 'photo_width',\r\n                    model_field + 'photo_top_margin'\r\n                ],\r\n                update: photo_settings\r\n            };\r\n\r\n            // employer name block bindings\r\n            result['.employer_name'] = {\r\n                observe: [\r\n                    model_field + 'name_visible',\r\n                    model_field + 'name_font_size',\r\n                    model_field + 'name_color',\r\n                    model_field + 'name_bold',\r\n                    model_field + 'name_italic',\r\n                    model_field + 'name_text_transform',\r\n                    model_field + 'name_align',\r\n                    model_field + 'name_top_margin'\r\n                ],\r\n                update: font_settings\r\n            };\r\n\r\n            // employer position block bindings\r\n            result['.employer_position'] = {\r\n                observe: [\r\n                    model_field + 'position_visible',\r\n                    model_field + 'position_font_size',\r\n                    model_field + 'position_color',\r\n                    model_field + 'position_bold',\r\n                    model_field + 'position_italic',\r\n                    model_field + 'position_text_transform',\r\n                    model_field + 'position_align',\r\n                    model_field + 'position_top_margin'\r\n                ],\r\n                update: font_settings\r\n            };\r\n\r\n            // employer short bio block bindings\r\n            result['.employer_short_bio'] = {\r\n                observe: [\r\n                    model_field + 'short_bio_visible',\r\n                    model_field + 'short_bio_font_size',\r\n                    model_field + 'short_bio_color',\r\n                    model_field + 'short_bio_bold',\r\n                    model_field + 'short_bio_italic',\r\n                    model_field + 'short_bio_text_transform',\r\n                    model_field + 'short_bio_align',\r\n                    model_field + 'short_bio_top_margin'\r\n                ],\r\n                update: font_settings\r\n            };\r\n\r\n            // employer phone block settings\r\n            result['.employer_phone'] = {\r\n                observe: [\r\n                    model_field + 'phone_visible',\r\n                    model_field + 'contacts_font_size',\r\n                    model_field + 'contacts_color',\r\n                    model_field + 'contacts_bold',\r\n                    model_field + 'contacts_italic',\r\n                    model_field + 'contacts_text_transform',\r\n                    model_field + 'contacts_align',\r\n                    model_field + 'contacts_top_margin'\r\n                ],\r\n                update: font_settings\r\n            };\r\n            // employer phone block settings\r\n            result['.employer_email'] = {\r\n                observe: [\r\n                    model_field + 'email_visible',\r\n                    model_field + 'contacts_font_size',\r\n                    model_field + 'contacts_color',\r\n                    model_field + 'contacts_bold',\r\n                    model_field + 'contacts_italic',\r\n                    model_field + 'contacts_text_transform',\r\n                    model_field + 'contacts_align',\r\n                    model_field + 'contacts_top_margin'\r\n                ],\r\n                update: font_settings\r\n            };\r\n            // employer social block settings\r\n            result['.employer_skype'] = {\r\n                observe: [\r\n                    model_field + 'skype_visible',\r\n                    model_field + 'contacts_font_size',\r\n                    model_field + 'contacts_color',\r\n                    model_field + 'contacts_bold',\r\n                    model_field + 'contacts_italic',\r\n                    model_field + 'contacts_text_transform',\r\n                    model_field + 'contacts_align',\r\n                    model_field + 'contacts_top_margin'\r\n                ],\r\n                update: font_settings\r\n            };\r\n            // employer link block settings\r\n            result['.employer_link'] = {\r\n                observe: [\r\n                    model_field + 'link_visible',\r\n                    model_field + 'contacts_font_size',\r\n                    model_field + 'contacts_color',\r\n                    model_field + 'contacts_bold',\r\n                    model_field + 'contacts_italic',\r\n                    model_field + 'contacts_text_transform',\r\n                    model_field + 'contacts_align',\r\n                    model_field + 'contacts_top_margin'\r\n                ],\r\n                update: font_settings\r\n            };\r\n            // employer link block settings\r\n            result['.employer_location'] = {\r\n                observe: [\r\n                    model_field + 'location_visible',\r\n                    model_field + 'contacts_font_size',\r\n                    model_field + 'contacts_color',\r\n                    model_field + 'contacts_bold',\r\n                    model_field + 'contacts_italic',\r\n                    model_field + 'contacts_text_transform',\r\n                    model_field + 'contacts_align',\r\n                    model_field + 'contacts_top_margin'\r\n                ],\r\n                update: font_settings\r\n            };\r\n            // employer social block settings\r\n            result['.employer_social'] = {\r\n                observe: [\r\n                    model_field + 'social_visible',\r\n                    model_field + 'social_color',\r\n                    model_field + 'social_size',\r\n                    model_field + 'social_top_margin',\r\n                    model_field + 'social_align'\r\n                ],\r\n                update: function ($el, val, model, options) {\r\n                    toggle_visibility($el, val[0], model, options);\r\n                    $el.css('color', val[1]);\r\n                    $el.css('font-size', val[2]);\r\n                    $el.css('margin-top', AwesomeUtil.calc_size(val[3]));\r\n                    $el.css('text-align', val[4]);\r\n\r\n                    $el.css('font-size', 'initial');\r\n                    var width = $el.outerWidth();\r\n                    var icon_max_size = (width / 6) - 5;\r\n                    $el.css('font-size', AwesomeUtil.clean_number(val[2]) > icon_max_size ? icon_max_size : val[2]);\r\n                }\r\n            };\r\n\r\n            // skills block settings\r\n            result['.employer_skills'] = {\r\n                observe: [\r\n                    model_field + 'skills_visible',\r\n                    model_field + 'skills_font_size',\r\n                    model_field + 'skills_text_color',\r\n                    model_field + 'skills_bold',\r\n                    model_field + 'skills_italic',\r\n                    model_field + 'skills_text_transform',\r\n                    model_field + 'skills_align',\r\n                    model_field + 'skills_top_margin'\r\n                ],\r\n                update: font_settings\r\n            }\r\n            result['.employer_skills ul'] = {\r\n                observe: [\r\n                    model_field + 'skills_size',\r\n                    model_field + 'skills_bar_color',\r\n                    model_field + 'skills_type',\r\n                ],\r\n                update: function ($el, val, model, options) {\r\n                    // bar size & color\r\n                    $el.find('span.value').css('height', val[0]);\r\n                    $el.find('svg').css('width', val[0]);\r\n                    $el.find('svg').css('height', val[0]);\r\n                    $el.find('span.value').css('background-color', val[1]);\r\n                    $el.find('svg').css('color', val[1]);\r\n                    $el.find('.skill-value').css('width', '100%');\r\n                    $el.find('.skill-value').attr('class', 'skill-value skill-value-' + val[2]);\r\n                    if (val[2] == 'star') {\r\n                        var raw = val[0].replace(/\\D+/g, '');\r\n                        $el.find('.skill-value').css('width', AwesomeUtil.calc_size(raw * 5 + ''));\r\n                        $el.find('.star-fill').css('width', AwesomeUtil.calc_size(raw * 4 + ''));\r\n                    }\r\n                    // type\r\n                    $el.find('.skill-value > div').hide();\r\n                    $el.find('.skill-value .skills-' + val[2]).show();\r\n\r\n                    $el.find('.skill-value-star').css('max-width', '100%');\r\n                    var fill_max_width = $el.find('.star-background').outerWidth();\r\n                    fill_max_width = Math.round(fill_max_width / 10) * 10;\r\n\r\n                    $el.find('.skill-value-star').css('max-width', fill_max_width);\r\n                    $el.find('.star-fill').css('max-width', fill_max_width * 0.8);\r\n\r\n                    var icon_max_width = $el.find('.star-background > *').outerWidth();\r\n\r\n                    $el.find('.star-background > *').each(function (index, item) {\r\n                        $(item).css('max-height', icon_max_width);\r\n                    });\r\n                    $el.find('.star-fill > *').each(function (index, item) {\r\n                        $(item).css('max-width', icon_max_width);\r\n                        $(item).css('max-height', icon_max_width);\r\n                    });\r\n                }\r\n            };\r\n            return result;\r\n        },\r\n        // before render callback\r\n        /* jshint multistr:true */\r\n        before_render: function () {\r\n            var button = '<button data-action=\"call-tooltip\">\\\r\n            <svg class=\"icon\" viewBox=\"0 0 28 28\">\\\r\n            <use xlink:href=\"#icon-pen\"></use>\\\r\n            </svg>\\\r\n            </button>';\r\n            this.$el.find('#team-preview .grid-container').append(button);\r\n\r\n        },\r\n        render: function () {\r\n            preview.insert_preview_html();\r\n            this.stickit();\r\n            return this;\r\n        },\r\n        // after render callback\r\n        after_render: function () {\r\n            /*var sizes = ['full', 'large', 'medium', 'thumbnail'];\r\n             var a_ajax = new AwesomeAjax();\r\n             var $parent = jQuery('#a-slide-panel .employer_photo');\r\n             var id = $parent.parents('li').attr('employer-id');\r\n\r\n             jQuery.each(sizes, function (index, value) {\r\n             //a_ajax.get_team_preview_photo($parent, id, value);\r\n             })*/\r\n        },\r\n        close: function () {\r\n            this.unstickit();\r\n        }\r\n    });\r\n})(jQuery);","(function ($) {\r\n// Backbone View for tooltips\r\n    TeamTooltipPhoto = Backbone.View.extend({\r\n        initialize: function (options) {\r\n            var layout = model.get('layout');\r\n            // we set current block on call, so we need options array to bind data properly\r\n            this.options = options;\r\n            _.bindAll(this, 'bindings');\r\n            var model_base = 'styles.' + layout + '.';\r\n            $('#a-slide-panel [name=\"team_' + this.options.field_name + '_size_select\"]').val(model.get(model_base + 'photo_size')).dropdown('update');\r\n            if (model.get(model_base + 'photo_size') == 'a-full') {\r\n                $('#a-slide-panel .' + this.options.field_name + '_width').hide();\r\n                $('#a-slide-panel .' + this.options.field_name + '_top_margin').hide();\r\n            }\r\n        },\r\n        bindings: function () {\r\n            var layout = model.get('layout');\r\n            var result = {};\r\n            var field = this.options.field_name;\r\n            var field_model = 'styles.' + layout + '.' + field;\r\n            result['[name=\"team_' + field + '_shape\"]'] = field_model + '_shape'; // photo shape\r\n            result['[name=\"team_' + field + '_size\"]'] = field_model + '_size'; // photo size\r\n            result['[name=\"team_' + field + '_width\"]'] = field_model + '_width'; // photo width\r\n            result['[name=\"team_' + field + '_top_margin\"]'] = field_model + '_top_margin'; // block top margin\r\n            result['.btn-group-photo-shape'] = {\r\n                observe: field_model + '_shape',\r\n                update: function ($el, val, model, options) {\r\n                    $el.find('.btn').removeClass('active');\r\n                    $el.find('input').val(val);\r\n                    $el.find('.' + this.options.field_name + '_shape_' + val).addClass('active');\r\n                }\r\n            };\r\n            return result;\r\n        },\r\n        render: function () {\r\n            this.stickit();\r\n            return this;\r\n        },\r\n        close: function () {\r\n            this.unstickit();\r\n            //delete this.$el;\r\n            //delete this.el;\r\n        }\r\n    });\r\n})(jQuery);","// Backbone View for tooltips\r\nvar $ = jQuery;\r\nvar TeamTooltipFont = Backbone.View.extend({\r\n    initialize: function (options) {\r\n        this.options = options; // we set current block on call, so we need options array to bind data properly\r\n        _.bindAll(this, 'bindings');\r\n    },\r\n    bindings: function () {\r\n        var result = {};\r\n        var layout = model.get('layout');\r\n        var field = this.options.field_name;\r\n        var field_model = 'styles.' + layout + '.' + field;\r\n        result['[name=\"team_' + field + '_font_size\"]'] = field_model + '_font_size'; // block font size\r\n        result['[name=\"team_' + field + '_color\"]'] = field_model + '_color'; // block text color\r\n        result['[name=\"team_' + field + '_bold\"]'] = field_model + '_bold'; // block bold\r\n        result['[name=\"team_' + field + '_italic\"]'] = field_model + '_italic'; // block italic\r\n        result['[name=\"team_' + field + '_text_transform\"]'] = field_model + '_text_transform'; // block text transform\r\n        result['[name=\"team_' + field + '_align\"]'] = field_model + '_align'; // block align\r\n        result['[name=\"team_' + field + '_top_margin\"]'] = field_model + '_top_margin'; // block top margin\r\n\r\n        result['.btn-group-align'] = {\r\n            observe: field_model + '_align',\r\n            update: function($el, val, model, options){\r\n                $el.find('.btn').removeClass('active');\r\n                $el.find('input').val(val);\r\n                $el.find('.' + this.options.field_name + '_align_' + val).addClass('active');\r\n            }\r\n        };\r\n        result['.btn-bold'] = {\r\n            observe: field_model + '_bold',\r\n            update: function($el, val, model, options){\r\n                $el.find('.btn').removeClass('active');\r\n                if(!!+val){\r\n                    $el.addClass('active');\r\n                }\r\n            }\r\n        };\r\n        result['.btn-italic'] = {\r\n            observe: field_model + '_italic',\r\n            update: function($el, val, model, options){\r\n                $el.find('.btn').removeClass('active');\r\n                if(!!+val){\r\n                    $el.addClass('active');\r\n                }\r\n            }\r\n        };\r\n        result['.btn-group-text-transform'] = {\r\n            observe: field_model + '_text_transform',\r\n            update: function($el, val, model, options){\r\n                $el.find('.btn').removeClass('active');\r\n                $el.find('input').val(val);\r\n                $el.find('.' + this.options.field_name + '_text_transform_' + val).addClass('active');\r\n            }\r\n        };\r\n        return result;\r\n    },\r\n    render: function(){\r\n        this.stickit();\r\n        return this;\r\n    },\r\n    close: function(){\r\n        this.unstickit();\r\n        //delete this.$el;\r\n        //delete this.el;\r\n    }\r\n});","// Backbone View for tooltips\r\nvar $ = jQuery;\r\nvar TeamTooltipDivider = Backbone.View.extend({\r\n    initialize: function (options) {\r\n        var layout = model.get('layout');\r\n        // we set current block on call, so we need options array to bind data properly\r\n        this.options = options;\r\n        _.bindAll(this, 'bindings');\r\n    },\r\n    bindings: function () {\r\n        var layout = model.get('layout');\r\n        var result = {};\r\n        var field = this.options.field_name;\r\n        var field_model = 'styles.' + layout + '.' + field;\r\n        result['[name=\"team_' + field + '_color\"]'] = field_model + '_color'; // block top margin\r\n        result['[name=\"team_' + field + '_width\"]'] = field_model + '_width'; // divider width\r\n        result['[name=\"team_' + field + '_top_margin\"]'] = field_model + '_top_margin'; // block top margin\r\n\r\n\r\n        return result;\r\n    },\r\n    render: function(){\r\n        this.stickit();\r\n        return this;\r\n    },\r\n    close: function(){\r\n        this.unstickit();\r\n        //delete this.$el;\r\n        //delete this.el;\r\n    }\r\n});","// Backbone View for tooltips\r\nvar $ = jQuery;\r\nvar TeamTooltipSocial = Backbone.View.extend({\r\n    initialize: function (options) {\r\n        var layout = model.get('layout');\r\n        // we set current block on call, so we need options array to bind data properly\r\n        this.options = options;\r\n        _.bindAll(this, 'bindings');\r\n    },\r\n    bindings: function () {\r\n        var layout = model.get('layout');\r\n        var result = {};\r\n        var field = this.options.field_name;\r\n        var field_model = 'styles.' + layout + '.' + field;\r\n        result['[name=\"team_' + field + '_color\"]'] = field_model + '_color'; // social icons size\r\n        result['[name=\"team_' + field + '_size\"]'] = field_model + '_size'; // social icons size\r\n        result['[name=\"team_' + field + '_align\"]'] = field_model + '_align'; // block top margin\r\n        result['[name=\"team_' + field + '_top_margin\"]'] = field_model + '_top_margin'; // block top margin\r\n\r\n        result['.btn-group-align'] = {\r\n            observe: field_model + '_align',\r\n            update: function($el, val, model, options){\r\n                $el.find('.btn').removeClass('active');\r\n                $el.find('input').val(val);\r\n                $el.find('.' + this.options.field_name + '_align_' + val).addClass('active');\r\n            }\r\n        };\r\n\r\n        return result;\r\n    },\r\n    render: function(){\r\n        this.stickit();\r\n        return this;\r\n    },\r\n    close: function(){\r\n        this.unstickit();\r\n        //delete this.$el;\r\n        //delete this.el;\r\n    }\r\n});","// Backbone View for tooltips\r\nvar $ = jQuery;\r\nvar TeamTooltipSkills = Backbone.View.extend({\r\n    initialize: function (options) {\r\n        var layout = model.get('layout');\r\n        // we set current block on call, so we need options array to bind data properly\r\n        this.options = options;\r\n        _.bindAll(this, 'bindings');\r\n    },\r\n    bindings: function () {\r\n        var layout = model.get('layout');\r\n        var result = {};\r\n        var field = this.options.field_name;\r\n        var field_model = 'styles.' + layout + '.' + field;\r\n        result['[name=\"team_' + field + '_text_color\"]'] = field_model + '_text_color'; // skill text color\r\n        result['[name=\"team_' + field + '_bar_color\"]'] = field_model + '_bar_color'; // skill bar color\r\n        result['[name=\"team_' + field + '_font_size\"]'] = field_model + '_font_size'; // skill font size\r\n        result['[name=\"team_' + field + '_size\"]'] = field_model + '_size'; // skill bar size\r\n        result['[name=\"team_' + field + '_type\"]'] = field_model + '_type'; // skill type\r\n        result['[name=\"team_' + field + '_bold\"]'] = field_model + '_bold'; // block bold\r\n        result['[name=\"team_' + field + '_italic\"]'] = field_model + '_italic'; // block italic\r\n        result['[name=\"team_' + field + '_text_transform\"]'] = field_model + '_text_transform'; // block text transform\r\n        result['[name=\"team_' + field + '_align\"]'] = field_model + '_align'; // block align\r\n        result['[name=\"team_' + field + '_top_margin\"]'] = field_model + '_top_margin'; // block top margin\r\n\r\n        result['.btn-bold'] = {\r\n            observe: field_model + '_bold',\r\n            update: function($el, val, model, options){\r\n                $el.find('.btn').removeClass('active');\r\n                if(!!+val){\r\n                    $el.addClass('active');\r\n                }\r\n            }\r\n        };\r\n        result['.btn-italic'] = {\r\n            observe: field_model + '_italic',\r\n            update: function($el, val, model, options){\r\n                $el.find('.btn').removeClass('active');\r\n                if(!!+val){\r\n                    $el.addClass('active');\r\n                }\r\n            }\r\n        };\r\n        result['.btn-group-text-transform'] = {\r\n            observe: field_model + '_text_transform',\r\n            update: function($el, val, model, options){\r\n                $el.find('.btn').removeClass('active');\r\n                $el.find('input').val(val);\r\n                $el.find('.' + this.options.field_name + '_text_transform_' + val).addClass('active');\r\n            }\r\n        };\r\n        result['.btn-group-align'] = {\r\n            observe: field_model + '_align',\r\n            update: function($el, val, model, options){\r\n                $el.find('.btn').removeClass('active');\r\n                $el.find('input').val(val);\r\n                $el.find('.' + this.options.field_name + '_align_' + val).addClass('active');\r\n            }\r\n        };\r\n\r\n        result['.btn-group-type'] = {\r\n            observe: field_model + '_type',\r\n            update: function($el, val, model, options){\r\n                $el.find('.btn').removeClass('active');\r\n                $el.find('input').val(val);\r\n                $el.find('.' + this.options.field_name + '_type_' + val).addClass('active');\r\n            }\r\n        };\r\n\r\n        return result;\r\n    },\r\n    render: function(){\r\n        this.stickit();\r\n        return this;\r\n    },\r\n    close: function(){\r\n        this.unstickit();\r\n    }\r\n});","/**\r\n * Employer preview\r\n */\r\n\r\nvar file_frame;\r\n\r\nvar AwesomeEmployer = function (){\r\n    'use strict';\r\n\r\n    var ats_animation = new ATS_Animation();\r\n    var $ = jQuery; // enable jQuery\r\n    var self = this;\r\n\r\n    // two way data bindings for edit team form\r\n    self.bind_form = function(){\r\n        var dfd = $.Deferred();\r\n\r\n        // Upload employer avatar via built-in Wordpress media library\r\n        $(document).on('click', '[data-action=\"upload_photo\"]', function(e){\r\n            e.preventDefault();\r\n\r\n            var json;\r\n            var url;\r\n\r\n            if(undefined !== file_frame){\r\n                file_frame.open();\r\n                return;\r\n            }\r\n\r\n            file_frame = wp.media.frames.file_frame = wp.media({\r\n                frame: 'post',\r\n                state: 'insert',\r\n                multiple: false\r\n            });\r\n\r\n            // handle image insert on media window submit\r\n            file_frame.on('insert', function(){\r\n                var $form = $(this).parents('.foto-upload');\r\n                json = file_frame.state().get('selection').first().toJSON();\r\n                if(0 > $.trim(json.url.length)){\r\n                    return;\r\n                }\r\n                url = json.sizes['a-thumbnail'] ? json.sizes['a-thumbnail'].url : json.url;\r\n                var $img = $('<img src=\"' + url + '\"/>');\r\n\r\n                $form.find('[name=\"employer_thumbnail_id\"]').val(json.id); // set thumbnail ID to hidden field\r\n                model.set('custom_fields.thumbnail_id', json.id);\r\n                $('.foto-wrapper', ats_panel).html('').append($img); // show image\r\n                $('#employer-form-foto-remove', ats_panel).show(); // show \"remove\" button\r\n                file_frame.close();\r\n            });\r\n\r\n            file_frame.open();\r\n            return false;\r\n        });\r\n\r\n        // Remove employer avatar\r\n        $(document).on('click', '[data-action=\"remove_photo\"]', function(e){\r\n            e.preventDefault();\r\n            $('[name=\"employer_thumbnail_id\"]', ats_panel).val(''); // remove thumbnail ID from hidden field\r\n            $('#employer-form-foto', ats_panel).html(''); // remove thumbnail image\r\n            window.model.set('custom_fields.thumbnail_id', '');\r\n            $(this).hide();\r\n        });\r\n\r\n        dfd.resolve();\r\n        return dfd;\r\n    };\r\n\r\n    self.update_skill_order = function(){\r\n        var skills = model.get('custom_fields.skills');\r\n        var order = _.map($('.skills-list li'), function (el) {\r\n            return parseInt(\r\n                $(el).attr('id')\r\n                    .replace_all('skill-', '')\r\n            );\r\n        });\r\n\r\n        model.set('custom_fields.skills_order', order);\r\n    };\r\n\r\n    self.make_skill = function (form) {\r\n        var $name = $('[name=\"employer_skill_name\"]', form);\r\n        var value = $('.skill-value-percent [name=\"employer_skill_value\"]', form).val();\r\n        var $alert = $('[data-type=\"skill-alert\"]', form);\r\n\r\n        $alert.attr('class', 'alert').hide();\r\n\r\n        // validation\r\n        if($name.val() == ''){\r\n            $alert.addClass('alert-warning').show().html('Skill name can\\'t be empty.');\r\n            return false;\r\n        }\r\n\r\n        var skill = {\r\n            name: $name.val(),\r\n            //type: type,\r\n            value: value\r\n        };\r\n\r\n        return skill;\r\n    }\r\n\r\n    self.bind_skills = function () {\r\n        $('.panel-skills').on('click', '[data-action=\"add-skill\"]', function () {\r\n            // elements\r\n            var form = $('[data-form=\"add-skill\"]', ats_panel);\r\n            var skill = self.make_skill(form);\r\n            if(skill){\r\n                var skills = model.get('custom_fields.skills') || [];\r\n                model.push('custom_fields.skills_order', skills.length);\r\n\r\n                $('[name=\"employer_skill_name\"]', form).val('');\r\n                model.push('custom_fields.skills', skill);\r\n            }\r\n        });\r\n\r\n        $('.skills-list').on('click', '[data-action=\"edit-skill\"]', function () {\r\n            var $skill = $(this).parents('li');\r\n            var index = $skill.attr('id').replace_all('skill-', '');\r\n\r\n            employer_form_view.edit_skill(index);\r\n        });\r\n\r\n        $('.skills-list').on('click', '[data-action=\"cancel-skill-edit\"]', function () {\r\n            $('.skills-list .skill-inline-form', ats_panel).remove();\r\n            $('.skills-list li.skill .skill-box').show();\r\n        });\r\n\r\n        $('.skills-list').on('click', '[data-action=\"save-skill\"]', function(){\r\n            var form = $(this).parents('[data-form=\"edit-skill\"]');\r\n            var index = $(this).parents('li.skill').attr('id').replace_all('skill-', '');\r\n            var skills = model.get('custom_fields.skills');\r\n            var skill = self.make_skill(form);\r\n            var $spinner = $(this).find('.a-spinner');\r\n            var $text = $(this).find('.text');\r\n\r\n            if(skill){\r\n                $text.css('visibility', 'hidden');\r\n                $spinner.show();\r\n                skills[index] = skill;\r\n                model.set('custom_fields.skills', skills);\r\n                setTimeout(function () {\r\n                    $spinner.hide();\r\n                    $text.css('visibility', 'visible');\r\n                }, 900);\r\n            }\r\n        });\r\n\r\n        $('.skills-list').on('click', '[data-action=\"delete-skill\"]', function () {\r\n            var $skill = $(this).parents('li');\r\n            var index = $skill.attr('id').replace_all('skill-', '');\r\n            var skills_order = model.get('custom_fields.skills_order');\r\n\r\n            ats_animation.delete($skill).done(function () {\r\n                var new_order = _.filter(skills_order, function (item) {\r\n                    return item != index;\r\n                });\r\n                new_order = _.map(new_order, function (item) {\r\n                    item = parseInt(item);\r\n                    return item > index ? item - 1 : item;\r\n                });\r\n                model.set('custom_fields.skills_order', new_order);\r\n                model.unset_array('custom_fields.skills', index);\r\n            });\r\n        });\r\n\r\n        $('.panel-skills').on('input', 'input[name=\"employer_skill_value\"]', function (e) {\r\n            var value = $(this).val();\r\n\r\n            value = value.replace(/\\D+/g, '');\r\n            value = parseInt(value) > 100 ? 100 : value;\r\n\r\n            $(this).val(value);\r\n        });\r\n\r\n        $('.skills-list').sortable({\r\n            axis: 'y',\r\n            containment: \"parent\",\r\n            forceHelperSize: true,\r\n            forcePlaceholderSize: true,\r\n            helper: \"clone\",\r\n            update: function(event, ui){\r\n                self.update_skill_order();\r\n            }\r\n        });\r\n    }\r\n\r\n    // destroy preview\r\n    self.destroy = function(){\r\n        $('.panel-skills').off('click', '[data-action=\"add-skill\"]');\r\n        $('.skills-list').off('click', '[data-action=\"save-skill\"]');\r\n        $('.skills-list').off('click', '[data-action=\"edit-skill\"]');\r\n        $('.skills-list').off('click', '[data-action=\"delete-skill\"]');\r\n        $('.skills-list').off('click', '[data-action=\"cancel-skill-edit\"]');\r\n\r\n    };\r\n\r\n    // init preview\r\n    self.init = function(){\r\n        self.bind_form();\r\n        self.bind_skills();\r\n        var form = new AwesomeForm();\r\n        form.init(model.attributes);\r\n\r\n        window.employer_form_view = new EmployerForm({\r\n            model: window.model\r\n        });\r\n        employer_form_view.setElement($('#employer-form', ats_panel));\r\n        employer_form_view.render();\r\n    };\r\n};"],"sourceRoot":"/source/"}